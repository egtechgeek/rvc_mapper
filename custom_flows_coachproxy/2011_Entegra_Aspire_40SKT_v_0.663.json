[
    {
        "id": "a36f0dbff8923248",
        "type": "tab",
        "label": "Config_Local",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "291aed48d6167ccb",
        "type": "tab",
        "label": "Configuration",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "420b5823.3c372",
        "type": "tab",
        "label": "System_Notify",
        "disabled": false,
        "info": ""
    },
    {
        "id": "477cac19.6a9e64",
        "type": "tab",
        "label": "Logic",
        "disabled": false,
        "info": ""
    },
    {
        "id": "144c673ecddfa485",
        "type": "tab",
        "label": "Lights",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5a91ecccc946d063",
        "type": "tab",
        "label": "Power",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "17d34c2dd41238af",
        "type": "tab",
        "label": "Scenes",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "60ba2c9ab24c420e",
        "type": "tab",
        "label": "Aquahot",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a9a1344b8e184732",
        "type": "tab",
        "label": "Water_Tanks",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "88d7f3330d1f4af5",
        "type": "tab",
        "label": "Locks _Shelly",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ecaba791469be1cf",
        "type": "tab",
        "label": "Shades_Awnings",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c9c5d006fca5358e",
        "type": "tab",
        "label": "Generator_Uni",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e079953f6c87d604",
        "type": "tab",
        "label": "Mobility",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "84f0327e.4d899",
        "type": "tab",
        "label": "Location",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ceeb844e7eb3d728",
        "type": "tab",
        "label": "CAN_Tools",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "a74abebb1981affa",
        "type": "tab",
        "label": "Dev_Tools",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "c1170463.5c7f8",
        "type": "mqtt-broker",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "verifyservercert": true,
        "compatmode": true,
        "keepalive": "15",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "true",
        "birthPayload": "",
        "willTopic": "",
        "willQos": "0",
        "willRetain": "true",
        "willPayload": ""
    },
    {
        "id": "4da57d95.96a5cc",
        "type": "ui_tab",
        "name": "Notifications",
        "icon": "notifications_active",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f6ae28b7.041968",
        "type": "ui_group",
        "name": "Locks",
        "tab": "b4dcab90.f67fb8",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "87ed7eaa.ab8fe",
        "type": "ui_group",
        "name": "Tanks",
        "tab": "2782c237b69f40ca",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "d944623c.5b46b8",
        "type": "ui_group",
        "name": "Memory Master",
        "tab": "5e42e31127484afb",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "f961f048.b0646",
        "type": "ui_group",
        "name": "Software Information",
        "tab": "2b742e36.100002",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "cd05e210.dac658",
        "type": "ui_group",
        "name": "Network Information",
        "tab": "2b742e36.100002",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "b29ba418.731d88",
        "type": "ui_base",
        "theme": {
            "name": "theme-custom",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#169dd3",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "default": "#4B7930",
                "baseColor": "#3d89be",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false,
                "name": "eRVin"
            },
            "themeState": {
                "base-color": {
                    "default": "#3d89be",
                    "value": "#3d89be",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#3d89be",
                    "edited": true
                },
                "page-backgroundColor": {
                    "value": "#e8e8e8",
                    "edited": true
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#75acd3",
                    "edited": true
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#3d89be",
                    "edited": true
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "eRVin",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "dateFormat": "YYYY/MM/DD",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 14,
                "gy": 14,
                "cx": 6,
                "cy": 6,
                "px": 4,
                "py": 6
            },
            "lockMenu": "false",
            "allowTempTheme": "true"
        }
    },
    {
        "id": "5d7e55cd.f34c2c",
        "type": "ui_group",
        "name": "Awnings",
        "tab": "1a09069c.93f929",
        "order": 7,
        "disp": false,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "39ecc94c.7e22c6",
        "type": "ui_group",
        "name": "Welcome",
        "tab": "2b742e36.100002",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "b9bfcd9c.3c935",
        "type": "sqlitedb",
        "db": "/coachproxy/node-red/coachproxy.sqlite"
    },
    {
        "id": "2b742e36.100002",
        "type": "ui_tab",
        "name": "About",
        "icon": "info",
        "order": 10,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "10cd091e.2c38a7",
        "type": "ui_tab",
        "name": "System",
        "icon": "settings",
        "order": 9
    },
    {
        "id": "fb4c3e00.5737a",
        "type": "ui_group",
        "name": "DC Power",
        "tab": "2782c237b69f40ca",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "7f355d52.ee5a24",
        "type": "ui_group",
        "name": "Notification Rules",
        "tab": "4da57d95.96a5cc",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "d0c7f134.375fd",
        "type": "ui_group",
        "name": "Notification Settings",
        "tab": "4da57d95.96a5cc",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "9ed66528.add608",
        "type": "ui_group",
        "name": "Notification Email Address",
        "tab": "4da57d95.96a5cc",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "e4fd4ed4.a377f",
        "type": "ui_group",
        "name": "Copyright",
        "tab": "2b742e36.100002",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "b043acd4.87089",
        "type": "ui_group",
        "name": "Notification SMTP Server",
        "tab": "4da57d95.96a5cc",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "d361ec81.7d08a",
        "type": "ui_group",
        "name": "Switch Panels",
        "tab": "5e42e31127484afb",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "ae3b3824.48abe8",
        "type": "ui_group",
        "name": "Cockpit Shades",
        "tab": "1a09069c.93f929",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "5725fb8d.051db4",
        "type": "ui_group",
        "name": "General Shades",
        "tab": "1a09069c.93f929",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "5a6f1f47.88d1c",
        "type": "ui_group",
        "name": "Living Room Shades",
        "tab": "1a09069c.93f929",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "3806de6b.607142",
        "type": "ui_group",
        "name": "Bedroom Shades",
        "tab": "1a09069c.93f929",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "6fd8f21b.f22b1c",
        "type": "ui_group",
        "name": "Bathroom Shades",
        "tab": "1a09069c.93f929",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "1a09069c.93f929",
        "type": "ui_tab",
        "name": "Shades",
        "icon": "wb_cloudy",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ca514016.47102",
        "type": "ui_group",
        "name": "Info",
        "tab": "2b742e36.100002",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "7ef807d5.1ca3b8",
        "type": "ui_group",
        "name": "Scene Control",
        "tab": "b77c5ec5.c13b5",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "b77c5ec5.c13b5",
        "type": "ui_tab",
        "name": "Scenes",
        "icon": "photo",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "abfd1685.b229d8",
        "type": "ui_group",
        "name": "Lights On Mode",
        "tab": "e5d687a0ded86a17",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "ec9d7f42.8db13",
        "type": "ui_group",
        "name": "Scene Builder",
        "tab": "b77c5ec5.c13b5",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "fe130cc1.4b7f6",
        "type": "ui_group",
        "name": "How to use Scene Builder",
        "tab": "b77c5ec5.c13b5",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "dd035f6c.5d73e",
        "type": "ui_group",
        "name": "Show/Hide Tabs",
        "tab": "e5d687a0ded86a17",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "b4dcab90.f67fb8",
        "type": "ui_tab",
        "name": "Locks",
        "icon": "lock",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "c2caa18b.132cd",
        "type": "ui_group",
        "name": "Show/Hide Groups",
        "tab": "e5d687a0ded86a17",
        "order": 8,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "97b9ad54.9933e",
        "type": "ui_group",
        "name": "System Information",
        "tab": "2b742e36.100002",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "1098dc18.d96274",
        "type": "ui_tab",
        "name": "Location",
        "icon": "location_on",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "4ba9cfc2.1a222",
        "type": "ui_group",
        "name": "Moon Phase",
        "tab": "1098dc18.d96274",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "fc3455d4.45be98",
        "type": "ui_group",
        "name": "GPS Status",
        "tab": "1098dc18.d96274",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "b7dc85ae.2ad0a8",
        "type": "ui_group",
        "name": "Map",
        "tab": "1098dc18.d96274",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "9c7e0074.77f72",
        "type": "ui_group",
        "name": "Install Configuration File",
        "tab": "10cd091e.2c38a7",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "f91d30ee.81533",
        "type": "ui_group",
        "name": "Sofa/Sconce Mode",
        "tab": "e5d687a0ded86a17",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "9ee7e038.56def",
        "type": "ui_group",
        "name": "Manual Lat/Lon",
        "tab": "1098dc18.d96274",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "7706781c.a53ca8",
        "type": "ui_group",
        "name": "Change System Password",
        "tab": "10cd091e.2c38a7",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "e02cbcfc.c48c2",
        "type": "ui_spacer",
        "d": true,
        "name": "spacer",
        "group": "f961f048.b0646",
        "order": 1,
        "width": "1",
        "height": "1"
    },
    {
        "id": "7d76c12c.bccc4",
        "type": "ui_group",
        "name": "Remote Access - Dataplicity",
        "tab": "10cd091e.2c38a7",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "43a9d023.b2434",
        "type": "ui_group",
        "name": "Download Configuration Files",
        "tab": "10cd091e.2c38a7",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "14b5b6dc.5ab249",
        "type": "ui_group",
        "name": "Install Online OS Files",
        "tab": "10cd091e.2c38a7",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "b2855d5b.1215c8",
        "type": "socketcan-config",
        "interface": "can0"
    },
    {
        "id": "3074b4f3eec4795f",
        "type": "ui_group",
        "name": "Tab Info",
        "tab": "1098dc18.d96274",
        "order": 5,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "091e2ea269f7e54b",
        "type": "ui_group",
        "name": "Install Online Tabs",
        "tab": "10cd091e.2c38a7",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "5ede010b7768b05f",
        "type": "ui_group",
        "name": "Copy Tab",
        "tab": "eb583719e2bc22a5",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "eb583719e2bc22a5",
        "type": "ui_tab",
        "name": "Dev Tools",
        "icon": "dashboard",
        "order": 12,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "47889a72bfd18f63",
        "type": "vsh-connection",
        "name": "picchione@symatica.com",
        "port": "8883",
        "accessTokenExpiry": "1713846863277",
        "debug": false,
        "backendUrl": "https://kfd5m4a21f.execute-api.eu-west-1.amazonaws.com/dev",
        "lwaClientId": "amzn1.application-oa2-client.3f1bb07133854b078261ad43f2484c18"
    },
    {
        "id": "e5d687a0ded86a17",
        "type": "ui_tab",
        "name": "Settings",
        "icon": "settings",
        "order": 8,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6b85ba73db24b757",
        "type": "ui_group",
        "name": "Tanks",
        "tab": "e5d687a0ded86a17",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "dcfd3fe834eea6f0",
        "type": "vsh-connection",
        "name": "",
        "port": "8883",
        "accessTokenExpiry": "1713846863277",
        "debug": false,
        "backendUrl": "https://kfd5m4a21f.execute-api.eu-west-1.amazonaws.com/dev",
        "lwaClientId": "amzn1.application-oa2-client.3f1bb07133854b078261ad43f2484c18"
    },
    {
        "id": "fe6fb66758803415",
        "type": "ui_group",
        "name": "Generator",
        "tab": "2782c237b69f40ca",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "6879090dc8625e7e",
        "type": "ui_group",
        "name": "Generator",
        "tab": "e5d687a0ded86a17",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "78b5874c47824c25",
        "type": "ui_group",
        "name": "AC Power",
        "tab": "2782c237b69f40ca",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "2782c237b69f40ca",
        "type": "ui_tab",
        "name": "Status",
        "icon": "visibility",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "da1707935c3ec040",
        "type": "ui_group",
        "name": "Enter Console Command",
        "tab": "10cd091e.2c38a7",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "0d9f75586354dfd5",
        "type": "socketcan-config",
        "interface": "can0"
    },
    {
        "id": "4a91f26187bb67f5",
        "type": "vsh-connection",
        "name": "picchione@symatica.com",
        "port": "8883",
        "accessTokenExpiry": "1713846863277",
        "debug": false,
        "backendUrl": "https://kfd5m4a21f.execute-api.eu-west-1.amazonaws.com/dev",
        "lwaClientId": "amzn1.application-oa2-client.3f1bb07133854b078261ad43f2484c18"
    },
    {
        "id": "f2520bf9936cf711",
        "type": "ui_group",
        "name": "Tab Info",
        "tab": "b4dcab90.f67fb8",
        "order": 2,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "0f05c433069b85f9",
        "type": "ui_group",
        "name": "Detect Lighting Instance",
        "tab": "e5d687a0ded86a17",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "762905e11ef23c4c",
        "type": "ui_group",
        "name": "Exterior",
        "tab": "5e42e31127484afb",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "5e42e31127484afb",
        "type": "ui_tab",
        "name": "Lights",
        "icon": "lightbulb_outline",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "65daa4acefad8e48",
        "type": "ui_group",
        "name": "Mobility",
        "tab": "2782c237b69f40ca",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "0e6539829c0811ba",
        "type": "ui_group",
        "name": "AC Faults",
        "tab": "2782c237b69f40ca",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "ff243d9021e510cb",
        "type": "ui_group",
        "name": "Aquahot",
        "tab": "2782c237b69f40ca",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "4b7f859ed96b7b11",
        "type": "ui_tab",
        "name": "CAN Tools",
        "icon": "dashboard",
        "order": 11,
        "disabled": true,
        "hidden": true
    },
    {
        "id": "484be7bae8eb548a",
        "type": "ui_group",
        "name": "CAN Tools",
        "tab": "4b7f859ed96b7b11",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "f8bc211086686736",
        "type": "ui_group",
        "name": "Tab Info",
        "tab": "5e42e31127484afb",
        "order": 8,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "909ecac6b6d706db",
        "type": "ui_group",
        "name": "Tab Info",
        "tab": "1a09069c.93f929",
        "order": 8,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ae4a73f53fea2131",
        "type": "ui_group",
        "name": "Tab Info",
        "tab": "b77c5ec5.c13b5",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f1f84db4c7188584",
        "type": "ui_group",
        "name": "Shades",
        "tab": "e5d687a0ded86a17",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "ac76b24ed15e9598",
        "type": "ui_group",
        "z": "144c673ecddfa485",
        "name": "Main",
        "tab": "5e42e31127484afb",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "6e02c68320322e1a",
        "type": "ui_group",
        "z": "144c673ecddfa485",
        "name": "Bedroom",
        "tab": "5e42e31127484afb",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "f60d0ea52e0b82e7",
        "type": "ui_group",
        "z": "144c673ecddfa485",
        "name": "Bath",
        "tab": "5e42e31127484afb",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "e404279f57445b75",
        "type": "ui_group",
        "name": "Delete Scenes",
        "tab": "b77c5ec5.c13b5",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "45c2e8b0b46aad5f",
        "type": "fs-ops-copy",
        "z": "a36f0dbff8923248",
        "name": "",
        "sourcePath": "/coachproxy/home/pi/.node-red",
        "sourcePathType": "str",
        "sourceFilename": "flows_coachproxy.json",
        "sourceFilenameType": "str",
        "destPath": "/coachproxy/home/pi/.node-red/flows",
        "destPathType": "str",
        "destFilename": "RVinfo",
        "destFilenameType": "global",
        "link": false,
        "overwrite": true,
        "x": 600,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "74e1b28781308c61",
        "type": "inject",
        "z": "a36f0dbff8923248",
        "name": "Copy This Flow - Deploy First!",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 540,
        "wires": [
            [
                "45c2e8b0b46aad5f"
            ]
        ]
    },
    {
        "id": "cd7d9034b629c2d5",
        "type": "comment",
        "z": "a36f0dbff8923248",
        "name": "Save this flow to the Flows file on the Raspberry Pi",
        "info": "This tool should be run after a Deploy to ensure the flow is written to a file with a descriptive filename at /coachproxy/home/pi/.node-red/flows.\n\nThe Load eRVin Configuration flow above will copy a file with a descriptive filename from /coachproxy/home/pi/.node-red/flows and write it to the node red flows file at /coachproxy/home/pi/.node-red with the filename flows_coachproxy.json. This is the default flow node-red will use when it starts up.\n\nThe Load eRVin Configuration flow also copies the appropriate HAbridge file located at /coachproxy/home/pi/.node-red/flows to the following path /coachproxy/ha-bridge\n\nThe HAbridge file is relatively static for each floorplan so initially it is manually saved to /coachproxy/home/pi/.node-red/flows. The HAbridge filename must be identical to the flows file name but without the version (_v_nnn) and a \".db\" extension. When copied to /coachproxy/ha-bridge the name is changed to device.db ",
        "x": 290,
        "y": 500,
        "wires": []
    },
    {
        "id": "3098141f24539475",
        "type": "ui_text",
        "z": "a36f0dbff8923248",
        "group": "f961f048.b0646",
        "order": 4,
        "width": "0",
        "height": "0",
        "name": "RV Year",
        "label": "RV Year",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 800,
        "y": 160,
        "wires": []
    },
    {
        "id": "66b1a239a63ca133",
        "type": "ui_text",
        "z": "a36f0dbff8923248",
        "group": "f961f048.b0646",
        "order": 6,
        "width": "",
        "height": "",
        "name": "RV Model",
        "label": "RV Model",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 800,
        "y": 240,
        "wires": []
    },
    {
        "id": "b0eafb61e5e81a10",
        "type": "ui_text",
        "z": "a36f0dbff8923248",
        "group": "f961f048.b0646",
        "order": 7,
        "width": "",
        "height": "",
        "name": "RV Floorplan",
        "label": "RV Floorplan",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 810,
        "y": 280,
        "wires": []
    },
    {
        "id": "ac6b1e856cbdb123",
        "type": "ui_text",
        "z": "a36f0dbff8923248",
        "group": "f961f048.b0646",
        "order": 5,
        "width": "0",
        "height": "0",
        "name": "RV Brand",
        "label": "RV Brand",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 800,
        "y": 200,
        "wires": []
    },
    {
        "id": "2b94d068898ec758",
        "type": "ui_text",
        "z": "a36f0dbff8923248",
        "group": "f961f048.b0646",
        "order": 3,
        "width": "",
        "height": "",
        "name": "Flow Version",
        "label": "eRVin Flow Version",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 810,
        "y": 320,
        "wires": []
    },
    {
        "id": "a2cc9794bbd0ae76",
        "type": "mqtt out",
        "z": "a36f0dbff8923248",
        "name": "",
        "topic": "GLOBAL/RVINFO",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 410,
        "y": 300,
        "wires": []
    },
    {
        "id": "8d3ecda34d68e551",
        "type": "inject",
        "z": "a36f0dbff8923248",
        "name": "RIVINFO",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "eRVin",
        "payload": "2013_Entegra_Anthem_DLQ_v_0.663",
        "payloadType": "str",
        "x": 180,
        "y": 240,
        "wires": [
            [
                "c296951922c13674",
                "a2cc9794bbd0ae76",
                "f11af49de042f2e2"
            ]
        ],
        "info": "Enter the RV Info for this flow\nFormat to be 5 parameters as follows with spaces between:\n\nYear Brand Model Floorplan Flow_Version"
    },
    {
        "id": "c296951922c13674",
        "type": "split",
        "z": "a36f0dbff8923248",
        "name": "",
        "splt": "_",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 360,
        "y": 240,
        "wires": [
            [
                "e9816800d4dc21ee"
            ]
        ]
    },
    {
        "id": "e9816800d4dc21ee",
        "type": "switch",
        "z": "a36f0dbff8923248",
        "name": "",
        "property": "parts.index",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "5",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 580,
        "y": 240,
        "wires": [
            [
                "3098141f24539475"
            ],
            [
                "ac6b1e856cbdb123"
            ],
            [
                "66b1a239a63ca133"
            ],
            [
                "b0eafb61e5e81a10"
            ],
            [
                "2b94d068898ec758"
            ]
        ]
    },
    {
        "id": "038c838cd871c01e",
        "type": "comment",
        "z": "a36f0dbff8923248",
        "name": "Enter RV Info Below",
        "info": "Enter the RV Info for this flow\n\nFormat to be 5 parameters as follows with underbar between:\n\nYear_Brand_Model_Floorplan_v_Version",
        "x": 185,
        "y": 176.08349609375,
        "wires": []
    },
    {
        "id": "f11af49de042f2e2",
        "type": "change",
        "z": "a36f0dbff8923248",
        "name": "Set RVinfo",
        "rules": [
            {
                "t": "set",
                "p": "RVinfo",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "b7eed1dd1f130853",
        "type": "exec",
        "z": "291aed48d6167ccb",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Change PW",
        "x": 970,
        "y": 1120,
        "wires": [
            [],
            [
                "be2416c8af2d056d"
            ],
            []
        ]
    },
    {
        "id": "d85214baa9bdee91",
        "type": "inject",
        "z": "291aed48d6167ccb",
        "name": "Clear PW Fields",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.4",
        "topic": "",
        "payload": "{\"opw\":\"\",\"epw\":\"\",\"cpw\":\"\"}",
        "payloadType": "json",
        "x": 240,
        "y": 1160,
        "wires": [
            [
                "268486625c720332"
            ]
        ]
    },
    {
        "id": "268486625c720332",
        "type": "ui_form",
        "z": "291aed48d6167ccb",
        "name": "Change Password",
        "label": "",
        "group": "7706781c.a53ca8",
        "order": 2,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Current Password",
                "value": "opw",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "Enter New Password",
                "value": "epw",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "Confirm New Password",
                "value": "cpw",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "opw": "",
            "epw": "",
            "cpw": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "clear",
        "topic": "",
        "topicType": "str",
        "splitLayout": false,
        "className": "",
        "x": 230,
        "y": 1220,
        "wires": [
            [
                "8723d8c1ca91aa3e"
            ]
        ]
    },
    {
        "id": "8723d8c1ca91aa3e",
        "type": "function",
        "z": "291aed48d6167ccb",
        "name": "PW Match?",
        "func": "\n\nif (msg.payload.epw !== msg.payload.cpw) {\n    msg.status = \"Passwords do not match, try again...\"\n}\nelse {\n    msg.status = \"match\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 1220,
        "wires": [
            [
                "3679c21f1c9786fc"
            ]
        ]
    },
    {
        "id": "3679c21f1c9786fc",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "Match or Error?",
        "property": "status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "match",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Passwords do not match, try again...",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": true,
        "outputs": 2,
        "x": 620,
        "y": 1220,
        "wires": [
            [
                "f1efc1c8a4cfdb63"
            ],
            [
                "aef0d9caf17297b9"
            ]
        ]
    },
    {
        "id": "566cbc9f07a3a31d",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Show Error",
        "x": 970,
        "y": 1220,
        "wires": [
            [
                "b44a8046b400f261"
            ]
        ]
    },
    {
        "id": "b44a8046b400f261",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"opw\":\"\",\"epw\":\"\",\"cpw\":\"\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1220,
        "wires": [
            [
                "268486625c720332"
            ]
        ]
    },
    {
        "id": "aef0d9caf17297b9",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "No Match",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "status",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1220,
        "wires": [
            [
                "566cbc9f07a3a31d"
            ]
        ]
    },
    {
        "id": "dcf81036c1620e84",
        "type": "string",
        "z": "291aed48d6167ccb",
        "name": "Inject PW",
        "methods": [
            {
                "name": "replaceAll",
                "params": [
                    {
                        "type": "str",
                        "value": "opw"
                    },
                    {
                        "type": "msg",
                        "value": "payload.opw"
                    }
                ]
            },
            {
                "name": "replaceAll",
                "params": [
                    {
                        "type": "str",
                        "value": "epw"
                    },
                    {
                        "type": "msg",
                        "value": "payload.epw"
                    }
                ]
            }
        ],
        "prop": "command",
        "propout": "payload",
        "object": "msg",
        "objectout": "msg",
        "x": 960,
        "y": 1180,
        "wires": [
            [
                "b7eed1dd1f130853"
            ]
        ]
    },
    {
        "id": "f1efc1c8a4cfdb63",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "Format Exec",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "echo -e \"opw\\nepw\\nepw\" | passwd pi",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 1180,
        "wires": [
            [
                "dcf81036c1620e84"
            ]
        ]
    },
    {
        "id": "fd5d4a7c0872041c",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Show Success",
        "x": 1320,
        "y": 1020,
        "wires": [
            [
                "b44a8046b400f261"
            ]
        ]
    },
    {
        "id": "be2416c8af2d056d",
        "type": "string",
        "z": "291aed48d6167ccb",
        "name": "Format System Response",
        "methods": [
            {
                "name": "delLeftMost",
                "params": [
                    {
                        "type": "str",
                        "value": "passwd: "
                    }
                ]
            }
        ],
        "prop": "payload",
        "propout": "payload",
        "object": "msg",
        "objectout": "msg",
        "x": 1010,
        "y": 1060,
        "wires": [
            [
                "8223595656c0483b"
            ]
        ]
    },
    {
        "id": "288c2f502860323b",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Change Raspberry Pi System Password v0.62",
        "info": "20250319 v062 Modified password entry to NOT hide password",
        "x": 310,
        "y": 980,
        "wires": []
    },
    {
        "id": "8223595656c0483b",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "Succeed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "password unchanged",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "password updated successfully",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 1000,
        "wires": [
            [
                "1b22bf3bcc0609ef"
            ],
            [
                "fd5d4a7c0872041c"
            ]
        ]
    },
    {
        "id": "d00255accacf31d4",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Show Error",
        "x": 1330,
        "y": 980,
        "wires": [
            [
                "b44a8046b400f261"
            ]
        ]
    },
    {
        "id": "1b22bf3bcc0609ef",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Current password incorrect, try again...",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 980,
        "wires": [
            [
                "d00255accacf31d4"
            ]
        ]
    },
    {
        "id": "bee661fd4132bc1a",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "7706781c.a53ca8",
        "name": "Change Password Instructions",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<!DOCTYPE html>\n<html>\n<body>\n<div>\n    <p>\n    eRVin runs on a Raspberry Pi microcomputer, for best security the Pi password should be changed from the default. If the password has never been changed the Current Password will be \"ervin2020\".\n    </p>\n</div>\n</body>\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 270,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "a8fbc47ecc8b18fe",
        "type": "fs-ops-copy",
        "z": "291aed48d6167ccb",
        "name": "icon64x64.png",
        "sourcePath": "/coachproxy/home/pi/.node-red/icons",
        "sourcePathType": "str",
        "sourceFilename": "ervin_icon64x64.png",
        "sourceFilenameType": "str",
        "destPath": "/coachproxy/home/pi/.node-red/node_modules/node-red-dashboard/dist",
        "destPathType": "str",
        "destFilename": "icon64x64.png",
        "destFilenameType": "str",
        "link": false,
        "overwrite": true,
        "x": 640,
        "y": 2960,
        "wires": [
            []
        ]
    },
    {
        "id": "19cef45a2a208957",
        "type": "fs-ops-copy",
        "z": "291aed48d6167ccb",
        "name": "icon120x120.png",
        "sourcePath": "/coachproxy/home/pi/.node-red/icons",
        "sourcePathType": "str",
        "sourceFilename": "ervin_icon120x120.png",
        "sourceFilenameType": "str",
        "destPath": "/coachproxy/home/pi/.node-red/node_modules/node-red-dashboard/dist",
        "destPathType": "str",
        "destFilename": "icon120x120.png",
        "destFilenameType": "str",
        "link": false,
        "overwrite": true,
        "x": 650,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "71410bfc6f214076",
        "type": "fs-ops-copy",
        "z": "291aed48d6167ccb",
        "name": "icon192x192.png",
        "sourcePath": "/coachproxy/home/pi/.node-red/icons",
        "sourcePathType": "str",
        "sourceFilename": "ervin_icon192x192.png",
        "sourceFilenameType": "str",
        "destPath": "/coachproxy/home/pi/.node-red/node_modules/node-red-dashboard/dist",
        "destPathType": "str",
        "destFilename": "icon192x192.png",
        "destFilenameType": "str",
        "link": false,
        "overwrite": true,
        "x": 650,
        "y": 3040,
        "wires": [
            []
        ]
    },
    {
        "id": "72b017fb6759a21a",
        "type": "fs-ops-copy",
        "z": "291aed48d6167ccb",
        "name": "icon407x407.png",
        "sourcePath": "/coachproxy/home/pi/.node-red/icons",
        "sourcePathType": "str",
        "sourceFilename": "ervin_icon407x407.png",
        "sourceFilenameType": "str",
        "destPath": "/coachproxy/home/pi/.node-red/node_modules/node-red-dashboard/dist",
        "destPathType": "str",
        "destFilename": "icon407x407.png",
        "destFilenameType": "str",
        "link": false,
        "overwrite": true,
        "x": 650,
        "y": 3080,
        "wires": [
            []
        ]
    },
    {
        "id": "5cb74034c36dbb12",
        "type": "fs-ops-copy",
        "z": "291aed48d6167ccb",
        "name": "ervin_logo.jpg",
        "sourcePath": "/coachproxy/home/pi/.node-red/icons",
        "sourcePathType": "str",
        "sourceFilename": "ervin_logo.jpg",
        "sourceFilenameType": "str",
        "destPath": "/coachproxy/home/pi/.node-red/node_modules/node-red-dashboard/dist",
        "destPathType": "str",
        "destFilename": "ervin_logo.jpg",
        "destFilenameType": "str",
        "link": false,
        "overwrite": true,
        "x": 640,
        "y": 3120,
        "wires": [
            []
        ]
    },
    {
        "id": "ad11c8fcbf5391cd",
        "type": "inject",
        "z": "291aed48d6167ccb",
        "name": "Update Favicons after Dashboard Update",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 2960,
        "wires": [
            [
                "5cb74034c36dbb12",
                "a8fbc47ecc8b18fe",
                "19cef45a2a208957",
                "71410bfc6f214076",
                "72b017fb6759a21a"
            ]
        ]
    },
    {
        "id": "568b70ce2eebf390",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Update Favicons after Dashboard Update",
        "info": "When the Dashboard contrib in Node-Red is updated it overwrites the following directory: /coachproxy/home/pi/.node-red/node_modules/node-red-dashboard/dist\n\nThis reverts the favicon icons to default amd also deletes the large eRVin logo.\n\nThis small flow simply copies backup ervin favicons and logo loacated at /coachproxy/home/pi/.node-red/icons\nto /coachproxy/home/pi/.node-red/node_modules/node-red-dashboard/dist\n\nFor a more permanent solution see this link.\n\nhttps://gist.github.com/mohnen/6923d5eb2e4547bb7e5bd90546d2ee80",
        "x": 310,
        "y": 2900,
        "wires": []
    },
    {
        "id": "2c29ef6c7a917a04",
        "type": "exec",
        "z": "291aed48d6167ccb",
        "command": "sudo /coachproxy/configurator/remove_dataplicity.sh",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Remove Dataplicity",
        "x": 750,
        "y": 2580,
        "wires": [
            [],
            [],
            [
                "86e244e145dea4dc"
            ]
        ]
    },
    {
        "id": "1f5a88b196558f56",
        "type": "ui_button",
        "z": "291aed48d6167ccb",
        "name": "",
        "group": "7d76c12c.bccc4",
        "order": 3,
        "width": "0",
        "height": "0",
        "passthru": false,
        "label": "Remove Dataplicity",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Do you really want to remove Dataplicity?",
        "payloadType": "str",
        "topic": "Are you sure?",
        "x": 250,
        "y": 2580,
        "wires": [
            [
                "3c5a003e6519a0ef"
            ]
        ]
    },
    {
        "id": "3c5a003e6519a0ef",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "topic": "",
        "name": "r u sure?",
        "x": 420,
        "y": 2580,
        "wires": [
            [
                "84181e669e1215a4"
            ]
        ]
    },
    {
        "id": "acbc3b26a50fc385",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "7d76c12c.bccc4",
        "name": "Dataplicity",
        "order": 1,
        "width": "6",
        "height": "3",
        "format": "<!DOCTYPE html>\n<html>\n<body\n<div layout=\"column\" layout-align=\"space-between\">\n<p>\nDataplicity provides remote access to eRVin from anywhere there is internet access. To install Dataplicity, please follow these \n<a target='_blank' href='https://myervin.com/how-to-install-dataplicity-for-remote-access-to-ervin'>instructions.</a>\n</p>\n<p>\nIf you need to reset your Dataplicity link or want to remove Dataplicity, click the Remove Dataplicity button below:\n</p>\n</div>\n</body>\n</html>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 230,
        "y": 2540,
        "wires": [
            []
        ]
    },
    {
        "id": "593155cbc1b94ad7",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Dataplicity Installation and Removal v0.60",
        "info": "",
        "x": 320,
        "y": 2480,
        "wires": []
    },
    {
        "id": "071fe4c4d458622a",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Removed",
        "x": 1120,
        "y": 2580,
        "wires": [
            []
        ]
    },
    {
        "id": "86e244e145dea4dc",
        "type": "function",
        "z": "291aed48d6167ccb",
        "name": "",
        "func": "msg.topic = \"\"\n//code = msg.payload.code\n\nif (msg.payload.code !== 0) {\n    msg.topic = 'Error #'\n    msg.payload = msg.payload.code\n} else {\n    msg.payload = \"Dataplicity Sucessfully Removed\"\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 960,
        "y": 2580,
        "wires": [
            [
                "071fe4c4d458622a"
            ]
        ]
    },
    {
        "id": "84181e669e1215a4",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Cancel",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 570,
        "y": 2580,
        "wires": [
            [
                "2c29ef6c7a917a04"
            ],
            []
        ]
    },
    {
        "id": "9d793bc81f401d67",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Install System OS File v0.64",
        "info": "0.64 adds support for automatically making a file\nexcecutable. This is manually done by the admin\nin /ervin_files/file=path.js when the file is \nadded to the /ervin_files directory. \n\n{\"title\": \"window_shade_entegra.pl\", \"description\":\"/coachproxy/rv-c\", \"exec\":\"true\"}\n{\"title\": \"decode_dc_dimmer_light_ervin.js\", \"description\":\"/coachproxy/home/pi/.node-red/js\", \"exec\":\"false\"}\n\ntitle = filename\ndescription = path the filename should be copied to\nexec = if \"true\" make file excecutable after copy, if \"false\" don't",
        "x": 260,
        "y": 1960,
        "wires": []
    },
    {
        "id": "1564e9063773dccd",
        "type": "http request",
        "z": "291aed48d6167ccb",
        "name": "get filenames",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://files.myervin.com/file-path.json",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 560,
        "y": 2020,
        "wires": [
            [
                "efa0c45a78de0cb8"
            ]
        ]
    },
    {
        "id": "67e71b0553aa0193",
        "type": "ui_list",
        "z": "291aed48d6167ccb",
        "group": "14b5b6dc.5ab249",
        "name": "List OS Files",
        "order": 3,
        "width": "6",
        "height": "4",
        "lineType": "one",
        "actionType": "check",
        "allowHTML": false,
        "outputs": 1,
        "topic": "",
        "x": 530,
        "y": 2100,
        "wires": [
            [
                "f4564fa60ab62b85"
            ]
        ]
    },
    {
        "id": "b717ac7c86ebfdd2",
        "type": "exec",
        "z": "291aed48d6167ccb",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "30",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 830,
        "y": 2240,
        "wires": [
            [],
            [],
            [
                "8c20d33d28ca3ca9"
            ]
        ]
    },
    {
        "id": "ec437932d384bdc6",
        "type": "function",
        "z": "291aed48d6167ccb",
        "name": "Format WGET",
        "func": "// Copyright 20201 Rob Picchione\n// Formats wget for exec node to download the user selected file\n// Also tests if file needs to be made execuatable and does that (chmod +x) if true\n// File download is manually mapped in the ftp path: /ervin_files/file-path.json\n// title = filename, description = path, exec = make executable? true or false\n\nif (msg.payload.isChecked === false ) {\n    return null\n}\n\nvar exec = msg.payload.exec\nvar osfiles\n\nif (exec === \"false\") {\n    // don't make file excecutable\n    osfiles = \"wget \" + \"https://files.myervin.com/\" + msg.payload.title + \" -P \" + msg.payload.description\n} else if (exec === \"true\") {\n    // make file executable\n    osfiles = \"wget \" + \"https://files.myervin.com/\" + msg.payload.title + \" -P \" + msg.payload.description + \"\\n\" + \"sudo chmod +x \" + msg.payload.description + \"/\" + msg.payload.title\n}\n\n//habridgefiles = \"wget \" + \"https://habridge.myervin.com/\" + msg.payload.habridge +'.db' + \" -P \" + \"/coachproxy/home/pi/.node-red/flows\"\nvar msg2 = { 'enabled': false };\n//if (global.get('overwrite_habridge') == true) {\n//    var msg2 = { 'payload': habridgefiles};\n//}\nvar msg1 = { 'payload': osfiles};\n\nreturn [ msg1, msg2 ];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 2200,
        "wires": [
            [
                "b717ac7c86ebfdd2",
                "1dc34e2d1b11c1c7"
            ],
            [
                "67e71b0553aa0193"
            ]
        ]
    },
    {
        "id": "f359507a96ae54d5",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Successful",
        "x": 490,
        "y": 2300,
        "wires": []
    },
    {
        "id": "ac8afc3d6b0c5a25",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload.code",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "true",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload.code",
                "pt": "msg",
                "to": "enabled",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "File Sucessfully Downloaded and Installled - Restarting eRVin may be necessary.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 2320,
        "wires": [
            [
                "67e71b0553aa0193",
                "9d1a8ef4a0ba18cf",
                "f359507a96ae54d5"
            ]
        ]
    },
    {
        "id": "9d1a8ef4a0ba18cf",
        "type": "ui_button",
        "z": "291aed48d6167ccb",
        "name": "",
        "group": "14b5b6dc.5ab249",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "List Online OS Files",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 300,
        "y": 2020,
        "wires": [
            [
                "1564e9063773dccd"
            ]
        ]
    },
    {
        "id": "8c20d33d28ca3ca9",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "error?",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 2240,
        "wires": [
            [
                "ac8afc3d6b0c5a25"
            ],
            [
                "979a9e07925faeb4"
            ]
        ]
    },
    {
        "id": "5202bfdd00b75ed5",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Error",
        "x": 1350,
        "y": 2240,
        "wires": [
            [
                "d1544ac8bec0f458"
            ]
        ]
    },
    {
        "id": "979a9e07925faeb4",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.message",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Error: ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 2240,
        "wires": [
            [
                "5202bfdd00b75ed5"
            ]
        ]
    },
    {
        "id": "f4564fa60ab62b85",
        "type": "fs-ops-access",
        "z": "291aed48d6167ccb",
        "name": "file exists?",
        "path": "payload.description",
        "pathType": "msg",
        "filename": "payload.title",
        "filenameType": "msg",
        "read": true,
        "write": false,
        "throwerror": false,
        "x": 710,
        "y": 2100,
        "wires": [
            [
                "4e45f7e7839d79f6"
            ],
            [
                "ec437932d384bdc6"
            ]
        ]
    },
    {
        "id": "4e45f7e7839d79f6",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payloadtoo",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "The configuration file selected already exists on eRVin, are you sure you want to overwrite it?",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 2100,
        "wires": [
            [
                "2bb791d9ffb39d2b"
            ]
        ]
    },
    {
        "id": "cd88da1174572ced",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "14b5b6dc.5ab249",
        "name": "Install OS Files",
        "order": 1,
        "width": "6",
        "height": "6",
        "format": "\n<div layout=\"column\" layout-align=\"space-between\">\n<p>\n- This feature will allow you to download and automatically install new and/or updated operating system (OS) files from the eRVin server online. OS files differ from configuration files in that they replace core system files. This is not normally necessary, but sometimes an OS file needs an adjustement and it is much quicker than flashing a new image.\n<br>- <b>Do not use this feature unless you have been instructed to do so and know exactly what file you need.</b>\n<br>- To use, simply click the checkbox of the file you need. If the file already exists you will be prompted to confirm its replacement.\n<br>- This feature requires that eRVin have an internet connection. \n</p>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 320,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "1dc34e2d1b11c1c7",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "top right",
        "displayTime": "4",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "File Download in Progress",
        "name": "Downloading",
        "x": 850,
        "y": 2180,
        "wires": []
    },
    {
        "id": "2bb791d9ffb39d2b",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Overwrite",
        "cancel": "Cancel",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1110,
        "y": 2100,
        "wires": [
            [
                "0350b406f2758275"
            ]
        ]
    },
    {
        "id": "0350b406f2758275",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Overwrite",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Cancel",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1270,
        "y": 2100,
        "wires": [
            [
                "0dca8c0f89e6673b"
            ],
            [
                "9d1a8ef4a0ba18cf"
            ]
        ]
    },
    {
        "id": "0dca8c0f89e6673b",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payloadtoo",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 2100,
        "wires": [
            [
                "d10c5ee93436a8de"
            ]
        ]
    },
    {
        "id": "d10c5ee93436a8de",
        "type": "fs-ops-delete",
        "z": "291aed48d6167ccb",
        "name": "del OS file",
        "path": "payload.description",
        "pathType": "msg",
        "filename": "payload.title",
        "filenameType": "msg",
        "x": 1690,
        "y": 2100,
        "wires": [
            [
                "ec437932d384bdc6"
            ]
        ]
    },
    {
        "id": "efa0c45a78de0cb8",
        "type": "json",
        "z": "291aed48d6167ccb",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 730,
        "y": 2020,
        "wires": [
            [
                "67e71b0553aa0193"
            ]
        ]
    },
    {
        "id": "d1544ac8bec0f458",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 2380,
        "wires": [
            [
                "67e71b0553aa0193"
            ]
        ]
    },
    {
        "id": "03d0acb1fc07fd2e",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Install eRVin Configuration File No HaBridge v0.66",
        "info": "This flow will copy a file with a descriptive filename from \n/coachproxy/home/pi/.node-red/flows write it to the node red flows \nfile at /coachproxy/home/pi/.node-red with the filename flows_coachproxy.json. \nThis is the default flow node-red will use when it starts up.\n\n20250316 v0.66 \n- Added reload button to manually refresh list in case directory names\nhave changed. \n",
        "x": 330,
        "y": 540,
        "wires": []
    },
    {
        "id": "4495e2b2664cab8c",
        "type": "inject",
        "z": "291aed48d6167ccb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 600,
        "wires": [
            [
                "60d24ccdb5df8ac5"
            ]
        ]
    },
    {
        "id": "60d24ccdb5df8ac5",
        "type": "fs-ops-dir",
        "z": "291aed48d6167ccb",
        "name": "",
        "path": "/coachproxy/home/pi/.node-red/flows/",
        "pathType": "str",
        "filter": "v",
        "filterType": "str",
        "dir": "options",
        "dirType": "msg",
        "x": 540,
        "y": 640,
        "wires": [
            [
                "f36d9d2685c533dd"
            ]
        ]
    },
    {
        "id": "a05ae62dfec138ac",
        "type": "fs-ops-copy",
        "z": "291aed48d6167ccb",
        "name": "Write Flow File",
        "sourcePath": "/coachproxy/home/pi/.node-red/flows",
        "sourcePathType": "str",
        "sourceFilename": "payload",
        "sourceFilenameType": "msg",
        "destPath": "/coachproxy/home/pi/.node-red",
        "destPathType": "str",
        "destFilename": "flows_coachproxy.json",
        "destFilenameType": "str",
        "link": false,
        "overwrite": true,
        "x": 1140,
        "y": 760,
        "wires": [
            [
                "7147d77fcad28dfb"
            ]
        ]
    },
    {
        "id": "f36d9d2685c533dd",
        "type": "ui_dropdown",
        "z": "291aed48d6167ccb",
        "name": "Select RV Flow File",
        "label": "",
        "tooltip": "",
        "place": "Select RV Model",
        "group": "9c7e0074.77f72",
        "order": 2,
        "width": "0",
        "height": "0",
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "topicType": "str",
        "className": "",
        "x": 750,
        "y": 640,
        "wires": [
            [
                "177a0569d2c5e8de"
            ]
        ]
    },
    {
        "id": "177a0569d2c5e8de",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "Set Global",
        "rules": [
            {
                "t": "set",
                "p": "RVflow",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "b44c88e55ce6e380",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "9c7e0074.77f72",
        "name": "Install Configuration Instructions",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<!DOCTYPE html>\n<html>\n<body\n<div>\n    <p>\n    To reconfigure eRVin for your RV, please select your RV model from the dropdown list below, then click the INSTALL CONFIGURATION button below.\n    </p>\n</div>\n</body>\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 270,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "da501e29f7239ad2",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Restart",
        "cancel": "Cancel",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 550,
        "y": 760,
        "wires": [
            [
                "0c8f2ac0653878ca"
            ]
        ]
    },
    {
        "id": "a391433e0d07bc0f",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "Get Flow Name",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "Restart",
                "fromt": "str",
                "to": "RVflow",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 760,
        "wires": [
            [
                "a05ae62dfec138ac",
                "fc75499f8f348470",
                "2417d9666254ddb2"
            ]
        ]
    },
    {
        "id": "0c8f2ac0653878ca",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Restart",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Cancel",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 710,
        "y": 760,
        "wires": [
            [
                "a391433e0d07bc0f"
            ],
            [
                "60d24ccdb5df8ac5"
            ]
        ]
    },
    {
        "id": "7147d77fcad28dfb",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "Reset",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 760,
        "wires": [
            [
                "60d24ccdb5df8ac5"
            ]
        ]
    },
    {
        "id": "4939892a7c9f5645",
        "type": "link out",
        "z": "291aed48d6167ccb",
        "name": "Install Config File Reboot",
        "mode": "link",
        "links": [
            "8fe604ae2157c132"
        ],
        "x": 1275,
        "y": 840,
        "wires": []
    },
    {
        "id": "2417d9666254ddb2",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Restarting eRVin now - Please allow a few minutes for the new configuration to load...",
        "name": "Restart eRVin",
        "x": 1140,
        "y": 800,
        "wires": []
    },
    {
        "id": "fc75499f8f348470",
        "type": "delay",
        "z": "291aed48d6167ccb",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1120,
        "y": 840,
        "wires": [
            [
                "4939892a7c9f5645"
            ]
        ]
    },
    {
        "id": "04d7683011240a34",
        "type": "ui_button",
        "z": "291aed48d6167ccb",
        "name": "",
        "group": "9c7e0074.77f72",
        "order": 4,
        "width": "5",
        "height": "1",
        "passthru": false,
        "label": "Install Configuration",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Are you sure you want to replace the configuration file? This will reset your settings to default and restart eRVin. Please allow up to 5 minutes for the new configuration to load.",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 240,
        "y": 760,
        "wires": [
            [
                "da501e29f7239ad2"
            ]
        ]
    },
    {
        "id": "82b12a2059d8eb48",
        "type": "link in",
        "z": "291aed48d6167ccb",
        "name": "Refresh File List",
        "links": [
            "a2637dd4.1984e",
            "c987f53069926a8c",
            "bd55afb20c6be13f"
        ],
        "x": 155,
        "y": 640,
        "wires": [
            [
                "60d24ccdb5df8ac5"
            ]
        ]
    },
    {
        "id": "2eaec0c1f73b606e",
        "type": "catch",
        "z": "291aed48d6167ccb",
        "name": "Error",
        "scope": [
            "a05ae62dfec138ac",
            "a391433e0d07bc0f",
            "60d24ccdb5df8ac5",
            "177a0569d2c5e8de",
            "7147d77fcad28dfb"
        ],
        "uncaught": false,
        "x": 190,
        "y": 820,
        "wires": [
            [
                "a6358ec3de91a149"
            ]
        ]
    },
    {
        "id": "7403eac69ef7d3be",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Error",
        "name": "Error",
        "x": 890,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "a6358ec3de91a149",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "error.message",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 820,
        "wires": [
            [
                "7403eac69ef7d3be"
            ]
        ]
    },
    {
        "id": "c5cfa6ce81630114",
        "type": "exec",
        "z": "291aed48d6167ccb",
        "command": "",
        "addpay": "payload.cmd",
        "append": "",
        "useSpawn": "false",
        "timer": "10",
        "winHide": false,
        "oldrc": false,
        "name": "Enter Command",
        "x": 520,
        "y": 2700,
        "wires": [
            [
                "27e18f1d9908e912",
                "bf8f211e38f53138"
            ],
            [
                "4932fa9458890565"
            ],
            []
        ]
    },
    {
        "id": "3b1e9d0f846bf0f6",
        "type": "ui_form",
        "z": "291aed48d6167ccb",
        "name": "Enter Console Commands",
        "label": "",
        "group": "da1707935c3ec040",
        "order": 2,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Enter Command",
                "value": "cmd",
                "type": "text",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "cmd": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "clear",
        "topic": "",
        "topicType": "str",
        "splitLayout": false,
        "className": "",
        "x": 280,
        "y": 2700,
        "wires": [
            [
                "c5cfa6ce81630114"
            ]
        ]
    },
    {
        "id": "61b2456d28960f04",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Show Error",
        "x": 970,
        "y": 2740,
        "wires": [
            []
        ]
    },
    {
        "id": "4932fa9458890565",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "rc.message",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 2740,
        "wires": [
            [
                "61b2456d28960f04"
            ]
        ]
    },
    {
        "id": "27e18f1d9908e912",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Show Results",
        "x": 740,
        "y": 2660,
        "wires": [
            []
        ]
    },
    {
        "id": "08b13d90cdba2842",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Enter Console Commands v0.65",
        "info": "",
        "x": 290,
        "y": 2660,
        "wires": []
    },
    {
        "id": "1f8b4cd5625946ca",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "bottom left",
        "displayTime": "3",
        "highlight": "RED",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Error Status",
        "x": 970,
        "y": 2700,
        "wires": []
    },
    {
        "id": "bf8f211e38f53138",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "rc.code",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Comand completed without errors.",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "rc.code",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 2700,
        "wires": [
            [
                "1f8b4cd5625946ca"
            ]
        ]
    },
    {
        "id": "104c86e22b0d05ec",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "da1707935c3ec040",
        "name": "Emter Command Instructions",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<div>\n    <p>\n    <br>Sometimes it is necessary to send commands via the Raspberry Pi console. For example, to make a downloaded file such as \"generator_entegra.pl\" excecutable, the following command would be used: sudo \"chmod +x /coachproxy/rv-c/generator_entegra.pl\" Normally this will not be required, do not type commands unless you know what you are doing, or have been instructed to do so.\n    </p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 280,
        "y": 2740,
        "wires": [
            []
        ]
    },
    {
        "id": "c856e3c7f54854ce",
        "type": "mqtt in",
        "z": "291aed48d6167ccb",
        "name": "",
        "topic": "GLOBAL/SN",
        "qos": "0",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 210,
        "y": 420,
        "wires": [
            [
                "d9adc6419739cc27"
            ]
        ]
    },
    {
        "id": "d9adc6419739cc27",
        "type": "ui_text",
        "z": "291aed48d6167ccb",
        "group": "97b9ad54.9933e",
        "order": 4,
        "width": "",
        "height": "",
        "name": "Serial Number",
        "label": "Serial Number",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 440,
        "y": 420,
        "wires": []
    },
    {
        "id": "4d03bbf239dcdd96",
        "type": "ui_text",
        "z": "291aed48d6167ccb",
        "group": "f961f048.b0646",
        "order": 1,
        "width": "",
        "height": "",
        "name": "eRVin OS Version",
        "label": "eRVin OS Version",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 910,
        "y": 480,
        "wires": []
    },
    {
        "id": "aa899e8b72b04638",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "DIsplay Serial Number and Version",
        "info": "",
        "x": 280,
        "y": 380,
        "wires": []
    },
    {
        "id": "f0d1d19705113e63",
        "type": "mqtt in",
        "z": "291aed48d6167ccb",
        "name": "",
        "topic": "GLOBAL/VER",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 210,
        "y": 460,
        "wires": [
            [
                "b0e0ea6fd804f468"
            ]
        ]
    },
    {
        "id": "b0e0ea6fd804f468",
        "type": "split",
        "z": "291aed48d6167ccb",
        "name": "split version",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 430,
        "y": 460,
        "wires": [
            [
                "4d09afb2174192fc"
            ]
        ]
    },
    {
        "id": "4d09afb2174192fc",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "Switch Versions",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "CoachProxy",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "eRVin",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 660,
        "y": 460,
        "wires": [
            [
                "330e69c01b4d1a66"
            ],
            [
                "4d03bbf239dcdd96"
            ]
        ]
    },
    {
        "id": "330e69c01b4d1a66",
        "type": "ui_text",
        "z": "291aed48d6167ccb",
        "d": true,
        "group": "f961f048.b0646",
        "order": 2,
        "width": "",
        "height": "",
        "name": "CoachProxy Version",
        "label": "CoachProxy Version",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 920,
        "y": 440,
        "wires": []
    },
    {
        "id": "2342874049ad6788",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "39ecc94c.7e22c6",
        "name": "eRVin Logo",
        "order": 1,
        "width": "6",
        "height": "6",
        "format": "<img src=\"ervin_logo.jpg\">",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 230,
        "y": 3040,
        "wires": [
            []
        ]
    },
    {
        "id": "f5248d749dc48372",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "e4fd4ed4.a377f",
        "name": "Copyright",
        "order": 3,
        "width": "0",
        "height": "0",
        "format": "<div layout='column' layout-align='space-between'>\n  <p>eRVin \u00c2\u00a9 2020</p>\n  <p>CoachProxyOS \u00c2\u00a9 2019</p>\n  <p>CoachProxyOS/eRVin comes with ABSOLUTELY NO WARRANTY.\n  This is free software, and you are welcome to redistribute it\n  under certain conditions.</p>\n  <p>See <a href=\"https://www.gnu.org/licenses/gpl-3.0.html\">https://www.gnu.org/licenses/gpl-3.0.html</a>\n  for complete details.</p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 220,
        "y": 3120,
        "wires": [
            []
        ]
    },
    {
        "id": "a3aa496ad9253824",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "39ecc94c.7e22c6",
        "name": "eRVin Welcome Message",
        "order": 2,
        "width": "0",
        "height": "0",
        "format": "<div style=\"height: 130px;\">\n<p>\n    <b>Welcome to eRVin!</b>\n</p>\n<p style=\"font-size:90%;\"> \n    <b>E</b>nhancing <b>RV</b> <b>I</b>ntegrated <b>N</b>etworks\n</p>\n<br>\n<p>\n    Email: <a href=\"mailto: info@myervin.com\">info@myervin.com</a>\n</p>\n    <p style=\"font-size:100%;\">Web: <a href=\"http://myervin.com\">http://myervin.com</a></p>\n</div>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 270,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "92547da20d3e39b8",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "ca514016.47102",
        "name": "About",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div style=\"height: 130px;\">\n<p>\n    eRVin is based on CoachProxy (for Tiffin products), but modified here for other RV models. The goal of eRVin is to expand beyond basic control and integrate enhanced automation capabilities. It is a work in progress and needs input from other automation enthusiasts. \n</p>\n<br>\n<p> Many thanks to the hard work of the CoachProxy developers who have made their product open source and free to the world.\n</p>\n</div>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 210,
        "y": 3080,
        "wires": [
            []
        ]
    },
    {
        "id": "a214e2272797c5d9",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "d": true,
        "group": "e4fd4ed4.a377f",
        "name": "Copyright",
        "order": 3,
        "width": "0",
        "height": "0",
        "format": "<div layout='column' layout-align='space-between'>\n  <p>eRVin \u00c2\u00a9 2020</p>\n  <p>CoachProxyOS \u00c2\u00a9 2019</p>\n  <p>CoachProxyOS/eRVin comes with ABSOLUTELY NO WARRANTY.\n  This is free software, and you are welcome to redistribute it\n  under certain conditions.</p>\n  <p>See <a href=\"https://www.gnu.org/licenses/gpl-3.0.html\">https://www.gnu.org/licenses/gpl-3.0.html</a>\n  for complete details.</p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 880,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "bdb323f81685d227",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Save this flow to the Flows file on the Raspberry Pi",
        "info": "This tool should be run after a Deploy to ensure \nthe flow is written to a file with a descriptive \nfilename at /coachproxy/home/pi/.node-red/flows.\n\nThe Load eRVin Configuration flow above will copy \na file with a descriptive filename from \n/coachproxy/home/pi/.node-red/flows and write it \nto the node red flows file at \n/coachproxy/home/pi/.node-red with the filename \nflows_coachproxy.json. This is the default flow \nnode-red will use when it starts up.\n\nThe Load eRVin Configuration flow also copies the \nappropriate HAbridge file located at \n/coachproxy/home/pi/.node-red/flows to the following \npath /coachproxy/ha-bridge",
        "x": 330,
        "y": 260,
        "wires": []
    },
    {
        "id": "3f647eda4024bdce",
        "type": "fs-ops-copy",
        "z": "291aed48d6167ccb",
        "name": "",
        "sourcePath": "/coachproxy/home/pi/.node-red",
        "sourcePathType": "str",
        "sourceFilename": "flows_coachproxy.json",
        "sourceFilenameType": "str",
        "destPath": "/coachproxy/home/pi/.node-red/flows",
        "destPathType": "str",
        "destFilename": "RVinfo",
        "destFilenameType": "global",
        "link": false,
        "overwrite": true,
        "x": 520,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "b2a5a3bd2d093a85",
        "type": "inject",
        "z": "291aed48d6167ccb",
        "name": "Save This Flow - Deploy First!",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 300,
        "wires": [
            [
                "3f647eda4024bdce"
            ]
        ]
    },
    {
        "id": "209e2956a9b487c9",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "This flow is for...<open me>",
        "info": "To check the flow version look at the 'RVinfo' value in global context",
        "x": 260,
        "y": 220,
        "wires": []
    },
    {
        "id": "63d6e70b3cf97cbf",
        "type": "inject",
        "z": "291aed48d6167ccb",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Configuration",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.663",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 250,
        "y": 140,
        "wires": [
            [
                "94eb11af34d07afc"
            ]
        ]
    },
    {
        "id": "4d0a97d415951b50",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 210,
        "y": 100,
        "wires": []
    },
    {
        "id": "94eb11af34d07afc",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "965e7178faf8e4ab",
        "type": "ui_button",
        "z": "291aed48d6167ccb",
        "name": "Reload List",
        "group": "9c7e0074.77f72",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#8D4040",
        "className": "",
        "icon": "replay",
        "payload": "cancel",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 210,
        "y": 680,
        "wires": [
            [
                "60d24ccdb5df8ac5"
            ]
        ]
    },
    {
        "id": "6f0154673c189e80",
        "type": "comment",
        "z": "291aed48d6167ccb",
        "name": "Get updated config (flow) files from flows.myervin.com - No HaBridge v0.66",
        "info": "This flow accesses the ervin server at flows.myervin.com to \ndownload updated or new flows to /coachproxy/home/pi/.node-red/flows.\n\nIf a flow file of the exact same name and version is already installed \non the ervin raspberry pi at /coachproxy/home/pi/.node-red/flows, \na confirmation dialog is presented to confirm overwrite. \nIf yes, the existing flow file in the above folder are deleted first \n(because wget does not overwrite existing files but instead creates a \nnew one with a modified name).\n\nv061 added \"Clear List\" change node to clear list of configurations before excecution\nv061 added \"var\" prefix to habridgefiles and flowfiles variables\n\n20250316 v066 \n- *completely* removed HA Bridge references!\n- added sorting by filename\n- simplified file download to be an array instead of line by line\n",
        "x": 400,
        "y": 1380,
        "wires": []
    },
    {
        "id": "1461a80bc8da938f",
        "type": "ui_list",
        "z": "291aed48d6167ccb",
        "group": "43a9d023.b2434",
        "name": "list",
        "order": 3,
        "width": "6",
        "height": "4",
        "lineType": "one",
        "actionType": "check",
        "allowHTML": false,
        "outputs": 1,
        "topic": "",
        "x": 790,
        "y": 1500,
        "wires": [
            [
                "9e3f14a0803ecf63"
            ]
        ]
    },
    {
        "id": "1be3c0d4016d3eb3",
        "type": "exec",
        "z": "291aed48d6167ccb",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 910,
        "y": 1760,
        "wires": [
            [],
            [],
            [
                "2352f6d1edd2e199"
            ]
        ]
    },
    {
        "id": "7722879507c71a6f",
        "type": "function",
        "z": "291aed48d6167ccb",
        "name": "",
        "func": "// Copyright 2021 Rob Picchione\n// Formats wget for exec node to download selected file\n\nif (msg.payload.isChecked === false ) {\n    return null\n}\n\n\nvar flowfiles = \"wget \" + \"https://flows.myervin.com/\" + msg.payload.title + \" -P \" + \"/coachproxy/home/pi/.node-red/flows\"\n//var habridgefiles = \"wget \" + \"https://habridge.myervin.com/\" + msg.payload.habridge +'.db' + \" -P \" + \"/coachproxy/home/pi/.node-red/flows\"\nvar msg2 = { 'enabled': false };\n//var msg2 = { 'payload': habridgefiles};\nvar msg1 = { 'payload': flowfiles};\n\nreturn [ msg1, msg2 ];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1700,
        "wires": [
            [
                "1be3c0d4016d3eb3",
                "aefd7364be7404e7"
            ],
            [
                "1461a80bc8da938f"
            ]
        ]
    },
    {
        "id": "e81fceb3434d462f",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Successful",
        "x": 590,
        "y": 1880,
        "wires": []
    },
    {
        "id": "5c88e3e827437847",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload.code",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "true",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload.code",
                "pt": "msg",
                "to": "enabled",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "File Sucessfully Downloaded",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1840,
        "wires": [
            [
                "1461a80bc8da938f",
                "fc9c4e369356c13e",
                "e81fceb3434d462f",
                "bd55afb20c6be13f"
            ]
        ]
    },
    {
        "id": "fc9c4e369356c13e",
        "type": "ui_button",
        "z": "291aed48d6167ccb",
        "name": "",
        "group": "43a9d023.b2434",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "List Online Config Files",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 290,
        "y": 1440,
        "wires": [
            [
                "30e605bc284ca314",
                "609cd624612eb594"
            ]
        ]
    },
    {
        "id": "2352f6d1edd2e199",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "error?",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1050,
        "y": 1780,
        "wires": [
            [
                "5c88e3e827437847"
            ],
            [
                "dac2f96fc6b6f3db"
            ]
        ]
    },
    {
        "id": "e14222a5df3639cf",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "Error",
        "x": 1430,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "dac2f96fc6b6f3db",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.code",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Error #",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 1780,
        "wires": [
            [
                "e14222a5df3639cf"
            ]
        ]
    },
    {
        "id": "9e3f14a0803ecf63",
        "type": "fs-ops-access",
        "z": "291aed48d6167ccb",
        "name": "file exists?",
        "path": "/coachproxy/home/pi/.node-red/flows",
        "pathType": "str",
        "filename": "payload.title",
        "filenameType": "msg",
        "read": true,
        "write": false,
        "throwerror": false,
        "x": 950,
        "y": 1500,
        "wires": [
            [
                "a4d5598f249560e5"
            ],
            [
                "8e9de1b472734664"
            ]
        ]
    },
    {
        "id": "a4d5598f249560e5",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payloadtoo",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "The configuration file selected already exists on eRVin, are you sure you want to overwrite it?",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 1500,
        "wires": [
            [
                "159579fd59484e98"
            ]
        ]
    },
    {
        "id": "e683fc882bf973bb",
        "type": "ui_template",
        "z": "291aed48d6167ccb",
        "group": "43a9d023.b2434",
        "name": "Configuration Files",
        "order": 1,
        "width": "6",
        "height": "3",
        "format": "\n<div layout=\"column\" layout-align=\"space-between\">\n<p>\n - This feature will allow you to download new and/or updated configuration files from the eRVin server online and copy them to your eRVin system.\n <br>- First click the <b>List Online Config Files</b> button below, then click the checkbox for the file you want.\n <br>- Once downloaded, use the <b>Install Configuration File</b> section below to update eRVin.\n <br>- This feature requires that eRVin have an internet connection. \n</p>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 270,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "8e9de1b472734664",
        "type": "string",
        "z": "291aed48d6167ccb",
        "name": "",
        "methods": [
            {
                "name": "delRightMost",
                "params": [
                    {
                        "type": "str",
                        "value": "_v"
                    }
                ]
            }
        ],
        "prop": "payload.title",
        "propout": "payload.habridge",
        "object": "msg",
        "objectout": "msg",
        "x": 1110,
        "y": 1640,
        "wires": [
            [
                "7722879507c71a6f"
            ]
        ]
    },
    {
        "id": "aefd7364be7404e7",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "File Download in Progress",
        "name": "Downloading",
        "x": 930,
        "y": 1700,
        "wires": []
    },
    {
        "id": "bd55afb20c6be13f",
        "type": "link out",
        "z": "291aed48d6167ccb",
        "name": "Send Refresh",
        "links": [
            "d8d5c35c.b0eaf",
            "f060a860.679988",
            "82b12a2059d8eb48"
        ],
        "x": 535,
        "y": 1840,
        "wires": []
    },
    {
        "id": "159579fd59484e98",
        "type": "ui_toast",
        "z": "291aed48d6167ccb",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Overwrite",
        "cancel": "Cancel",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 370,
        "y": 1580,
        "wires": [
            [
                "6fc2d8007aa70611"
            ]
        ]
    },
    {
        "id": "6fc2d8007aa70611",
        "type": "switch",
        "z": "291aed48d6167ccb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Overwrite",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Cancel",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 570,
        "y": 1580,
        "wires": [
            [
                "ac134f88100d9c71"
            ],
            [
                "fc9c4e369356c13e"
            ]
        ]
    },
    {
        "id": "ac134f88100d9c71",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payloadtoo",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1580,
        "wires": [
            [
                "54b14763ae3b90e6"
            ]
        ]
    },
    {
        "id": "54b14763ae3b90e6",
        "type": "fs-ops-delete",
        "z": "291aed48d6167ccb",
        "name": "del flows file",
        "path": "/coachproxy/home/pi/.node-red/flows",
        "pathType": "str",
        "filename": "payload.title",
        "filenameType": "msg",
        "x": 1130,
        "y": 1580,
        "wires": [
            [
                "8e9de1b472734664"
            ]
        ]
    },
    {
        "id": "30e605bc284ca314",
        "type": "change",
        "z": "291aed48d6167ccb",
        "name": "Clear List",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 1500,
        "wires": [
            [
                "1461a80bc8da938f"
            ]
        ]
    },
    {
        "id": "d7f6178c67801730",
        "type": "inject",
        "z": "291aed48d6167ccb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 360,
        "y": 1480,
        "wires": [
            [
                "30e605bc284ca314"
            ]
        ]
    },
    {
        "id": "64635f6d768dad35",
        "type": "html",
        "z": "291aed48d6167ccb",
        "name": "Extract Filenames",
        "property": "payload",
        "outproperty": "payload",
        "tag": "a[href*=\"_\"]",
        "ret": "text",
        "as": "single",
        "x": 830,
        "y": 1440,
        "wires": [
            [
                "5c6e6bc1cce009c4"
            ]
        ]
    },
    {
        "id": "609cd624612eb594",
        "type": "http request",
        "z": "291aed48d6167ccb",
        "name": "get filenames",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://flows.myervin.com/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 590,
        "y": 1440,
        "wires": [
            [
                "64635f6d768dad35"
            ]
        ]
    },
    {
        "id": "5c6e6bc1cce009c4",
        "type": "function",
        "z": "291aed48d6167ccb",
        "name": "sort",
        "func": "// Ensure the payload is an array\nif (!Array.isArray(msg.payload)) {\n    return msg;\n}\n\n// Sort the filenames alphabetically\nmsg.payload.sort((a, b) => a.localeCompare(b, undefined, { sensitivity: 'base' }));\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1440,
        "wires": [
            [
                "1461a80bc8da938f"
            ]
        ]
    },
    {
        "id": "347d6b21dbf5ca52",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Shutdown",
        "group": "97b9ad54.9933e",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Shutdown",
        "color": "",
        "bgcolor": "",
        "icon": "fa-power-off",
        "payload": "",
        "payloadType": "str",
        "topic": "shutdown",
        "x": 420,
        "y": 800,
        "wires": [
            [
                "60ea9bce18591d37"
            ]
        ]
    },
    {
        "id": "60ea9bce18591d37",
        "type": "exec",
        "z": "420b5823.3c372",
        "command": "sudo /coachproxy/bin/safe_shutdown",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "name": "",
        "x": 690,
        "y": 800,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d05c6aebf34388c1",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Reboot",
        "group": "97b9ad54.9933e",
        "order": 6,
        "width": "3",
        "height": "1",
        "passthru": true,
        "label": "Reboot",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "fa-repeat",
        "payload": "",
        "payloadType": "str",
        "topic": "reboot",
        "x": 420,
        "y": 740,
        "wires": [
            [
                "4b28034576b70e6b"
            ]
        ]
    },
    {
        "id": "4b28034576b70e6b",
        "type": "exec",
        "z": "420b5823.3c372",
        "command": "sudo /coachproxy/bin/safe_reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "name": "",
        "x": 680,
        "y": 740,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "8cc36491f7e8aca3",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "97b9ad54.9933e",
        "order": 8,
        "width": "",
        "height": "",
        "name": "Shutdown Feedback",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 720,
        "y": 860,
        "wires": []
    },
    {
        "id": "c8483094844a9406",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "GLOBAL/MESSAGE",
        "qos": "0",
        "datatype": "auto",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 250,
        "y": 480,
        "wires": [
            [
                "37b8b1c2c9850f7c"
            ]
        ]
    },
    {
        "id": "e37230b089aaa5a4",
        "type": "inject",
        "z": "420b5823.3c372",
        "name": "Every Minute",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 1020,
        "wires": [
            [
                "1928aa9a28a72ea1"
            ]
        ]
    },
    {
        "id": "1928aa9a28a72ea1",
        "type": "exec",
        "z": "420b5823.3c372",
        "command": "date +%s -d \"$(uptime -s)\"",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "name": "Uptime",
        "x": 480,
        "y": 1020,
        "wires": [
            [
                "37c399e847318221"
            ],
            [],
            []
        ]
    },
    {
        "id": "26fb2afda60e290a",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "97b9ad54.9933e",
        "order": 5,
        "width": "",
        "height": "",
        "name": "Uptime",
        "label": "Uptime",
        "format": "{{msg.payload}}",
        "layout": "",
        "x": 880,
        "y": 1020,
        "wires": []
    },
    {
        "id": "61349bf736ced234",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "GLOBAL/SHUTDOWN",
        "qos": "0",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 460,
        "y": 860,
        "wires": [
            [
                "8cc36491f7e8aca3"
            ]
        ]
    },
    {
        "id": "37b8b1c2c9850f7c",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "Alert!",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Alert!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 480,
        "wires": [
            [
                "eef7f242e3fc665a"
            ]
        ]
    },
    {
        "id": "254b08b880433460",
        "type": "inject",
        "z": "420b5823.3c372",
        "name": "At launch",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 240,
        "y": 300,
        "wires": [
            [
                "2734c0ab01f6a4fe"
            ]
        ]
    },
    {
        "id": "cf34d01c30bb964e",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Primary Initialization v0.66",
        "info": "\n\neRVin has deleted the original coachproxy sql database in favor of using\nglobal context for all stored variables and values\n\nThe nodes in this flow run at startup. The first function node retains some\nof the original coachproxy initializtions such as for global.status.\nThe first node also reworks global.Settings2 for use with eRVin.\n\nThe second function node initializes global.Settings values which are \nexclusive eRVin add-ons.\n\nAdditional context initializations are done with inject nodes in the individual flow tabs.",
        "x": 250,
        "y": 260,
        "wires": []
    },
    {
        "id": "7037e04933a1549c",
        "type": "link out",
        "z": "420b5823.3c372",
        "name": "Settings2 has been loaded",
        "mode": "link",
        "links": [
            "4f213fefede2ddb5"
        ],
        "x": 1505,
        "y": 300,
        "wires": []
    },
    {
        "id": "2d106630146f910d",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Send a message to GLOBAL/MESSAGE to display a pop-up alert",
        "info": "",
        "x": 350,
        "y": 420,
        "wires": []
    },
    {
        "id": "eef7f242e3fc665a",
        "type": "ui_toast",
        "z": "420b5823.3c372",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 650,
        "y": 480,
        "wires": []
    },
    {
        "id": "7a2b088235ce6836",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "NETWORK/#",
        "qos": "0",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 230,
        "y": 580,
        "wires": [
            [
                "7b39630358404219"
            ]
        ]
    },
    {
        "id": "205792d542bad93b",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "group": "cd05e210.dac658",
        "name": "WiFi Network Info",
        "order": 1,
        "width": "6",
        "height": "6",
        "format": "<!DOCTYPE html>\n<html>\n<body>\n<div layout=\"column\" layout-align=\"space-between\">\n    <div>{{msg.message}}</div>&nbsp;\n    <!--<div>&nbsp;</div>-->\n    <div style=\"text-align: center; font-weight: bold\">Your WiFi Network</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>Network:</span>{{msg.data.WPA.SSID}}</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>IP Address:</span><a href='http://{{msg.data.WPA.IP}}'>{{msg.data.WPA.IP}}</a></div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>HW Address:</span>{{msg.data.WPA.MAC}}</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>Connection Status:</span>{{msg.data.WPA.STATE}}</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>Connection Quality:</span>{{msg.data.WPA.QUALITY}}%</div>&nbsp;\n    <p>&nbsp;</p>\n</div>\n</body>\n</html>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1010,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "237682e0930efbb5",
        "type": "rbe",
        "z": "420b5823.3c372",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 650,
        "y": 580,
        "wires": [
            [
                "19afa9ad0f10867b",
                "205792d542bad93b"
            ]
        ]
    },
    {
        "id": "19afa9ad0f10867b",
        "type": "throttle",
        "z": "420b5823.3c372",
        "d": true,
        "name": "",
        "throttleType": "time",
        "timeLimit": "1",
        "timeLimitType": "seconds",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 830,
        "y": 540,
        "wires": [
            [
                "205792d542bad93b"
            ]
        ]
    },
    {
        "id": "3f4fb3d48dfab11d",
        "type": "ui_dropdown",
        "z": "420b5823.3c372",
        "name": "Item Type",
        "label": "",
        "place": "Select item",
        "group": "7f355d52.ee5a24",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": true,
        "options": [
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "notif_type",
        "x": 2060,
        "y": 980,
        "wires": [
            [
                "2810f21058255cde",
                "20d3d29b71586f98"
            ]
        ]
    },
    {
        "id": "0de29bb18f74a5ca",
        "type": "ui_dropdown",
        "z": "420b5823.3c372",
        "name": "Test Type",
        "label": "",
        "place": "Select option",
        "group": "7f355d52.ee5a24",
        "order": 3,
        "width": "3",
        "height": "1",
        "passthru": true,
        "options": [
            {
                "label": "",
                "value": "is above",
                "type": "str"
            },
            {
                "label": "",
                "value": "is below",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "notif_test",
        "x": 2060,
        "y": 1100,
        "wires": [
            [
                "2810f21058255cde"
            ]
        ]
    },
    {
        "id": "f2c5ef1fcde8e3d5",
        "type": "ui_text_input",
        "z": "420b5823.3c372",
        "name": "Value",
        "label": "Value",
        "group": "7f355d52.ee5a24",
        "order": 4,
        "width": "2",
        "height": "1",
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "notif_value",
        "x": 2050,
        "y": 1020,
        "wires": [
            [
                "2810f21058255cde"
            ]
        ]
    },
    {
        "id": "8601fc3e7fae5c1a",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Add",
        "group": "7f355d52.ee5a24",
        "order": 6,
        "width": "2",
        "height": "1",
        "passthru": false,
        "label": "Add",
        "color": "",
        "bgcolor": "",
        "icon": "fa-plus",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "x": 2050,
        "y": 1140,
        "wires": [
            [
                "527da786addd92c1"
            ]
        ]
    },
    {
        "id": "dd13e350cceaee38",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 5,
        "width": "2",
        "height": "1",
        "name": "Unit",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 2050,
        "y": 1060,
        "wires": []
    },
    {
        "id": "2810f21058255cde",
        "type": "file function",
        "z": "420b5823.3c372",
        "name": "form_field_save.js",
        "filename": ".node-red/js/form_field_save.js",
        "reloadfile": false,
        "outputs": 1,
        "x": 2330,
        "y": 1020,
        "wires": [
            []
        ],
        "info": "//\r\n// Copyright (C) 2019 Wandertech LLC\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\n// Save text input values to a global context structure as the user\r\n// types into the field. This makes it easy to retrieve later when\r\n// the user selects the \"Save\" or other action button.\r\n\r\nglobal.set('form.' + msg.topic, msg.payload);\r\n\r\nreturn null;\r\n"
    },
    {
        "id": "bf20cadc39701d8a",
        "type": "ui_ui_control",
        "z": "420b5823.3c372",
        "name": "Tab Selected",
        "x": 1530,
        "y": 1000,
        "wires": [
            [
                "f22104651c955edf",
                "8a8ba20ca0ba6a64",
                "dc8b5d301f79c296"
            ]
        ]
    },
    {
        "id": "f22104651c955edf",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "Blank",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1850,
        "y": 1000,
        "wires": [
            [
                "3f4fb3d48dfab11d",
                "0de29bb18f74a5ca",
                "f2c5ef1fcde8e3d5"
            ]
        ]
    },
    {
        "id": "8a8ba20ca0ba6a64",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Notification List",
        "func": "const max_rules = 12;\n\nconst tests = { 'is below': '<', 'is above': '>', 'changes': 'changes' };\nlet notifs = global.get('settings2')['notify_rules'] || [];\n\nnotifs.sort((a,b) => a.notif_type.localeCompare(b.notif_type));\n\nfor (let notif in notifs) {\n    let n = notifs[notif];\n    n.notif_testval = tests[n.notif_test] + ' ' + n.notif_value + n.notif_unit;\n}\n\nreturn [{ payload: notifs }, { enabled: notifs.length < max_rules } ];\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1740,
        "y": 1420,
        "wires": [
            [
                "944d97cab40dbc32",
                "dc92e5d471ccf671",
                "125e231263d54f08",
                "c4c3e8ee20eae724",
                "9c9d80990a1a95f1",
                "f34ff36abbd6f649",
                "5502c3c6e9f87f30",
                "5339c1aa9d573170",
                "295c65bc06449431",
                "96f62799f0bf2d3a",
                "f91a9aa28126a6a7",
                "fa9898e3e59b753a",
                "0a1d6fc5639b9592",
                "29c324ba13e5eafb",
                "aad19a2c1f46072f",
                "255c34c6e8c712f0",
                "7c77ca8eeab2b721",
                "6f57d1ec71260ba3",
                "a8cac9712fe032d5",
                "3be41f82ab4c4ce6",
                "5d9c0519830ac055",
                "e422eb529ec83e09",
                "eeadfad487c5a701",
                "32f7b762ac6d5b2a"
            ],
            [
                "8601fc3e7fae5c1a"
            ]
        ]
    },
    {
        "id": "944d97cab40dbc32",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 11,
        "width": "3",
        "height": "1",
        "name": "Type1",
        "label": "{{msg.payload[1].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1300,
        "wires": []
    },
    {
        "id": "dc92e5d471ccf671",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 12,
        "width": "2",
        "height": "1",
        "name": "Test1",
        "label": "{{msg.payload[1].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1300,
        "wires": []
    },
    {
        "id": "78495669d8bb7f5d",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete1",
        "group": "7f355d52.ee5a24",
        "order": 13,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "1",
        "x": 2300,
        "y": 1300,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "125e231263d54f08",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 14,
        "width": "3",
        "height": "1",
        "name": "Type2",
        "label": "{{msg.payload[2].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1340,
        "wires": []
    },
    {
        "id": "c4c3e8ee20eae724",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 15,
        "width": "2",
        "height": "1",
        "name": "Test2",
        "label": "{{msg.payload[2].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1340,
        "wires": []
    },
    {
        "id": "4e3803262ee7f941",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete2",
        "group": "7f355d52.ee5a24",
        "order": 16,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "2",
        "x": 2300,
        "y": 1340,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "9c9d80990a1a95f1",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 17,
        "width": "3",
        "height": "1",
        "name": "Type3",
        "label": "{{msg.payload[3].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1380,
        "wires": []
    },
    {
        "id": "f34ff36abbd6f649",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 18,
        "width": "2",
        "height": "1",
        "name": "Test3",
        "label": "{{msg.payload[3].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1380,
        "wires": []
    },
    {
        "id": "53d223ea5b25914b",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete3",
        "group": "7f355d52.ee5a24",
        "order": 19,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "3",
        "x": 2300,
        "y": 1380,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "5502c3c6e9f87f30",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 20,
        "width": "3",
        "height": "1",
        "name": "Type4",
        "label": "{{msg.payload[4].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1420,
        "wires": []
    },
    {
        "id": "5339c1aa9d573170",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 21,
        "width": "2",
        "height": "1",
        "name": "Test4",
        "label": "{{msg.payload[4].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1420,
        "wires": []
    },
    {
        "id": "1c2ef961349974eb",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete4",
        "group": "7f355d52.ee5a24",
        "order": 22,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "4",
        "x": 2300,
        "y": 1420,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "295c65bc06449431",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 23,
        "width": "3",
        "height": "1",
        "name": "Type5",
        "label": "{{msg.payload[5].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1460,
        "wires": []
    },
    {
        "id": "96f62799f0bf2d3a",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 24,
        "width": "2",
        "height": "1",
        "name": "Test5",
        "label": "{{msg.payload[5].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1460,
        "wires": []
    },
    {
        "id": "84ba629ac0c81951",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete5",
        "group": "7f355d52.ee5a24",
        "order": 25,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "5",
        "x": 2300,
        "y": 1460,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "f91a9aa28126a6a7",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 26,
        "width": "3",
        "height": "1",
        "name": "Type6",
        "label": "{{msg.payload[6].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1500,
        "wires": []
    },
    {
        "id": "fa9898e3e59b753a",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 27,
        "width": "2",
        "height": "1",
        "name": "Test6",
        "label": "{{msg.payload[6].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1500,
        "wires": []
    },
    {
        "id": "63f046ccae2eb3d3",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete6",
        "group": "7f355d52.ee5a24",
        "order": 28,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "6",
        "x": 2300,
        "y": 1500,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "0a1d6fc5639b9592",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 29,
        "width": "3",
        "height": "1",
        "name": "Type7",
        "label": "{{msg.payload[7].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1540,
        "wires": []
    },
    {
        "id": "29c324ba13e5eafb",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 30,
        "width": "2",
        "height": "1",
        "name": "Test7",
        "label": "{{msg.payload[7].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1540,
        "wires": []
    },
    {
        "id": "a6890867ca3b9ee5",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete7",
        "group": "7f355d52.ee5a24",
        "order": 31,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "7",
        "x": 2300,
        "y": 1540,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "aad19a2c1f46072f",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 32,
        "width": "3",
        "height": "1",
        "name": "Type8",
        "label": "{{msg.payload[8].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1580,
        "wires": []
    },
    {
        "id": "255c34c6e8c712f0",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 33,
        "width": "2",
        "height": "1",
        "name": "Test8",
        "label": "{{msg.payload[8].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1580,
        "wires": []
    },
    {
        "id": "510e587c65209aa9",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete8",
        "group": "7f355d52.ee5a24",
        "order": 34,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "8",
        "x": 2300,
        "y": 1580,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "7c77ca8eeab2b721",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 35,
        "width": "3",
        "height": "1",
        "name": "Type9",
        "label": "{{msg.payload[9].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1620,
        "wires": []
    },
    {
        "id": "6f57d1ec71260ba3",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 36,
        "width": "2",
        "height": "1",
        "name": "Test9",
        "label": "{{msg.payload[9].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1620,
        "wires": []
    },
    {
        "id": "92fe4d78640d3e8d",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete9",
        "group": "7f355d52.ee5a24",
        "order": 37,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "9",
        "x": 2300,
        "y": 1620,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "a8cac9712fe032d5",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 8,
        "width": "3",
        "height": "1",
        "name": "Type0",
        "label": "{{msg.payload[0].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2050,
        "y": 1260,
        "wires": []
    },
    {
        "id": "3be41f82ab4c4ce6",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 9,
        "width": "2",
        "height": "1",
        "name": "Test0",
        "label": "{{msg.payload[0].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2170,
        "y": 1260,
        "wires": []
    },
    {
        "id": "e8b7b7b62b68e47f",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete0",
        "group": "7f355d52.ee5a24",
        "order": 10,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "0",
        "x": 2300,
        "y": 1260,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "29254e57c0aa8d22",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Delete Notification",
        "func": "// Remove a notification rule, update the settings on disk,\n// and refresh the list.\n\nlet notifs = global.get('settings2')['notify_rules'] || [];\nnotifs.splice(msg.topic, 1);  // This changes in global context\n\nreturn { topic: 'notify_rules', payload: JSON.stringify(notifs) };",
        "outputs": 1,
        "noerr": 0,
        "x": 2590,
        "y": 1300,
        "wires": [
            [
                "8a8ba20ca0ba6a64",
                "4e300c82eedaadea"
            ]
        ]
    },
    {
        "id": "cece4c420e1ab840",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 7,
        "width": "0",
        "height": "0",
        "name": "Your notification rules:",
        "label": "",
        "format": "Your notification rules:",
        "layout": "row-center",
        "x": 2100,
        "y": 1220,
        "wires": []
    },
    {
        "id": "4f213fefede2ddb5",
        "type": "link in",
        "z": "420b5823.3c372",
        "name": "Set remote access fields",
        "links": [
            "7037e04933a1549c",
            "046112c5f2648ffe"
        ],
        "x": 1615,
        "y": 300,
        "wires": [
            [
                "33a887cf58c022e7",
                "c3c5dac406fc6498",
                "ed43d5b9d33b1cde",
                "247c270a817cd47d",
                "a2fc541977ad1886",
                "a1610f97271003d0",
                "3a573dd6a973707d"
            ]
        ]
    },
    {
        "id": "14f35766b083b4ad",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "group": "d0c7f134.375fd",
        "name": "Notification Intro",
        "order": 1,
        "width": "",
        "height": "",
        "format": "<div layout=\"column\" layout-align=\"space-between\">\n<p><b>Internet Connection Requirement:</b></p>\n<p>Notifications require an active Internet connection. See 'Network Information' in the 'System' tab to check your network status.</p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 2060,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "33a887cf58c022e7",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.pushover_key",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext('settings2.pushover_key')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "form.pushover_key",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1810,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "38348b7f7b38ddde",
        "type": "http request",
        "z": "420b5823.3c372",
        "name": "Post to Pushover",
        "method": "POST",
        "ret": "txt",
        "url": "https://api.pushover.net/1/messages.json",
        "x": 2570,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "15671d48b598de87",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Test Notification Message",
        "func": "let message = \"Hi! This is a test notification from eRVin to Pushover.\\n\\n\";\nmessage = message + \"You can control your notification sounds, quiet hours, and other \";\nmessage = message + \"options in the Pushover app on your phone or tablet.\";\n\nmsg.headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\"\n};\n\nmsg.payload = { \n    user: global.get('settings2')['pushover_key'],\n    token: 'afvtrcguexvtutk7orsc41m1fcw42i',\n    title: 'eRVin Test Notification',\n    message: message,\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2330,
        "y": 380,
        "wires": [
            [
                "38348b7f7b38ddde"
            ]
        ]
    },
    {
        "id": "3efa520481c054aa",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "name": "Notification Rule Info",
        "order": 1,
        "width": "",
        "height": "",
        "format": "<div>\n<p>Create customized rules below to be notified when values change:</p>\n<p>&nbsp;</p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 2100,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "af566efad9c98994",
        "type": "http request",
        "z": "420b5823.3c372",
        "name": "Post to Pushover",
        "method": "POST",
        "ret": "txt",
        "url": "https://api.pushover.net/1/messages.json",
        "tls": "",
        "x": 1190,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "7896ae37c059402f",
        "type": "mqtt out",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "GLOBAL/MESSAGE",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 1200,
        "y": 1320,
        "wires": []
    },
    {
        "id": "b90379c52ad38458",
        "type": "file function",
        "z": "420b5823.3c372",
        "d": true,
        "name": "notification_menu_options.js",
        "filename": ".node-red/js/notification_menu_options.js",
        "reloadfile": false,
        "outputs": 1,
        "x": 1780,
        "y": 920,
        "wires": [
            []
        ],
        "info": "//\r\n// Copyright (C) 2019 Wandertech LLC\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\n// Populate the \"Notification Type\" menu with appropriate options\r\n// based on the user's choice of coach and options.\r\n\r\nconst configs = global.get('configs');\r\nconst features = global.get('features')[configs.year][configs.model]['Default'];\r\nconst ac_source = global.get('status').power.ac_source;\r\n\r\nlet options = [];\r\n\r\n// Tanks\r\noptions.push('Tank: Fresh');\r\noptions.push('Tank: Grey');\r\noptions.push('Tank: Black');\r\nif (configs.lpg === 'true') {\r\n    options.push('Tank: LPG');\r\n}\r\n\r\n// Batteries\r\noptions.push('Batt: House');\r\nif (configs.batt_chassis === 'true') {\r\n    options.push('Batt: Chassis');\r\n}\r\n\r\n// Temps\r\nif (configs.tstats === 'true') {\r\n    options.push('Temp: Front');\r\n    if (configs.thirdtstat === 'true') {\r\n        options.push('Temp: Mid');\r\n    }\r\n    options.push('Temp: Rear');\r\n    if (configs.exttemp === 'true') {\r\n        options.push('Temp: Wet Bay');\r\n    }\r\n}\r\n\r\n// Toggles\r\n\r\nif (ac_source) {\r\n  options.push('AC Power');\r\n}\r\nif (features.Ignition == 1) {\r\n    options.push('Ignition');\r\n}\r\nif (features.GeneratorStatus == 1) {\r\n    options.push('Generator');\r\n}\r\n\r\nmsg = { options: options, payload: null, topic: null };\r\nreturn msg;\r\n\r\n"
    },
    {
        "id": "20d3d29b71586f98",
        "type": "file function",
        "z": "420b5823.3c372",
        "name": "notification_submenu_options.js",
        "filename": ".node-red/js/notification_submenu_options.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 1790,
        "y": 1060,
        "wires": [
            [
                "f2c5ef1fcde8e3d5"
            ],
            [
                "dd13e350cceaee38",
                "2810f21058255cde"
            ],
            [
                "0de29bb18f74a5ca"
            ]
        ],
        "info": "//\r\n// Copyright (C) 2019 Wandertech LLC\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\n// Once a user chooses a notification type when creating a new rule, populate\r\n// the submenus (test case, test value) with sensible options and default values.\r\n\r\nconst values = { 'tank': '67', 'batt': '11.8', 'temp': '85', 'wet': '40' };\r\nconst units = { 'tank': '%', 'batt': 'V', 'temp': '\u00c2\u00baF', 'wet': '\u00c2\u00baF' };\r\nconst tests = { 'tank': 'is above', 'batt': 'is below', 'temp': 'is above', 'wet': 'is below' };\r\n\r\nvar msg_value = { topic: 'notif_value' };\r\nvar msg_unit  = { topic: 'notif_unit' };\r\nvar msg_test  = { topic: 'notif_test', payload: \"is above\" };\r\n\r\nmsg.topic = null; // Required to block existing topic from passing through\r\n\r\n// Update default value, unit, and test for numeric rules\r\nfor (let key in values) {\r\n  if (msg.payload && msg.payload.toLowerCase().includes(key)) {\r\n    msg_test.options = ['is above', 'is below'];\r\n    msg_test.payload = tests[key];\r\n    msg_value.payload = values[key];\r\n    msg_value.enabled = true;\r\n    msg_unit.payload = units[key];\r\n  }\r\n}\r\n\r\n// Update menus for non-numeric rules (e.g. Ignition)\r\nconst toggles = ['AC Power', 'Ignition', 'Generator'];\r\nif (toggles.includes(msg.payload)) {\r\n  msg_test.options = ['changes'];\r\n  msg_test.payload = 'changes';\r\n  msg_value.payload = '';\r\n  msg_value.enabled = false;\r\n  msg_unit.payload = '';\r\n}\r\n\r\nreturn [msg_value, msg_unit, msg_test];\r\n"
    },
    {
        "id": "527da786addd92c1",
        "type": "file function",
        "z": "420b5823.3c372",
        "name": "notification_save.js",
        "filename": ".node-red/js/notification_save.js",
        "reloadfile": false,
        "outputs": 1,
        "x": 2330,
        "y": 1140,
        "wires": [
            [
                "8a8ba20ca0ba6a64",
                "4e300c82eedaadea"
            ]
        ],
        "info": "//\r\n// Copyright (C) 2019 Wandertech LLC\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\n// After the user has defined a new notification rule, save it to the\r\n// database.\r\n\r\nvar notifs = global.get('settings2')['notify_rules'] || [];\r\nvar notif = {};\r\n\r\nconst topics = [\r\n    'notif_type',\r\n    'notif_test',\r\n    'notif_value',\r\n    'notif_unit'\r\n];\r\n\r\ntopics.forEach(function(topic) {\r\n  const value = global.get('form')[topic] || '';\r\n  notif[topic] = value;\r\n});\r\n\r\n// If a value is required but not present, give up.\r\nif (notif['notif_test'] != 'changes' && (notif['notif_value'] === '' || isNaN(notif['notif_value']))) {\r\n  msg = null;\r\n} else {\r\n  notifs.push(notif);\r\n  notifs.sort((a,b) => a.notif_type.localeCompare(b.notif_type));\r\n\r\n  // Delete \"notif_state\" for existing toggle rules (e.g. \"generator\") so\r\n  // their current state doesn't get saved to the database along with the rule.\r\n  notifs.forEach(function(n) {\r\n    delete n.notif_state;\r\n  });\r\n\r\n  msg = { topic: 'notify_rules', payload: JSON.stringify(notifs) };\r\n}\r\n\r\nreturn msg;\r\n\r\n"
    },
    {
        "id": "e422eb529ec83e09",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 38,
        "width": "3",
        "height": "1",
        "name": "Type10",
        "label": "{{msg.payload[10].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2060,
        "y": 1660,
        "wires": []
    },
    {
        "id": "5d9c0519830ac055",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 39,
        "width": "2",
        "height": "1",
        "name": "Test10",
        "label": "{{msg.payload[10].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2190,
        "y": 1660,
        "wires": []
    },
    {
        "id": "9a9f89d62cc1ecc2",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete10",
        "group": "7f355d52.ee5a24",
        "order": 40,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "10",
        "x": 2320,
        "y": 1660,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "eeadfad487c5a701",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 41,
        "width": "3",
        "height": "1",
        "name": "Type11",
        "label": "{{msg.payload[11].notif_type}}",
        "format": "",
        "layout": "row-left",
        "x": 2060,
        "y": 1700,
        "wires": []
    },
    {
        "id": "32f7b762ac6d5b2a",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "7f355d52.ee5a24",
        "order": 42,
        "width": "2",
        "height": "1",
        "name": "Test11",
        "label": "{{msg.payload[11].notif_testval}}",
        "format": "",
        "layout": "row-left",
        "x": 2190,
        "y": 1700,
        "wires": []
    },
    {
        "id": "9dd4d035b2b164e2",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "Delete11",
        "group": "7f355d52.ee5a24",
        "order": 43,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "",
        "color": "#8D0000",
        "bgcolor": "#ffffff",
        "icon": "fa-trash fa-lg",
        "payload": "delete",
        "payloadType": "str",
        "topic": "11",
        "x": 2320,
        "y": 1700,
        "wires": [
            [
                "29254e57c0aa8d22"
            ]
        ]
    },
    {
        "id": "51b0874c543c3819",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "CP/TANK_STATUS/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 220,
        "y": 1260,
        "wires": [
            [
                "cc763832ce8e6262"
            ]
        ]
    },
    {
        "id": "e882943a8483c24f",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "CP/IGNITION",
        "qos": "2",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 190,
        "y": 1400,
        "wires": [
            [
                "fbd25cbc8f30d2ab"
            ]
        ]
    },
    {
        "id": "a6fe1b84b1668394",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "CP/PARKBRAKE",
        "qos": "2",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 200,
        "y": 1440,
        "wires": [
            [
                "fbd25cbc8f30d2ab"
            ]
        ]
    },
    {
        "id": "88ec5fae693f3aee",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "CP/GENERATOR",
        "qos": "2",
        "datatype": "auto",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 210,
        "y": 1480,
        "wires": [
            [
                "fbd25cbc8f30d2ab"
            ]
        ]
    },
    {
        "id": "66f0a7b1531cab4a",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "CP/THERMISTOR_TEMP/#",
        "qos": "2",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 240,
        "y": 1300,
        "wires": [
            [
                "cc763832ce8e6262"
            ]
        ]
    },
    {
        "id": "fbd25cbc8f30d2ab",
        "type": "file function",
        "z": "420b5823.3c372",
        "name": "notification_state_monitor.js",
        "filename": ".node-red/js/notification_state_monitor.js",
        "reloadfile": false,
        "outputs": 1,
        "x": 540,
        "y": 1460,
        "wires": [
            [
                "0b9160c84690a33b"
            ]
        ],
        "info": "//\r\n// Copyright (C) 2019 Wandertech LLC\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\n// Monitor certain MQTT topics for a change in state (e.g. \"ignition\"\r\n// changing from \"off\" to \"on\") and send a notification. If too many\r\n// notifications are sent within a short time, enter a long \"backoff\"\r\n// phase where no notifications for the topic will be sent.\r\n\r\nconst topics = {\r\n  'Ignition': 'CP/IGNITION',\r\n  'Park Brake': 'CP/PARKBRAKE',\r\n  'Generator': 'CP/GENERATOR',\r\n  'AC Power': 'CP/AC_SOURCE',\r\n};\r\n\r\n// Pause for <pause_time> if <max_messages> are sent in <max_interval> for a topic.\r\n// Defaults: Pause for 60 minutes if 8 messages are sent within 5 minutes\r\nconst pause_time = 60 * 60 * 1000;\r\nconst max_messages = 8;\r\nconst max_interval = 5 * 60 * 1000;\r\n\r\nlet notifs = global.get('settings2')['notify_rules'] || [];\r\nlet newmsg = null;\r\n\r\n// Check each notification rule\r\nfor (let notif in notifs) {\r\n  let n = notifs[notif];\r\n\r\n  // If the current message topic matches a notification rule, process the rule\r\n  if (topics[n.notif_type] == msg.topic) {\r\n\r\n    // Look up the previous state of this topic. If this is the first time\r\n    // receiving a message for the topic, set it to the current state to\r\n    // prevent sending an alarm each time CoachProxy starts up.\r\n    let prev_state = n.notif_state || msg.payload;\r\n\r\n    // Look up the count of alarms sent recently for this topic\r\n    let count = n.notif_count || 0;\r\n\r\n    // Look up the start of the current backoff interval\r\n    let interval_start = n.notif_interval || Date.now();\r\n\r\n    // If notifications are paused, see if it's time to release them\r\n    if (n.notif_pause && Date.now() - n.notif_pause > pause_time) {\r\n      n.notif_pause = null;\r\n    }\r\n\r\n    // If the current interval is over, clear it out\r\n    if (Date.now() - interval_start > max_interval) {\r\n      count = 0;\r\n      n.notif_count = 0;\r\n      n.notif_interval = null;\r\n    }\r\n\r\n    // Alarm if the current value is different from the previous value.\r\n    if (msg.payload != prev_state && !n.notif_pause) {\r\n      count++;\r\n\r\n      // If it's over its threshold, start the pause clock, otherwise send alarm.\r\n      if (count > max_messages) {\r\n        newmsg = {};\r\n        newmsg.payload = 'Too many notifications being sent for ' + n.notif_type + '. ';\r\n        newmsg.payload += 'Pausing for ' + (pause_time / 60 / 1000) + \" minutes.\\n\";\r\n        newmsg.subject = 'eRVin ALERT for ' + n.notif_type;\r\n\r\n        n.notif_pause = Date.now();\r\n        n.notif_count = 0;\r\n        n.notif_interval = null;\r\n      } else {\r\n        newmsg = {};\r\n        newmsg.payload = n.notif_type + ' has changed from ' + prev_state + ' to ' + msg.payload + \".\\n\";\r\n        newmsg.subject = 'eRVin ALERT for ' + n.notif_type;\r\n\r\n        if (count == 1) {\r\n          n.notif_interval = Date.now();\r\n        }\r\n        n.notif_count = count;\r\n      }\r\n    }\r\n\r\n    // Update the latest state\r\n    n.notif_state = msg.payload;\r\n  }\r\n}\r\n\r\nreturn newmsg;\r\n"
    },
    {
        "id": "9c1624b9f6907d20",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "CP/BATTERY_VOLTS/#",
        "qos": "2",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 230,
        "y": 1340,
        "wires": [
            [
                "cc763832ce8e6262"
            ]
        ]
    },
    {
        "id": "e7f9e75e1498ed04",
        "type": "mqtt in",
        "z": "420b5823.3c372",
        "name": "",
        "topic": "CP/AC_SOURCE",
        "qos": "2",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 200,
        "y": 1520,
        "wires": [
            [
                "fbd25cbc8f30d2ab"
            ]
        ]
    },
    {
        "id": "c3c5dac406fc6498",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.notify_email1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "settings2.notify_email1",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "form.notify_email1",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1800,
        "y": 440,
        "wires": [
            [
                "90902ebd8409fcf4"
            ]
        ]
    },
    {
        "id": "ed43d5b9d33b1cde",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.notify_email2",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext('settings2.notify_email2')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "form.notify_email2",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1800,
        "y": 480,
        "wires": [
            [
                "1d589f3b1c6216e8"
            ]
        ]
    },
    {
        "id": "90902ebd8409fcf4",
        "type": "ui_text_input",
        "z": "420b5823.3c372",
        "name": "Email Address 1",
        "label": "Email Address 1",
        "tooltip": "",
        "group": "9ed66528.add608",
        "order": 2,
        "width": "",
        "height": "",
        "passthru": true,
        "mode": "email",
        "delay": "10",
        "topic": "notify_email1",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 2060,
        "y": 440,
        "wires": [
            [
                "b97a2c580c3d45f4"
            ]
        ]
    },
    {
        "id": "1d589f3b1c6216e8",
        "type": "ui_text_input",
        "z": "420b5823.3c372",
        "name": "Email Address 2",
        "label": "Email Address 2",
        "tooltip": "",
        "group": "9ed66528.add608",
        "order": 3,
        "width": "",
        "height": "",
        "passthru": true,
        "mode": "email",
        "delay": "10",
        "topic": "notify_email2",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 2060,
        "y": 480,
        "wires": [
            [
                "b97a2c580c3d45f4"
            ]
        ]
    },
    {
        "id": "759f3b886386a91c",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "",
        "group": "9ed66528.add608",
        "order": 4,
        "width": "3",
        "height": "1",
        "label": "Save",
        "color": "",
        "icon": "fa-check",
        "payload": "save",
        "payloadType": "str",
        "topic": "commit",
        "x": 2030,
        "y": 520,
        "wires": [
            [
                "ef989c3587c0c080"
            ]
        ]
    },
    {
        "id": "182936f0e7d0ecf8",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "",
        "group": "9ed66528.add608",
        "order": 5,
        "width": "3",
        "height": "1",
        "label": "Undo",
        "color": "",
        "icon": "fa-times",
        "payload": "undo",
        "payloadType": "str",
        "topic": "commit",
        "x": 1550,
        "y": 460,
        "wires": [
            [
                "c3c5dac406fc6498",
                "ed43d5b9d33b1cde"
            ]
        ]
    },
    {
        "id": "15168d06c2f0e037",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "group": "9ed66528.add608",
        "name": "Email Info",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div layout=\"column\" layout-align=\"space-between\">\n<p><b>E-mail Notification Setup:</b></p>\n<p>Enter up to two addresses to deliver notifications to:</p>\n<br>\n<p><b>To Receive Notifications via Text:</b></p>\n<p style=\"font-size:80%;\"><b>Verizon:</b> phone#@vtext.com<br>\n<b>AT&T:</b> phone#@txt.att<br>\n<b>TMobile:</b> phone#@tmomail.net<br>\n<b>Sprint:</b> phone#@messaging.sprintpcs.com\n</p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 2040,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b97a2c580c3d45f4",
        "type": "file function",
        "z": "420b5823.3c372",
        "name": "form_field_save.js",
        "filename": ".node-red/js/form_field_save.js",
        "reloadfile": false,
        "outputs": 1,
        "x": 2350,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "ef989c3587c0c080",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Save Email Settings",
        "func": "const topics = ['notify_email1', 'notify_email2'];\nvar msgs = [];\n\ntopics.forEach(function(topic) {\n  const value = global.get('form')[topic] || '';\n  const newmsg = { topic: topic, payload: value };\n  msgs.push(newmsg);\n});\n\nreturn [ msgs ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 2340,
        "y": 520,
        "wires": [
            [
                "4e300c82eedaadea"
            ]
        ]
    },
    {
        "id": "a1492d4319bb4e51",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "INSERT PUSHOVER NODES HERE",
        "info": "",
        "x": 2100,
        "y": 300,
        "wires": []
    },
    {
        "id": "247c270a817cd47d",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.smtp_host",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext('settings2.smtp_host')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "form.smtp_host",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1800,
        "y": 620,
        "wires": [
            [
                "40b7938766b072c5"
            ]
        ]
    },
    {
        "id": "a2fc541977ad1886",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.smtp_port",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext('settings2.smtp_port')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "form.smtp_port",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1800,
        "y": 660,
        "wires": [
            [
                "e044454c6740d084"
            ]
        ]
    },
    {
        "id": "a1610f97271003d0",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.smtp_user",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext('settings2.smtp_user')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "form.smtp_user",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1800,
        "y": 700,
        "wires": [
            [
                "e32f92b28bb76471"
            ]
        ]
    },
    {
        "id": "3a573dd6a973707d",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.smtp_password",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext('settings2.smtp_password')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "form.smtp_password",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1810,
        "y": 740,
        "wires": [
            [
                "345eb5c05ec21466"
            ]
        ]
    },
    {
        "id": "40b7938766b072c5",
        "type": "ui_text_input",
        "z": "420b5823.3c372",
        "name": "SMTP Server",
        "label": "SMTP Server Name",
        "tooltip": "e.g. smtp.gmail.com",
        "group": "b043acd4.87089",
        "order": 2,
        "width": "",
        "height": "",
        "passthru": true,
        "mode": "text",
        "delay": "10",
        "topic": "smtp_host",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 2060,
        "y": 620,
        "wires": [
            [
                "e2263d28456b929d"
            ]
        ]
    },
    {
        "id": "e044454c6740d084",
        "type": "ui_text_input",
        "z": "420b5823.3c372",
        "name": "SMTP Port",
        "label": "SMTP Server Port",
        "tooltip": "e.g. 587",
        "group": "b043acd4.87089",
        "order": 3,
        "width": "",
        "height": "",
        "passthru": true,
        "mode": "text",
        "delay": "10",
        "topic": "smtp_port",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 2050,
        "y": 660,
        "wires": [
            [
                "e2263d28456b929d"
            ]
        ]
    },
    {
        "id": "00c08467b902ce73",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "",
        "group": "b043acd4.87089",
        "order": 6,
        "width": "3",
        "height": "1",
        "label": "Save",
        "color": "",
        "icon": "fa-check",
        "payload": "save",
        "payloadType": "str",
        "topic": "commit",
        "x": 2030,
        "y": 780,
        "wires": [
            [
                "28201e065c01cdc3"
            ]
        ]
    },
    {
        "id": "421492aa864b9abe",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "group": "b043acd4.87089",
        "name": "SMTP Info",
        "order": 1,
        "width": "6",
        "height": "2",
        "format": "<div layout=\"column\" layout-align=\"space-between\">\n<p><b>E-mail Server Setup:</b></p>\n<p>Enter your E-mail SMTP Server information:</p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 2050,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "e32f92b28bb76471",
        "type": "ui_text_input",
        "z": "420b5823.3c372",
        "name": "SMTP Username",
        "label": "SMTP Username",
        "tooltip": "",
        "group": "b043acd4.87089",
        "order": 4,
        "width": "",
        "height": "",
        "passthru": true,
        "mode": "text",
        "delay": "10",
        "topic": "smtp_user",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 2070,
        "y": 700,
        "wires": [
            [
                "e2263d28456b929d"
            ]
        ]
    },
    {
        "id": "345eb5c05ec21466",
        "type": "ui_text_input",
        "z": "420b5823.3c372",
        "name": "SMTP Password",
        "label": "SMTP Password",
        "tooltip": "",
        "group": "b043acd4.87089",
        "order": 5,
        "width": "",
        "height": "",
        "passthru": true,
        "mode": "password",
        "delay": "10",
        "topic": "smtp_password",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 2070,
        "y": 740,
        "wires": [
            [
                "e2263d28456b929d"
            ]
        ]
    },
    {
        "id": "e2263d28456b929d",
        "type": "file function",
        "z": "420b5823.3c372",
        "name": "form_field_save.js",
        "filename": ".node-red/js/form_field_save.js",
        "reloadfile": false,
        "outputs": 1,
        "x": 2350,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "28201e065c01cdc3",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Save SMTP Settings",
        "func": "const topics = ['smtp_host', 'smtp_port', 'smtp_user', 'smtp_password'];\nvar msgs = [];\n\ntopics.forEach(function(topic) {\n  const value = global.get('form')[topic] || '';\n  const newmsg = { topic: topic, payload: value };\n  msgs.push(newmsg);\n});\n\nreturn [ msgs ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 780,
        "wires": [
            [
                "4e300c82eedaadea"
            ]
        ]
    },
    {
        "id": "0a8302fed718866e",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "",
        "group": "b043acd4.87089",
        "order": 7,
        "width": "3",
        "height": "1",
        "label": "Undo",
        "color": "",
        "icon": "fa-times",
        "payload": "undo",
        "payloadType": "str",
        "topic": "commit",
        "x": 1550,
        "y": 680,
        "wires": [
            [
                "247c270a817cd47d",
                "a2fc541977ad1886",
                "a1610f97271003d0",
                "3a573dd6a973707d"
            ]
        ]
    },
    {
        "id": "2643d93cb6e96a99",
        "type": "simple-sendmail",
        "z": "420b5823.3c372",
        "name": "simple sendmail",
        "x": 1180,
        "y": 1440,
        "wires": [
            [
                "1ea9274b45bef59c"
            ]
        ]
    },
    {
        "id": "1ea9274b45bef59c",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "d0c7f134.375fd",
        "order": 0,
        "width": "6",
        "height": "1",
        "name": "Mail Notification Status",
        "label": "Succeeded: {{msg.payload.accepted.length}}",
        "format": "",
        "layout": "col-center",
        "x": 1200,
        "y": 1580,
        "wires": []
    },
    {
        "id": "67da67219afe7955",
        "type": "ui_button",
        "z": "420b5823.3c372",
        "name": "",
        "group": "d0c7f134.375fd",
        "order": 2,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Send Test Message",
        "tooltip": "",
        "color": "",
        "bgcolor": "green",
        "icon": "fa-envelope-o",
        "payload": "test",
        "payloadType": "str",
        "topic": "commit",
        "x": 210,
        "y": 1580,
        "wires": [
            [
                "af6bda2f8db8a608"
            ]
        ]
    },
    {
        "id": "af6bda2f8db8a608",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "This is a test notification from eRVin",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "subject",
                "pt": "msg",
                "to": "eRVin Alert!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 1580,
        "wires": [
            [
                "c298688a490eda12",
                "0b9160c84690a33b"
            ]
        ]
    },
    {
        "id": "c298688a490eda12",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "Clear output",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{'accepted': []}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 1580,
        "wires": [
            [
                "1ea9274b45bef59c"
            ]
        ]
    },
    {
        "id": "c3b3e75f9bf2a9b6",
        "type": "exec",
        "z": "420b5823.3c372",
        "command": "vcgencmd measure_temp",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "name": "RPi Temp.",
        "x": 430,
        "y": 1880,
        "wires": [
            [
                "0b710f313869e273"
            ],
            [],
            []
        ]
    },
    {
        "id": "4d7f48b8faa2fcfd",
        "type": "inject",
        "z": "420b5823.3c372",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 1920,
        "wires": [
            [
                "c3b3e75f9bf2a9b6",
                "f05388a05bd7b3a0"
            ]
        ]
    },
    {
        "id": "0b710f313869e273",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "",
        "func": "str = msg.payload\nmsg.payload = str.substring(5,9);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1880,
        "wires": [
            [
                "2e71024ff60cb5cf"
            ]
        ]
    },
    {
        "id": "f05388a05bd7b3a0",
        "type": "exec",
        "z": "420b5823.3c372",
        "command": "top -d 0.5 -b -n2 | grep \"Cpu(s)\"|tail -n 1 | awk '{print $2 + $4}'",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "name": "CPU Load",
        "x": 430,
        "y": 1960,
        "wires": [
            [
                "4d2d735ec390cb5c"
            ],
            [],
            []
        ]
    },
    {
        "id": "2e71024ff60cb5cf",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "97b9ad54.9933e",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "CPU Temp \u00c2\u00b0C",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 760,
        "y": 1880,
        "wires": []
    },
    {
        "id": "4d2d735ec390cb5c",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "97b9ad54.9933e",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "CPU Load %",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 750,
        "y": 1960,
        "wires": []
    },
    {
        "id": "ce1d16c8cc8667dc",
        "type": "file in",
        "z": "420b5823.3c372",
        "name": "Get RPi Model",
        "filename": "/proc/device-tree/model",
        "format": "lines",
        "chunk": false,
        "sendError": false,
        "x": 440,
        "y": 2040,
        "wires": [
            [
                "872efb815d39acc1"
            ]
        ]
    },
    {
        "id": "b407f6edb110203e",
        "type": "inject",
        "z": "420b5823.3c372",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.6",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 2060,
        "wires": [
            [
                "ce1d16c8cc8667dc",
                "39015f60eb06c833"
            ]
        ]
    },
    {
        "id": "872efb815d39acc1",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "97b9ad54.9933e",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "RPi Model",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 750,
        "y": 2040,
        "wires": []
    },
    {
        "id": "2337918af7d72b05",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Get Add'l Raspberry Pi Info",
        "info": "",
        "x": 230,
        "y": 1820,
        "wires": []
    },
    {
        "id": "39015f60eb06c833",
        "type": "exec",
        "z": "420b5823.3c372",
        "command": "lsb_release -a",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "name": "RPi Release",
        "x": 430,
        "y": 2100,
        "wires": [
            [
                "81a4caa3a688f676"
            ],
            [],
            []
        ]
    },
    {
        "id": "6307a33855821ab5",
        "type": "ui_text",
        "z": "420b5823.3c372",
        "group": "97b9ad54.9933e",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Raspian Version",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 860,
        "y": 2100,
        "wires": []
    },
    {
        "id": "81a4caa3a688f676",
        "type": "csv",
        "z": "420b5823.3c372",
        "name": "",
        "sep": "\\t",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "1",
        "strings": true,
        "x": 610,
        "y": 2160,
        "wires": [
            [
                "6f275cd90ba9d116"
            ]
        ]
    },
    {
        "id": "6f275cd90ba9d116",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.0.col2",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 2100,
        "wires": [
            [
                "6307a33855821ab5"
            ]
        ]
    },
    {
        "id": "8fe604ae2157c132",
        "type": "link in",
        "z": "420b5823.3c372",
        "name": "Reboot",
        "links": [
            "8768d5d330022b4d",
            "4939892a7c9f5645"
        ],
        "x": 295,
        "y": 740,
        "wires": [
            [
                "d05c6aebf34388c1"
            ]
        ]
    },
    {
        "id": "c0302db6c6fcb224",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Notes for possible changes",
        "info": "cat /etc/os-release\ngives a resultlike this:\n\npi@raspberrypi:~ $ cat /etc/os-release\nPRETTY_NAME=\"Raspbian GNU/Linux 11 (bullseye)\"\nNAME=\"Raspbian GNU/Linux\"\nVERSION_ID=\"11\"\nVERSION=\"11 (bullseye)\"\nVERSION_CODENAME=bullseye\nID=raspbian\nID_LIKE=debian\nHOME_URL=\"http://www.raspbian.org/\"\nSUPPORT_URL=\"http://www.raspbian.org/RaspbianForums\"\nBUG_REPORT_URL=\"http://www.raspbian.org/RaspbianBugs\"\n\ncat /proc/cpuinfo\ngives a resultlike this:\n\npi@raspberrypi:~ $ cat /proc/cpuinfo\nprocessor\t: 0\nmodel name\t: ARMv7 Processor rev 3 (v7l)\nBogoMIPS\t: 324.00\nFeatures\t: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 \nCPU implementer\t: 0x41\nCPU architecture: 7\nCPU variant\t: 0x0\nCPU part\t: 0xd08\nCPU revision\t: 3\n\nprocessor\t: 1\nmodel name\t: ARMv7 Processor rev 3 (v7l)\nBogoMIPS\t: 324.00\nFeatures\t: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 \nCPU implementer\t: 0x41\nCPU architecture: 7\nCPU variant\t: 0x0\nCPU part\t: 0xd08\nCPU revision\t: 3\n\nprocessor\t: 2\nmodel name\t: ARMv7 Processor rev 3 (v7l)\nBogoMIPS\t: 324.00\nFeatures\t: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 \nCPU implementer\t: 0x41\nCPU architecture: 7\nCPU variant\t: 0x0\nCPU part\t: 0xd08\nCPU revision\t: 3\n\nprocessor\t: 3\nmodel name\t: ARMv7 Processor rev 3 (v7l)\nBogoMIPS\t: 324.00\nFeatures\t: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 \nCPU implementer\t: 0x41\nCPU architecture: 7\nCPU variant\t: 0x0\nCPU part\t: 0xd08\nCPU revision\t: 3\n\nHardware\t: BCM2711\nRevision\t: b03115\nSerial\t\t: 100000005ba91b2f\nModel\t\t: Raspberry Pi 4 Model B Rev 1.5\npi@raspberrypi:~ $ \n\n\n",
        "x": 230,
        "y": 2000,
        "wires": []
    },
    {
        "id": "d92cd9d6aa4918b2",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Record Uptime",
        "info": "",
        "x": 200,
        "y": 980,
        "wires": []
    },
    {
        "id": "452a08d85aaab272",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Reboot/Shutdown Flows",
        "info": "",
        "x": 230,
        "y": 680,
        "wires": []
    },
    {
        "id": "37c399e847318221",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Uptime Parse",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// format check value\n// msg.payload=1431579097;\nvar now = new Date().getTime() / 1000;\nvar diff = Math.floor(now - msg.payload);\nvar minutes;\nvar hours;\nvar days;\nvar years;\nvar outmsg = \"\";\n\nif (diff > 86400) {\n    days = Math.floor(diff / 86400);\n    diff -= days * 86400;\n    if (days > 365) {\n        years = Math.floor(days / 365);\n        days -= (years * 365);\n        outmsg = years + \"y \";\n    }\n    outmsg += days + \"d \";\n}\nif (diff > 3600) {\n    hours = Math.floor(diff / 3600);\n    diff -= hours * 3600;\n    outmsg += hours + \"h \";\n}\n\nif (diff > 60) {\n    minutes = Math.floor(diff / 60);\n    diff = 0;\n    outmsg += minutes + \"m\";\n} else\n    outmsg += \"0m\";\n\nmsg.payload = outmsg;\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 1020,
        "wires": [
            [
                "26fb2afda60e290a"
            ]
        ]
    },
    {
        "id": "72ed80cb1a4bd739",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Notification Settings Email",
        "info": "",
        "x": 1710,
        "y": 180,
        "wires": []
    },
    {
        "id": "4e300c82eedaadea",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Save settings2",
        "func": "// Save the provided key and value to the settings2 DB table, and\n// update the settings2 global context.\nvar key = msg.topic;\nvar value = msg.payload;\n\n// If a JSON string is passed in, parse it and save the resulting\n// object into global context. Otherwise, just save the raw value.\nif (typeof(value) == 'string' && (value.charAt(0) == '[' || value.charAt(0) == '{')) {\n    global.set('settings2.' + key, JSON.parse(value));\n} else {\n    global.set('settings2.' + key, value);\n}\n\nvar newmsg = {};\nnewmsg.topic = 'INSERT OR REPLACE INTO settings2 (key, value) VALUES(?, ?)';\nnewmsg.payload = [key, String(value)];\n\nreturn newmsg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2680,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "fdfdb8565f8126de",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Light List",
        "rules": [
            {
                "t": "set",
                "p": "lights",
                "pt": "msg",
                "to": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "392bda3e61e05fb4",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "name": "onmode",
        "label": "Full Brightness w/Light ON",
        "tooltip": "",
        "group": "abfd1685.b229d8",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "onmode",
        "topicType": "str",
        "style": "",
        "onvalue": "100",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "125",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 700,
        "y": 2480,
        "wires": [
            [
                "92c2d4a26e0d8142"
            ]
        ]
    },
    {
        "id": "10ad36f3f4af26aa",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "group": "abfd1685.b229d8",
        "name": "Lights On Mode",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div>\n<p>\n    By default when turning a dimmable light ON it will revert to the previous brightness level. To force the light to full brightness instead turn this switch ON.\n</p>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 720,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "27ecf19ce9c5856a",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Lights On Mode Option",
        "info": "Lights On Mode Option\nWhen dimmable lights are turned ON, the default brightness will be the previous brightness value. With the switch on the light will revert to full brightness when turned on regardless of the previous brightness level.\nGlobal variable \"onmode\" set to 125 (previous dim level) by default or with switch off. With switch on it will be set to 100 (full brightness).\nThe code for this is located in the `command_dc_dimmer_ervin.js` file",
        "x": 740,
        "y": 2400,
        "wires": []
    },
    {
        "id": "fc66b50953029c52",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "name": "sofasconcemode",
        "label": "Make Sofa/Sconce Dimmable",
        "tooltip": "",
        "group": "f91d30ee.81533",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "sofasconcemode",
        "style": "",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "on",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 730,
        "y": 2620,
        "wires": [
            [
                "74f1b99ba6e427aa"
            ]
        ]
    },
    {
        "id": "d361d15180b0cac3",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "group": "f91d30ee.81533",
        "name": "Sofa/Sconce Mode",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div>\n<p>\n    Entegra combines the sofa overhead task lighting with the sofa sconce mood lighting. The overhead task lights are touch activated pucks and therefore non-dimmable so the entire circuit remains non-dimmable including the sconces. Replace the overhead task pucks with no-touch dimmable versions and this circuit can be made dimmable. To make the Sofa/Sconce circuit dimmable turn this switch ON.\n</p>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 730,
        "y": 2580,
        "wires": [
            []
        ]
    },
    {
        "id": "fa1d207eb7bf70c6",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Sofa/Sconce Dim Mode Option",
        "info": "Sofa/Sconce Dim Mode Option\nThe Sofa/Sconce light circuit on 2017 and newer Entegra coaches is a dimmable circuit, however annoyingly it contains non-dimmable task lighting (overhead pucks) AND dimmable mood lighting (sconces). These SHOULD be on separate circuits.\nThe wall switch is programmed to NOT allow dimming.\nThe overhead pucks are touch activated and for that reason do not work properly when dimmed. If those pucks are replaced with non-touch dimmable versions, the entire circuit can be dimmed.\nThis option provides for that setting.\nThe code for this is located in the main node at the output of the brightness dashboard node.",
        "x": 770,
        "y": 2540,
        "wires": []
    },
    {
        "id": "c2a98124931cf346",
        "type": "inject",
        "z": "420b5823.3c372",
        "name": "Init at start",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 2540,
        "wires": [
            [
                "b717373bd30d4062",
                "362ea4500b27e217",
                "a3258b296e63608e",
                "1adbfdc12ab074fc"
            ]
        ]
    },
    {
        "id": "92c2d4a26e0d8142",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "set onmode",
        "rules": [
            {
                "t": "set",
                "p": "options.onmode",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 2480,
        "wires": [
            []
        ]
    },
    {
        "id": "74f1b99ba6e427aa",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "set sofasconcemode",
        "rules": [
            {
                "t": "set",
                "p": "options.sofasconcemode",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "b717373bd30d4062",
        "type": "link out",
        "z": "420b5823.3c372",
        "name": "Initialize",
        "links": [
            "e67569b6.e632f8",
            "951c79037ed370a2"
        ],
        "x": 475,
        "y": 2680,
        "wires": []
    },
    {
        "id": "362ea4500b27e217",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Init eRVin Global Context",
        "func": "// \u00c2\u00a9 20201212 \u00c2\u00a9 Rob Picchione myERVIN.com\n// \n// Checks for global context variables\n// If they don't exist they are initialized to default or empty object.\n// If they do exist they are left alone.\n// \n// predefine enteredzip\n// This is to support systems that do not have a GPS receiver. If no zip is\n// entered the default will be set to Middlebury, IN.\n// If a GPS receiver is present and has a valid fix it will override \n// the context lat/lon with actual values (see function in Automations tab)\n\nif (typeof global.get('enteredzip') === 'undefined' || global.get('enteredzip') === null) {\n    global.set('enteredzip', \"46540\")\n}\n\n// predefine lon\n// default logitude for Middlebury, IN\nif (typeof global.get('lon') === 'undefined' || global.get('lon') === null) {\n    global.set('lon', -85.698192)\n}\n\n// predefine lat\n// default latitude for Middlebury, IN\nif (typeof global.get('lat') === 'undefined' || global.get('lat') === null) {\n    global.set('lat', 41.680015)\n}\n\n// predefine sunset\n// sets up an empty object in global context for capturing which devices\n// have been selected for actions at sunset. See Automation tab.\n// Note difference between defining and empty object vs an empty array\n// global.set(\"sunset.lights\",[]); //array\n// global.set(\"sunset.lights\", {}); //object\nif (typeof global.get('sunset') === 'undefined' || global.get('sunset') === null) {\n    global.set(\"sunset.lights\", {})\n    global.set(\"sunset.scenes\", {})\n}\n\n// predefine onmode\n// check to see if onmode exists in global context.\n// if not create it and set the value to default 125\n// which will return lights to theeir previous dim value\n// when turned on. If the onmode global already exists get\n// the value. Send the value to the switch node to ensure\n// it is positioned properly\n\nif (typeof global.get('options.onmode') === 'undefined' || global.get('options.onmode') === null) {\n    global.set('options.onmode', 125)\n}\n//var onmode = global.get('options.onmode');\n//var msg1 = {'payload' : onmode};\n//var msg1 = {'payload' : [global.get('onmode')]};\n\n// predefine sofasconcemode\n// Entegra combines the sofa overhead task lighting with the sofa sconce mood \n// lighting. The overhead task lights are touch activated pucks and therefore \n// non-dimmable so the entire circuit remains non-dimmable including the sconces. \n// Replace the overhead task pucks with no-touch dimmable versions and this circuit \n// can be made dimmable. Values are 'on' or 'dim'.\nif (typeof global.get('options.sofasconcemode') === 'undefined' || global.get('options.sofasconcemode') === null) {\n    global.set('options.sofasconcemode', 'on')\n}\n//var sofasconcemode = global.get('sofasconcemode');\n//var msg2 = {'payload' : sofasconcemode};\n//var msg2 = {'payload' : [global.get('sofasconcemode')]};\n\n//return [msg1, msg2];\nreturn null\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 490,
        "y": 2540,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "b034c383667c6fb5",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Initialize eRVin Global Context",
        "info": "",
        "x": 260,
        "y": 2400,
        "wires": []
    },
    {
        "id": "1adbfdc12ab074fc",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "Load State",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "options.onmode",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 2480,
        "wires": [
            [
                "392bda3e61e05fb4"
            ]
        ]
    },
    {
        "id": "a3258b296e63608e",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "Load State",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "options.sofasconcemode",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 2620,
        "wires": [
            [
                "fc66b50953029c52"
            ]
        ]
    },
    {
        "id": "c480f2d3f39ff877",
        "type": "ui_ui_control",
        "z": "420b5823.3c372",
        "d": true,
        "name": "",
        "events": "change",
        "x": 2760,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "ddd59fba5664a352",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Aquahot",
        "label": "Aquahot",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Aquahot\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Aquahot\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2280,
        "y": 2180,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "5379695992ed2477",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Alexa",
        "label": "Alexa",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Alexa\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Alexa\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2270,
        "y": 2340,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "7f540123347aa883",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Status",
        "label": "Status",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Status\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Status\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2270,
        "y": 2260,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "2d6a6aa30ee49652",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Locks",
        "label": "Locks",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Locks\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Locks\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2270,
        "y": 2220,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "cfda0da6ffb4aca0",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Shades",
        "label": "Shades",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Shades\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Shades\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2280,
        "y": 2140,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "d1c855b3f4a2bdda",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Notifications",
        "label": "Notifications",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Notifications\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Notifications\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2290,
        "y": 2380,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "a120d432767d7dac",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "System",
        "label": "System",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"System\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"System\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2280,
        "y": 2420,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "8904771a4fac226d",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "d": true,
        "group": "dd035f6c.5d73e",
        "name": "Show/Hide Tabs",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div><p>Hide unneeded main menu tabs. Turn the switch on to hide the tab.</p></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2780,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "a2d3eb6e6a9ae617",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Exterior/Awnings",
        "label": "Exterior/Awnings",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"Exterior_Awnings\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"Exterior_Awnings\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2310,
        "y": 2520,
        "wires": [
            [
                "c480f2d3f39ff877",
                "3aa10abd4d30bb9d"
            ]
        ]
    },
    {
        "id": "664aad93e935d011",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Aquahot/Water Pump",
        "label": "Aquahot/Water Pump",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"Aquahot_Water_Pump\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"Aquahot_Water_Pump\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2320,
        "y": 2560,
        "wires": [
            [
                "c480f2d3f39ff877",
                "3aa10abd4d30bb9d"
            ]
        ]
    },
    {
        "id": "34508b681de72b90",
        "type": "ui_template",
        "z": "420b5823.3c372",
        "d": true,
        "group": "c2caa18b.132cd",
        "name": "Show/Hide Groups",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div><p>Hide unneeded sub panels (groups). Turn the switch on to hide the group.</p></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2790,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "16b3441fe1ce6233",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Scenes",
        "label": "Scenes",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Scenes\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Scenes\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2280,
        "y": 2100,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "abcb3899ef58d729",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Scenes/How to use Scene Builder",
        "label": "Scenes/How to use Scene Builder",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"Scenes_How_to_use_Scene_Builder\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"Scenes_How_to_use_Scene_Builder\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2360,
        "y": 2640,
        "wires": [
            [
                "c480f2d3f39ff877",
                "3aa10abd4d30bb9d"
            ]
        ]
    },
    {
        "id": "3fef2037bc3fb9dd",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Scenes/Scene Builder",
        "label": "Scenes/Scene Builder",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"Scenes_Scene_Builder\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"Scenes_Scene_Builder\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2320,
        "y": 2600,
        "wires": [
            [
                "c480f2d3f39ff877",
                "3aa10abd4d30bb9d"
            ]
        ]
    },
    {
        "id": "ebfd96ef624f5d5d",
        "type": "comment",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Show/Hide Tabs",
        "info": "",
        "x": 2300,
        "y": 2060,
        "wires": []
    },
    {
        "id": "1c6862c87f224136",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Interior/Memory Master",
        "label": "Interior/Memory Master",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"Interior_Memory_Master\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"Interior_Memory_Master\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2330,
        "y": 2680,
        "wires": [
            [
                "c480f2d3f39ff877",
                "3aa10abd4d30bb9d"
            ]
        ]
    },
    {
        "id": "e5de66a4cb6085d1",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Status/Power",
        "label": "Status/Power",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"Status_Power\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"Status_Power\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2300,
        "y": 2720,
        "wires": [
            [
                "c480f2d3f39ff877",
                "3aa10abd4d30bb9d"
            ]
        ]
    },
    {
        "id": "a9d721b76e79a203",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Status/Generator",
        "label": "Status/Generator",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"Status_Generator\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"Status_Generator\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2310,
        "y": 2760,
        "wires": [
            [
                "c480f2d3f39ff877",
                "3aa10abd4d30bb9d"
            ]
        ]
    },
    {
        "id": "bfc27237248c7c6c",
        "type": "comment",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Show/Hide Groups",
        "info": "",
        "x": 2310,
        "y": 2480,
        "wires": []
    },
    {
        "id": "2c4036284f2e19b1",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Location",
        "label": "Location",
        "tooltip": "",
        "group": "dd035f6c.5d73e",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"tabs\":{\"hide\":\"Location\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"tabs\":{\"show\":\"Location\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2280,
        "y": 2300,
        "wires": [
            [
                "c480f2d3f39ff877",
                "e0967d0beca5a4f3"
            ]
        ]
    },
    {
        "id": "dda3472afdb0d136",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.locks",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2220,
        "wires": [
            [
                "2d6a6aa30ee49652"
            ]
        ]
    },
    {
        "id": "e0967d0beca5a4f3",
        "type": "function",
        "z": "420b5823.3c372",
        "d": true,
        "name": "",
        "func": "// \u00c2\u00a9 20210124 \u00c2\u00a9 Rob Picchione myERVIN.com\n//\n// This function simply writes the status of the show/hide tabes\n// to globel context so state can be reloaded after a restart.\n\nswitch (msg.payload.tabs.hide || msg.payload.tabs.show) {\n    //Enter a case block like the below for each option:\n    case \"Scenes\":\n    global.set('options.tabs.scenes', msg.payload.tabs);\n    break;\n    //Enter a case block like the above for each option:\n    \n    case \"Shades\":\n    global.set('options.tabs.shades', msg.payload.tabs);\n    break;\n    \n    case \"Aquahot\":\n    global.set('options.tabs.aquahot', msg.payload.tabs);\n    break;\n    \n    case \"Locks\":\n    global.set('options.tabs.locks', msg.payload.tabs);\n    break;\n    \n    case \"Status\":\n    global.set('options.tabs.status', msg.payload.tabs);\n    break;\n    \n    case \"Location\":\n    global.set('options.tabs.location', msg.payload.tabs);\n    break;\n    \n    case \"Alexa\":\n    global.set('options.tabs.alexa', msg.payload.tabs);\n    break;\n    \n    case \"Notifications\":\n    global.set('options.tabs.notifications', msg.payload.tabs);\n    break;\n    \n    case \"System\":\n    global.set('options.tabs.system', msg.payload.tabs);\n    break;\n    \n}\n\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2680,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "7e15ea7ed837330f",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.aquahot",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2180,
        "wires": [
            [
                "ddd59fba5664a352"
            ]
        ]
    },
    {
        "id": "d217c26ef4aab0b2",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.shades",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2140,
        "wires": [
            [
                "cfda0da6ffb4aca0"
            ]
        ]
    },
    {
        "id": "e70224610ded8dcd",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.scenes",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2100,
        "wires": [
            [
                "16b3441fe1ce6233"
            ]
        ]
    },
    {
        "id": "2c8dc5338672e150",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.status",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2260,
        "wires": [
            [
                "7f540123347aa883"
            ]
        ]
    },
    {
        "id": "b615e7b29668b9da",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.location",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2300,
        "wires": [
            [
                "2c4036284f2e19b1"
            ]
        ]
    },
    {
        "id": "919b18b1febb44b6",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.alexa",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2340,
        "wires": [
            [
                "5379695992ed2477"
            ]
        ]
    },
    {
        "id": "5fa8df363e9cc40c",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.notifications",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2380,
        "wires": [
            [
                "d1c855b3f4a2bdda"
            ]
        ]
    },
    {
        "id": "32839e1df76d33cf",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.tabs",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.tabs",
                "pt": "msg",
                "to": "options.tabs.system",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2420,
        "wires": [
            [
                "a120d432767d7dac"
            ]
        ]
    },
    {
        "id": "3aa10abd4d30bb9d",
        "type": "function",
        "z": "420b5823.3c372",
        "d": true,
        "name": "",
        "func": "// \u00c2\u00a9 20210124 \u00c2\u00a9 Rob Picchione myERVIN.com\n//\n// This function simply writes the status of the show/hide tabes\n// to global context so state can be reloaded after a restart.\n\nswitch (msg.payload.group.hide || msg.payload.group.show ) {\n    //Enter a case block like the below for each option:\n    case \"Exterior_Awnings\":\n    global.set('options.group.Exterior_Awnings', msg.payload.group);\n    break;\n    //Enter a case block like the above for each option:\n    \n    case \"Aquahot_Water_Pump\":\n    global.set('options.group.Aquahot_Water_Pump', msg.payload.group);\n    break;\n    \n    case \"Scenes_Scene_Builder\":\n    global.set('options.group.Scenes_Scene_Builder', msg.payload.group);\n    break;\n    \n    case \"Scenes_How_to_use_Scene_Builder\":\n    global.set('options.group.Scenes_How_to_use_Scene_Builder', msg.payload.group);\n    break;\n    \n    case \"Interior_Memory_Master\":\n    global.set('options.group.Interior_Memory_Master', msg.payload.group);\n    break;\n    \n    case \"Status_Power\":\n    global.set('options.group.Status_Power', msg.payload.group);\n    break;\n    \n    case \"Status_Generator\":\n    global.set('options.group.Status_Generator', msg.payload.group);\n    break;\n    \n    case \"System_Remote Access - Dataplicity\":\n    global.set('options.group.System_Remote_Access_-_Dataplicity', msg.payload.group);\n    break;\n    \n    case \"System_Remote_Access_-_ngrok\":\n    global.set('options.group.System_Remote_Access_-_ngrok', msg.payload.group);\n    break;\n    \n    case \"System_Update_Configuration_Files\":\n    global.set('options.group.System_Update_Configuration_Files', msg.payload.group);\n    break;\n    \n    case \"System_Install_Configuration_File\":\n    global.set('options.group.System_Install_Configuration_File', msg.payload.group);\n    break;\n    \n    case \"System_Change_System_Password\":\n    global.set('options.group.System_Change_System_Password', msg.payload.group);\n    break;\n\n}\n\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2760,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "8ab39541b294695e",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.Exterior_Awnings",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2520,
        "wires": [
            [
                "a2d3eb6e6a9ae617"
            ]
        ]
    },
    {
        "id": "feacfd7e7276c618",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.Aquahot_Water_Pump",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2560,
        "wires": [
            [
                "664aad93e935d011"
            ]
        ]
    },
    {
        "id": "53aaf7fc83986380",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.Scenes_Scene_Builder",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2600,
        "wires": [
            [
                "3fef2037bc3fb9dd"
            ]
        ]
    },
    {
        "id": "6d7f9d0f27f7b051",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.Scenes_How_to_use_Scene_Builder",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2640,
        "wires": [
            [
                "abcb3899ef58d729"
            ]
        ]
    },
    {
        "id": "4ae470fe6b20750c",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.Interior_Memory_Master",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2680,
        "wires": [
            [
                "1c6862c87f224136"
            ]
        ]
    },
    {
        "id": "81277b510bbfb2fa",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.Status_Power",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2720,
        "wires": [
            [
                "e5de66a4cb6085d1"
            ]
        ]
    },
    {
        "id": "e125077051db5ee6",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.Status_Generator",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2760,
        "wires": [
            [
                "a9d721b76e79a203"
            ]
        ]
    },
    {
        "id": "951c79037ed370a2",
        "type": "link in",
        "z": "420b5823.3c372",
        "d": true,
        "name": "",
        "links": [
            "b717373bd30d4062"
        ],
        "x": 1715,
        "y": 2540,
        "wires": [
            [
                "e70224610ded8dcd",
                "d217c26ef4aab0b2",
                "7e15ea7ed837330f",
                "dda3472afdb0d136",
                "2c8dc5338672e150",
                "b615e7b29668b9da",
                "919b18b1febb44b6",
                "5fa8df363e9cc40c",
                "32839e1df76d33cf",
                "8ab39541b294695e",
                "feacfd7e7276c618",
                "53aaf7fc83986380",
                "6d7f9d0f27f7b051",
                "4ae470fe6b20750c",
                "81277b510bbfb2fa",
                "e125077051db5ee6",
                "6ee597401801f0d9",
                "1967850599122f4c",
                "e479fd22ceaba93d",
                "0c3c91e26214a903",
                "c5230b627cb923a3"
            ]
        ]
    },
    {
        "id": "e3167e5de538a643",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "System/Remote Access - Dataplicity",
        "label": "System/Remote Access - Dataplicity",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"System_Remote_Access_-_Dataplicity\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"System_Remote_Access_-_Dataplicity\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2370,
        "y": 2800,
        "wires": [
            [
                "3aa10abd4d30bb9d",
                "c480f2d3f39ff877"
            ]
        ]
    },
    {
        "id": "6cd815396bf1d6bd",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "System/Remote Access - ngrok",
        "label": "System/Remote Access - ngrok",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 10,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"System_Remote_Access_-_ngrok\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"System_Remote_Access_-_ngrok\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2350,
        "y": 2840,
        "wires": [
            [
                "3aa10abd4d30bb9d",
                "c480f2d3f39ff877"
            ]
        ]
    },
    {
        "id": "ca38e70f40936fac",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "System/Install Configuration File",
        "label": "System/Install Configuration File",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 12,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"System_Install_Configuration_File\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"System_Install_Configuration_File\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2350,
        "y": 2920,
        "wires": [
            [
                "3aa10abd4d30bb9d",
                "c480f2d3f39ff877"
            ]
        ]
    },
    {
        "id": "0869609228ac60ca",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "System/Change System Password",
        "label": "System/Change System Password",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 13,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"System_Change_System_Password\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"System_Change_System_Password\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2360,
        "y": 2960,
        "wires": [
            [
                "3aa10abd4d30bb9d",
                "c480f2d3f39ff877"
            ]
        ]
    },
    {
        "id": "6ee597401801f0d9",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.System_Remote_Access_-_Dataplicity",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2800,
        "wires": [
            [
                "e3167e5de538a643"
            ]
        ]
    },
    {
        "id": "1967850599122f4c",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.System_Remote_Access_-_ngrok",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2840,
        "wires": [
            [
                "6cd815396bf1d6bd"
            ]
        ]
    },
    {
        "id": "e479fd22ceaba93d",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.System_Install_Configuration_Files",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2920,
        "wires": [
            [
                "ca38e70f40936fac"
            ]
        ]
    },
    {
        "id": "0c3c91e26214a903",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.System_Change_System_Password",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2960,
        "wires": [
            [
                "0869609228ac60ca"
            ]
        ]
    },
    {
        "id": "b1257842bd7656b8",
        "type": "ui_switch",
        "z": "420b5823.3c372",
        "d": true,
        "name": "System/Update Configuration Files",
        "label": "System/Update Configuration Files",
        "tooltip": "",
        "group": "c2caa18b.132cd",
        "order": 11,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "[]",
        "style": "",
        "onvalue": "{\"group\":{\"hide\":\"System_Update_Configuration_Files\"}}",
        "onvalueType": "json",
        "onicon": "",
        "oncolor": "",
        "offvalue": "{\"group\":{\"show\":\"System_Update_Configuration_Files\"}}",
        "offvalueType": "json",
        "officon": "",
        "offcolor": "",
        "x": 2360,
        "y": 2880,
        "wires": [
            [
                "3aa10abd4d30bb9d",
                "c480f2d3f39ff877"
            ]
        ]
    },
    {
        "id": "c5230b627cb923a3",
        "type": "change",
        "z": "420b5823.3c372",
        "d": true,
        "name": "Load State",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.group",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.group",
                "pt": "msg",
                "to": "options.group.System_Update_Configuration_Files",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2090,
        "y": 2880,
        "wires": [
            [
                "b1257842bd7656b8"
            ]
        ]
    },
    {
        "id": "7b39630358404219",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "network_info",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Monitor NETWORK/*/* messages. Save the resulting data to\n// global context, and pass the full context to the dashboard.\n\n// 20250101 Modified myervin.com to improve reliability of dashboard display.\n// Due to the rbe node if there are no changes to the data it may not get sent\n// to the dashboard even at startup.\n// This function only writes the network status to global context.\n// A separate part of the flow retrieves the data periodically from global \n// context and writes it to the dashboard.\n\nconst topics = msg.topic.split('/');\nif (topics.length < 3) {\n    return null;\n}\n\nconst topic = topics[1] + '/' + topics[2];\n\n// Save the new value to global status\nglobal.set('status.network.' + topics[1] + '.' + topics[2], msg.payload);\nconst network = global.get('status').network;\n\n// Create a package of information for the dashboard template\nvar message = '';\n\nif (!network || !network.WPA || network.WPA.IP === '') {\n    message = \"eRVin is not connected to WiFi.\";\n} else {\n    message = \"eRVin is connected to the WiFi network listed below.\";\n}\nglobal.set('status.network.message', message);\n// The values that will be displayed are in the `data` and other parameters,\n// but a payload is also always returned so the RBE node can determine when\n// the status has changed.\nconst rbe = message + network.WPA.SSID + network.WPA.IP + network.WPA.MAC + network.WPA.STATE + network.WPA.QUALITY + network.AP.SSID + network.AP.IP\n\nreturn { payload: rbe, data: network, message: message };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 580,
        "wires": [
            [
                "237682e0930efbb5"
            ]
        ]
    },
    {
        "id": "3de4d2a193da2a54",
        "type": "inject",
        "z": "420b5823.3c372",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "System_Notify",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.663",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 250,
        "y": 140,
        "wires": [
            [
                "e8fbfe8d8e3860ea"
            ]
        ]
    },
    {
        "id": "8fdda549534b8fbc",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 210,
        "y": 100,
        "wires": []
    },
    {
        "id": "e8fbfe8d8e3860ea",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "348ecb1f7225035a",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Notifications v0.66",
        "info": "Cleans up and improves code in the notification_delivery function node.\n\nAdds timestamp to each message - if message delivery is delayed,\nthe receiver will still know exactly when the event occured.",
        "x": 210,
        "y": 1180,
        "wires": []
    },
    {
        "id": "b9ca318d9baf7075",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "eRVin global init",
        "func": "\n// next three global.set are from the original coachproxy init.\n// To track form fields filled in by users\nglobal.set('form', {});\nglobal.set('form.preset', {});\n// Legacy objects\nglobal.set(['ap', 'ign'], [{}, {}]);\n\n\n// Define multiple global root categories and their default values\n// If the global value already exists do not replace it.\nconst globalDefaults = {\n    location: {\n        lat: '41.680015',\n        lon: '-85.698192',\n        locsource: 'Default',\n        track: null\n    },\n    features: {\n        default: {\n            Ignition: 0,\n            GeneratorStatus: 1,\n            ParkBrake: 0,\n            lpg: 'false',\n            tstats: 'false',\n            exttemp: 'false',\n            gencontrol: 'true',\n            ats: 'true',\n            batt_chassis: 'true',\n            ceilfan: 'false',\n            aquahot: 'true',\n            shades_interior: 'false',\n            frontstat: 'false',\n            midstat: 'false',\n            rearstat: 'false'\n        }\n    },\n    status: {\n        weather: {\n            openweathermap: {\n            tempf: null,\n            }\n        }\n    },\n    settings2: {\n        notify_email1: null,\n        notify_email2: null,\n        pushover_key: null,\n        remote_username: null,\n        remote_subdomain: null,\n        smtp_host: null,\n        smtp_port: \"465\",\n        smtp_user: null,\n        smtp_password: null\n    },\n    settings: {\n        time: {\n            srcaddr: \"99\",\n            timezone: \"-6\"\n        },\n        scenes: {\n            scenename: null,\n            scenepath: \"/coachproxy/node-red/scenes/\",\n            scenelist: null,\n            scenetemp: null\n        },\n        tanksense: {\n            srcaddr: null\n        },\n        weather: {\n            owmApiKey: null,\n            openweathermap: {\n                tempf: null,\n            }    \n        },\n        generator: {\n            status: 'off',\n            startid: null,\n            stopid: null,\n            prime_time: 0,\n            crank_time: 21,\n            control: \"Firefly\"\n        },\n        tankprotect: {\n            shorevalve_id: 48,\n            freshfill_delay: 10\n        },\n        burnercontrol: {\n            ontemp: null,\n            instance: null,\n            autoswitch: \"off\",\n            tempsource: \"weather.openweathermap.tempf\",\n            tempval: null\n        },\n        locks: {\n            controller: \"entegra\",\n            entry: {\n                lock_instance: 89,\n                unlock_instance: 86\n            },\n            cargo: {\n                lock_instance: 85,\n                unlock_instance: 88\n            }\n        }\n    }\n};\n\n// Function to initialize nested properties\nfunction initializeNestedObject(target, defaults) {\n    Object.keys(defaults).forEach(key => {\n        if (typeof defaults[key] === 'object' && defaults[key] !== null) {\n            // Ensure the object exists before recursion\n            target[key] = target[key] || {};\n            initializeNestedObject(target[key], defaults[key]);\n        } else {\n            // Set default value only if undefined\n            if (target[key] === undefined) {\n                target[key] = defaults[key];\n            }\n        }\n    });\n}\n\n// Function to initialize global categories and nested objects\nfunction initializeGlobalCategories(defaults) {\n    Object.keys(defaults).forEach(category => {\n        let existingValue = global.get(category) || {};  // Get existing value or empty object\n        initializeNestedObject(existingValue, defaults[category]); // Initialize missing values\n        global.set(category, existingValue); // Save back to global context\n    });\n}\n\n// Run the initialization\ninitializeGlobalCategories(globalDefaults);\n\n// Refresh scenetemp from scenelist\nglobal.set(\"settings.scenes.scenetemp\", JSON.parse(JSON.stringify(global.get(\"settings.scenes.scenelist\") || {})));\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 300,
        "wires": [
            [
                "7037e04933a1549c"
            ]
        ]
    },
    {
        "id": "8172b5e4673356bc",
        "type": "inject",
        "z": "420b5823.3c372",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1140,
        "y": 340,
        "wires": [
            [
                "b9ca318d9baf7075"
            ]
        ]
    },
    {
        "id": "0b9160c84690a33b",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "notification_delivery",
        "func": "// \u00c2\u00a92024 Rob Picchione myervin.com\n// Notable rewrite to adapt to eRVin and streamline code.\n//\n// Take a notification message as input and deliver it via a variety of methods based \n// on user settings.\n\nlet generic_msg = msg;\nlet push_msg = null;\nlet email_msg = null;\n\n// Remove existing topic, no need to pass a null\ndelete msg.topic;\n\n// Pushover message\nlet pushover_key = global.get('settings2.pushover_key');\nlet pushover_token = global.get('settings2.pushover_token'); // Avoid hardcoded token\n\nif (pushover_key && pushover_token) {\n    push_msg = {\n        headers: { \"content-type\": \"application/x-www-form-urlencoded\" },\n        payload: {\n            user: pushover_key,\n            token: pushover_token, //moved to global context\n            title: msg.subject,\n            message: msg.payload,\n        },\n    };\n}\n\n// Get current timestamp\nlet now = new Date();\nlet timestamp = now.toLocaleString(); // Adjust format as needed\n\n// Email message\nlet smtp_host = global.get('settings2.smtp_host');\nlet smtp_port = global.get('settings2.smtp_port');\nlet smtp_user = global.get('settings2.smtp_user');\nlet smtp_pass = global.get('settings2.smtp_password');\n\nlet transport = {\n    host: smtp_host,\n    port: smtp_port,\n    auth: {\n        user: smtp_user,\n        pass: smtp_pass\n    }\n};\n\nlet email1 = global.get('settings2.notify_email1');\nlet email2 = global.get('settings2.notify_email2');\n\n// Ensure email1 is set before email2\nif (email2 && !email1) {\n    email1 = email2;\n    email2 = null;\n}\n\n// Define recipients dynamically\nlet recipients = [];\nif (email1) recipients.push(email1);\nif (email2) recipients.push(email2);\n\nif (recipients.length > 0) {\n    let options = {\n        from: smtp_user,\n        to: recipients.join(','),\n        subject: msg.subject,\n        text: `Time Sent: ${timestamp}\\n\\n${msg.payload}`\n    };\n\n    email_msg = { 'mail': { 'transport': transport, 'options': options } };\n}\n\n// Deliver messages\nreturn [msg, push_msg || null, email_msg || null];\n",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1380,
        "wires": [
            [
                "7896ae37c059402f"
            ],
            [],
            [
                "2643d93cb6e96a99"
            ]
        ]
    },
    {
        "id": "f04b344c4a3ce6a4",
        "type": "change",
        "z": "420b5823.3c372",
        "name": "settings2.notify_email1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext('settings2.notify_email1')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "form.notify_email1",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1800,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "fce79ed27d90a742",
        "type": "function",
        "z": "420b5823.3c372",
        "d": true,
        "name": "form field save",
        "func": "global.set('form.' + msg.topic, msg.payload);\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2580,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "dc8b5d301f79c296",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "notification menu options",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Populate the \"Notification Type\" menu with appropriate options\n// based on the user's choice of coach and options.\n\n//const configs = global.get('configs');\nconst features = global.get('features.default') || [];\nconst ac_source = global.get('status').power.ac_source;\n\nlet options = [];\n\n// Tanks\noptions.push('Tank: Fresh');\noptions.push('Tank: Grey');\noptions.push('Tank: Black');\nif (features.lpg === 'true') {\n    options.push('Tank: LPG');\n}\n\n// Batteries\noptions.push('Batt: House');\nif (features.batt_chassis === 'true') {\n    options.push('Batt: Chassis');\n}\n\n// Temps\nif (features.frontstat === 'true') {\n    options.push('Temp: Front');\n};\nif (features.midtstat === 'true') {\n    options.push('Temp: Mid');\n};\nif (features.rearstat === 'true') {\n    options.push('Temp: Rear');\n};\nif (features.exttemp === 'true') {\n    options.push('Temp: Wet Bay');\n};\n\n\n\n// Toggles\n\nif (ac_source) {\n    options.push('AC Power');\n}\nif (features.Ignition == 1) {\n    options.push('Ignition');\n}\nif (features.GeneratorStatus == 1) {\n    options.push('Generator');\n}\n\nmsg = { options: options, payload: null, topic: null };\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1770,
        "y": 960,
        "wires": [
            [
                "3f4fb3d48dfab11d"
            ]
        ]
    },
    {
        "id": "cc763832ce8e6262",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Notification Value Monitor",
        "func": "// \u00c2\u00a92024 Rob Picchione myervin.com\n// Major breaking changes and rewrite to adapt to eRVin and streamline code.\n//\n// Original version Copyright (C) 2019 Wandertech LLC\n//\n// Monitor MQTT topics for values that are outside the desired range (e.g.\n// battery voltage below 11.8 V). To prevent frequent notifications around\n// alarm thresholds (e.g. voltage may fluctuate from 11.7 to 11.8 for a while),\n// a value must be out of range (faulted) for a certain time before an alarm\n// is sent (triggered), and then must be within the valid range (recovering)\n// for a certain time before the alarm is considered cleared.\n//\n//           good value                           bad value\n//      +------------------+                 +------------------------+\n//      |                  |    >30 sec      |                        |\n//      v      bad         |      bad        v         good           |\n// +---------+ value +---------+ value  +-----------+  value   +------------+\n// | cleared |------>| faulted |------->| triggered |--------->| recovering |\n// +---------+       +---------+        +-----------+          +------------+\n//    ^   ^                                  |              good value|\n//    |   |             >24 hours            |                  >5 min|\n//    |   +----------------------------------+                        |\n//    +---------------------------------------------------------------+\n\nconst topics = {\n    'Tank: Fresh': 'CP/TANK_STATUS/Fresh',\n    'Tank: Grey': 'CP/TANK_STATUS/Grey',\n    'Tank: Black': 'CP/TANK_STATUS/Black',\n    'Temp: Front': 'CP/THERMISTOR_TEMP/Front',\n    'Temp: Mid': 'CP/THERMISTOR_TEMP/Mid',\n    'Temp: Rear': 'CP/THERMISTOR_TEMP/Rear',\n    'Temp: Wet Bay': 'CP/THERMISTOR_TEMP/Wet Bay',\n    'Batt: House': 'CP/BATTERY_VOLTS/House',\n    'Batt: Chassis': 'CP/BATTERY_VOLTS/Chassis',\n};\n\n// Timeout thresholds\nconst FAULT_TIMEOUT = 30 * 1000;       // 30 seconds before alarming\nconst RECOVER_TIMEOUT = 5 * 60 * 1000; // 5 minutes before clearing alarm\nconst TRIGGER_TIMEOUT = 24 * 60 * 60 * 1000; // Reset alarm after 24 hours\n\n// Get global notification settings\nconst notifs = global.get('settings2')['notify_rules'] || [];\nconst ignition = global.get('status').chassis.ignition || 'off';\n\nlet messages = [];\n\n// Find the notification rule that matches the incoming msg.topic\nlet matchingNotif = notifs.find(n => topics[n.notif_type] === msg.topic);\n\nif (matchingNotif) {\n    let status = matchingNotif.notif_status || 'cleared';\n\n    // Ignore tank sensors when ignition is ON\n    if (msg.topic.includes(\"TANK\") && ignition === 'on') {\n        return null;  // Stop processing if the tank alert should be ignored\n    }\n\n    const currentValue = parseFloat(msg.payload.level || msg.payload); //handles tank value by converting to msg.payload\n    const threshold = parseFloat(matchingNotif.notif_value);\n\n    // Determine if value is out of range\n    const outofrange = (matchingNotif.notif_test === 'is below' && currentValue < threshold) ||\n        (matchingNotif.notif_test === 'is above' && currentValue > threshold);\n\n    switch (status) {\n        case 'cleared':\n            if (outofrange) {\n                status = 'faulted';\n                matchingNotif.fault_time = Date.now();\n            }\n            break;\n\n        case 'faulted':\n            if (!outofrange) {\n                status = 'cleared';\n            } else if (Date.now() - matchingNotif.fault_time > FAULT_TIMEOUT) {\n                status = 'triggered';\n                matchingNotif.trigger_time = Date.now();\n\n                let message = `${matchingNotif.notif_type} is currently ${currentValue}${matchingNotif.notif_unit}, which `;\n                message += `${matchingNotif.notif_test} your threshold of ${matchingNotif.notif_value}${matchingNotif.notif_unit}.\\n`;\n\n                messages.push({\n                    subject: `CoachProxy ALERT for ${matchingNotif.notif_type}`,\n                    payload: message\n                });\n            }\n            break;\n\n        case 'triggered':\n            if (!outofrange) {\n                status = 'recovering';\n                matchingNotif.recover_time = Date.now();\n            } else if (Date.now() - matchingNotif.trigger_time > TRIGGER_TIMEOUT) {\n                status = 'cleared';\n            }\n            break;\n\n        case 'recovering':\n            if (outofrange) {\n                status = 'triggered';\n                matchingNotif.trigger_time = Date.now();\n            } else if (Date.now() - matchingNotif.recover_time > RECOVER_TIMEOUT) {\n                status = 'cleared';\n            }\n            break;\n    }\n\n    matchingNotif.notif_status = status;\n}\n\nreturn messages.length > 0 ? messages : null;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 1300,
        "wires": [
            [
                "0b9160c84690a33b"
            ]
        ]
    },
    {
        "id": "2734c0ab01f6a4fe",
        "type": "http request",
        "z": "420b5823.3c372",
        "name": "Get list of flow tabs",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/flows",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 450,
        "y": 300,
        "wires": [
            [
                "9edc8de318987646"
            ]
        ]
    },
    {
        "id": "9edc8de318987646",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "Load List of Light Buttons",
        "func": "// v0.66\n// \u00c2\u00a9 2025 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\n// This function and subsequent functions replaces all the original coachproxy flows\n// and eliminates the necessity of the SQL database.\n\n// This flow is for initialization of the Light and other DC_DIMMER switches. It scans \n// the entire flow and returns all TABS. Then it finds the Lights Tab and filters out\n// all buttons. It then bulids a list of all lights and their status in status.lights\n\nconst nodes = msg.payload; // Parsed JSON response from Admin API\nconst tabName = \"Lights\"; // The name of the tab you want to filter\n\n// Ensure global status object exists\nvar status = global.get(\"status\") || {};\nstatus.lights = status.lights || {}; // Ensure lights object exists\n\n// Find the tab with the matching name\nconst tab = nodes.find((node) => node.type === \"tab\" && node.label === tabName);\n\nif (!tab) {\n    return { payload: `Tab \"${tabName}\" not found.` };\n}\n\nconst tabID = tab.id;\n\n// Filter the ui_switch nodes within this tab, excluding disabled ones\nnodes\n    .filter((node) => node.type === \"ui_switch\" && node.z === tabID && !node.d)\n    .forEach((node) => {\n        const topic = node.topic || \"No Topic\";\n\n        // Extract instance and clean name if topic follows the format '5_state_Name'\n        const match = topic.match(/^(\\d+)_state_(.+)$/); // Regex to match \"5_state_Sofa Sconce\"\n        const instance = match ? match[1] : null;\n        const name = match ? match[2] : node.name || \"Unnamed Switch\";\n\n        if (instance) {\n            // Ensure the instance exists and has default values\n            if (!status.lights[instance]) {\n                status.lights[instance] = { state: \"off\", brightness: 0 }; // Default state\n            }\n            status.lights[instance].name = name.trim(); // Add name to the instance\n        }\n    });\n\n// Save the updated status back to global context\nglobal.set(\"status\", status);\n\nreturn { payload: status.lights };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 300,
        "wires": [
            [
                "b9ca318d9baf7075"
            ]
        ]
    },
    {
        "id": "07f1921f4686483b",
        "type": "status",
        "z": "420b5823.3c372",
        "name": "",
        "scope": [
            "2643d93cb6e96a99"
        ],
        "x": 180,
        "y": 1700,
        "wires": [
            [
                "863dcd8198bb41e3"
            ]
        ]
    },
    {
        "id": "863dcd8198bb41e3",
        "type": "function",
        "z": "420b5823.3c372",
        "name": "error or fill=red",
        "func": "if (msg.status.text.includes(\"error\") || msg.status.fill === \"red\") {\n    msg.payload = \"Email sending failed: \" + msg.status.text;\n    return msg;\n}\nreturn null;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1700,
        "wires": [
            [
                "1ddee140a1e54258"
            ]
        ]
    },
    {
        "id": "1ddee140a1e54258",
        "type": "ui_toast",
        "z": "420b5823.3c372",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Error",
        "name": "Error",
        "x": 630,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "f9ec0cff40721abd",
        "type": "comment",
        "z": "420b5823.3c372",
        "name": "Catch Sendmail Error - Catch node does not work",
        "info": "",
        "x": 300,
        "y": 1660,
        "wires": []
    },
    {
        "id": "d04e0e71.972ce",
        "type": "mqtt in",
        "z": "477cac19.6a9e64",
        "name": "",
        "topic": "RVC/CHASSIS_MOBILITY_STATUS",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 220,
        "y": 300,
        "wires": [
            [
                "1fe0039b2bb8b848"
            ]
        ]
    },
    {
        "id": "3f6d5ecb.388b62",
        "type": "mqtt out",
        "z": "477cac19.6a9e64",
        "name": "CP/IGNITION or CP/PARKBRAKE",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 940,
        "y": 300,
        "wires": []
    },
    {
        "id": "c72fb0d.22e175",
        "type": "mqtt in",
        "z": "477cac19.6a9e64",
        "name": "",
        "topic": "RVC/DC_SOURCE_STATUS_SPYDER/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 230,
        "y": 580,
        "wires": [
            [
                "f3f48ab4.40e4c8"
            ]
        ]
    },
    {
        "id": "a59c49cb.b37798",
        "type": "mqtt out",
        "z": "477cac19.6a9e64",
        "name": "CP/BATTERY_VOLTS/BatteryName",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 940,
        "y": 560,
        "wires": []
    },
    {
        "id": "f3f48ab4.40e4c8",
        "type": "function",
        "z": "477cac19.6a9e64",
        "name": "decode battery",
        "func": "// Newer coaches send DC_SOURCE_STATUS_SPYDER in addition to the\n// normal DC_SOURCE_STATUS. In these cases, ignore the legacy values.\n\nlet newmsg = {};\n\nconst labels = ['N/A', 'House', 'Chassis', 'House2'];\nnewmsg.topic = 'CP/BATTERY_VOLTS/' + labels[msg.payload.instance];\nnewmsg.payload = msg.payload['dc voltage'];\n\nif ((msg.topic).includes('SPYDER')) {\n    // Remember to only parse _SPYDER messages from now on\n    context.set('use_spyder', true);\n} else {\n    // If _SPYDER messages are used, ignore legacy messages\n    if (context.get('use_spyder')) {\n        newmsg = null;\n    }\n}\n\nmsg.topic = null;  // Overwrite incoming msg topic\nreturn newmsg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 660,
        "y": 560,
        "wires": [
            [
                "a59c49cb.b37798"
            ]
        ]
    },
    {
        "id": "94a20186.0131e",
        "type": "mqtt in",
        "z": "477cac19.6a9e64",
        "name": "",
        "topic": "RVC/DC_SOURCE_STATUS/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 260,
        "y": 540,
        "wires": [
            [
                "f3f48ab4.40e4c8"
            ]
        ]
    },
    {
        "id": "75cc5225.c008dc",
        "type": "mqtt in",
        "z": "477cac19.6a9e64",
        "name": "",
        "topic": "RVC/THERMOSTAT_AMBIENT_STATUS/#",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 240,
        "y": 700,
        "wires": [
            [
                "e077ae80.1b7e9"
            ]
        ]
    },
    {
        "id": "e077ae80.1b7e9",
        "type": "function",
        "z": "477cac19.6a9e64",
        "name": "decode ambient temp",
        "func": "const first_zone = global.get('settings2').tstat_first_zone || 0;\nconst zone_names = {\n  0: 'Front',\n  1: 'Mid',\n  2: 'Rear',\n  4: 'Wet Bay',\n  5: 'Generator Bay'\n};\n\nconst zone = parseInt(msg.payload.instance) - first_zone;\n\nlet newmsg = {};\nif (zone in zone_names) {\n  newmsg.topic = 'CP/THERMISTOR_TEMP/' + zone_names[zone];\n  newmsg.payload = msg.payload['ambient temp F'];\n\n  return newmsg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 680,
        "y": 700,
        "wires": [
            [
                "3e5bd4e9.96126c"
            ]
        ]
    },
    {
        "id": "3e5bd4e9.96126c",
        "type": "mqtt out",
        "z": "477cac19.6a9e64",
        "name": "CP/THERMISTOR_TEMP/ZoneName",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 970,
        "y": 700,
        "wires": []
    },
    {
        "id": "80d680be.7453e",
        "type": "comment",
        "z": "477cac19.6a9e64",
        "name": "Republish battery status in simple form",
        "info": "",
        "x": 230,
        "y": 500,
        "wires": []
    },
    {
        "id": "447f35ec.e5ed8c",
        "type": "comment",
        "z": "477cac19.6a9e64",
        "name": "Republish thermister status in simple form",
        "info": "",
        "x": 240,
        "y": 660,
        "wires": []
    },
    {
        "id": "6b55576d.e2cef8",
        "type": "mqtt in",
        "z": "477cac19.6a9e64",
        "name": "",
        "topic": "RVC/ATS_AC_STATUS_1/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 190,
        "y": 820,
        "wires": [
            [
                "caa1f759.57aeb8"
            ]
        ]
    },
    {
        "id": "caa1f759.57aeb8",
        "type": "function",
        "z": "477cac19.6a9e64",
        "name": "decode power status",
        "func": "// Output 1: name of current ATS power source\n\nconst genset_status = global.get('status').power.generator_state || 'stopped';\n\n// If the rmsc value is not numeric (e.g. 'n/a'), then\n// the ATS is not receiving any external power.\nif (isNaN(parseFloat(msg.payload['rms current']))) {\n    msg.payload = 'None';\n} else if (genset_status == 'running') {\n    msg.payload = 'Generator';\n} else {\n    msg.payload = 'Shore';\n}\n\nglobal.set('status.power.ac_source', msg.payload);\n\nmsg.type = 'acsource';\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 680,
        "y": 820,
        "wires": [
            [
                "12c2cbaa.fb05d4"
            ]
        ]
    },
    {
        "id": "12c2cbaa.fb05d4",
        "type": "mqtt out",
        "z": "477cac19.6a9e64",
        "name": "",
        "topic": "CP/AC_SOURCE",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 910,
        "y": 820,
        "wires": []
    },
    {
        "id": "c1547432.acf568",
        "type": "comment",
        "z": "477cac19.6a9e64",
        "name": "Republish shore power status in simple form",
        "info": "",
        "x": 250,
        "y": 780,
        "wires": []
    },
    {
        "id": "16624199.59e1ee",
        "type": "comment",
        "z": "477cac19.6a9e64",
        "name": "Determine parking brake and ignition status and republish it",
        "info": "",
        "x": 290,
        "y": 260,
        "wires": []
    },
    {
        "id": "f67bf2a939597850",
        "type": "function",
        "z": "477cac19.6a9e64",
        "d": true,
        "name": "decode chassis mobility ignition",
        "func": "// \u00c2\u00a92024 Rob Picchione myervin.com\n//\n// The below original coachpeoxy function is replaced by the change node above,\n// The original coachproxy function doesn't\n// seem to follow the PGN for CHASSIS_MOBILITY_STATUS.\n// Byte 0 for that PGN is part of the RPM value.\n// As per the spec, byte 5 contains the ignition status in bits 0-1,\n// and the park brake status in bits 2-3.\n//-------------------------------------------------------------------------\n// Copyright (C) 2019 Wandertech LLC\n//\n// Newer coaches (2018+) report two different sets of\n// chassis statuses, identified by F1 or F2 in Byte 0.\n// The F1 message includes the ignition status, and the\n// F2 message includes the parking brake status.\n//\n// Older coaches always have 00 in Byte 0 and only report\n// ignition status.\n/*\nconst instance = msg.payload.data.substring(0, 2);\nmsg.topic = null; // Required to block pass-through topic\nlet newmsg = {};\n\nif (instance == 'F1' || instance == '00') {\n    newmsg.topic = 'CP/IGNITION';\n    newmsg.payload = msg.payload['ignition switch status'] == '00' ? 'off' : 'on';\n    global.set('status.chassis.ignition', newmsg.payload);\n} else if (instance == 'F2') {\n    newmsg.topic = 'CP/PARKBRAKE';\n    newmsg.payload = msg.payload['park brake status'] == '00' ? 'off' : 'on';\n    global.set('status.chassis.parkbrake', newmsg.payload);\n}\n\nreturn newmsg;\n*/",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "1fe0039b2bb8b848",
        "type": "change",
        "z": "477cac19.6a9e64",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "CP/IGNITION",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "status.chassis.ignition",
                "pt": "global",
                "to": "payload[\"ignition switch status definition\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[\"ignition switch status definition\"]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 300,
        "wires": [
            [
                "3f6d5ecb.388b62"
            ]
        ]
    },
    {
        "id": "c516567f311f9722",
        "type": "inject",
        "z": "477cac19.6a9e64",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Logic",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 140,
        "wires": [
            [
                "30102f8b0fd24a15"
            ]
        ]
    },
    {
        "id": "35cff19125b6d861",
        "type": "comment",
        "z": "477cac19.6a9e64",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 150,
        "y": 100,
        "wires": []
    },
    {
        "id": "30102f8b0fd24a15",
        "type": "change",
        "z": "477cac19.6a9e64",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "a88e3c59eda8f0be",
        "type": "exec",
        "z": "144c673ecddfa485",
        "command": "/coachproxy/rv-c/dc_dimmer.pl ",
        "addpay": true,
        "append": "",
        "useSpawn": "",
        "name": "",
        "x": 2190,
        "y": 1560,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "32e78c8668c9c8f4",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "Panel Brightness",
        "label": "",
        "tooltip": "",
        "group": "d361ec81.7d08a",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "Panel Lights",
        "min": "1",
        "max": "100",
        "step": "",
        "x": 1030,
        "y": 340,
        "wires": [
            [
                "0e1359870f286c96"
            ]
        ]
    },
    {
        "id": "4dadc37ed6e20b8a",
        "type": "exec",
        "z": "144c673ecddfa485",
        "command": "/coachproxy/rv-c/panel_lights_entegra.pl",
        "addpay": true,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "name": "",
        "x": 1640,
        "y": 320,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "665ac90a1215af27",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "Panels",
        "label": "Panels",
        "tooltip": "",
        "group": "d361ec81.7d08a",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Panel Lights",
        "onvalue": "100",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 990,
        "y": 300,
        "wires": [
            [
                "0e1359870f286c96"
            ]
        ]
    },
    {
        "id": "fa461c081d9db11e",
        "type": "ui_button",
        "z": "144c673ecddfa485",
        "name": "Mem On",
        "group": "d944623c.5b46b8",
        "order": 2,
        "width": "2",
        "height": 1,
        "passthru": false,
        "label": "Mem On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "str",
        "topic": "master",
        "topicType": "str",
        "x": 2040,
        "y": 340,
        "wires": [
            [
                "b32e4016c319da11"
            ]
        ]
    },
    {
        "id": "6f62218ac5dbc10a",
        "type": "ui_button",
        "z": "144c673ecddfa485",
        "name": "Mem Off",
        "group": "d944623c.5b46b8",
        "order": 1,
        "width": "2",
        "height": 1,
        "passthru": false,
        "label": "Mem Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "0",
        "payloadType": "str",
        "topic": "master",
        "topicType": "str",
        "x": 2041,
        "y": 381,
        "wires": [
            [
                "b32e4016c319da11"
            ]
        ]
    },
    {
        "id": "bbf5bb1c5ee52cdc",
        "type": "ui_button",
        "z": "144c673ecddfa485",
        "name": "All On",
        "group": "d944623c.5b46b8",
        "order": 3,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "All On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "2",
        "payloadType": "str",
        "topic": "master",
        "topicType": "str",
        "x": 2030.2857360839844,
        "y": 299.5712890625,
        "wires": [
            [
                "b32e4016c319da11"
            ]
        ]
    },
    {
        "id": "ab6cdfb3bd983318",
        "type": "ui_template",
        "z": "144c673ecddfa485",
        "group": "ac76b24ed15e9598",
        "name": "Custom CSS",
        "order": 26,
        "width": 0,
        "height": 0,
        "format": "<link rel=\"stylesheet\" href=\"css/font-awesome-animation.min.css\">\n<style type=\"text/css\">button { touch-action: manipulation; }</style>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "global",
        "className": "",
        "x": 1270,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "756fc691a3ae9370",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/GENERIC_INDICATOR_COMMAND/255",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 310,
        "y": 320,
        "wires": [
            [
                "15dd6b77bb98fb76"
            ]
        ]
    },
    {
        "id": "ac370e23cdcaee09",
        "type": "change",
        "z": "144c673ecddfa485",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.brightness > 0 ? 100 : 0",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 300,
        "wires": [
            [
                "665ac90a1215af27",
                "12d596a980a2283b"
            ]
        ]
    },
    {
        "id": "dc5eb72d6b7e9b0f",
        "type": "change",
        "z": "144c673ecddfa485",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.brightness",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 340,
        "wires": [
            [
                "32e78c8668c9c8f4"
            ]
        ]
    },
    {
        "id": "0e1359870f286c96",
        "type": "template",
        "z": "144c673ecddfa485",
        "name": "Add group id",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "126 {{payload}}",
        "output": "str",
        "x": 1290,
        "y": 320,
        "wires": [
            [
                "4dadc37ed6e20b8a"
            ]
        ]
    },
    {
        "id": "babe93b12e5c393a",
        "type": "change",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "brightness",
                "pt": "msg",
                "to": "payload['operating status (brightness)']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "brightness > 0 ? 'on' : 'off'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 4940,
        "wires": [
            [
                "2faba75e579bc396"
            ]
        ]
    },
    {
        "id": "15dd6b77bb98fb76",
        "type": "switch",
        "z": "144c673ecddfa485",
        "name": "Pass Group 126",
        "property": "payload.group",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "01111110",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 380,
        "wires": [
            [
                "33d6f65b89802ba6"
            ]
        ]
    },
    {
        "id": "2faba75e579bc396",
        "type": "rbe",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 750,
        "y": 4940,
        "wires": [
            []
        ]
    },
    {
        "id": "8452c3ae27508ada",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "command_dc_dimmer_ervin.js",
        "filename": ".node-red/js/command_dc_dimmer_ervin.js",
        "reloadfile": false,
        "outputs": 1,
        "x": 1830,
        "y": 1560,
        "wires": [
            [
                "a88e3c59eda8f0be"
            ]
        ]
    },
    {
        "id": "57d526dcd3664d7d",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Panel Lights w/Alexa Virtual Support v0.60",
        "info": "/coachproxy/rv-c/panel_lights.pl ",
        "x": 280,
        "y": 260,
        "wires": []
    },
    {
        "id": "bcdc58913f221aac",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Scenes",
        "links": [
            "8386d844.59d9b8",
            "df1a6363a57f641f"
        ],
        "x": 1995,
        "y": 1680,
        "wires": [
            [
                "a88e3c59eda8f0be"
            ]
        ]
    },
    {
        "id": "2f5798529b4a90d1",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Memory Master",
        "info": "turn lights off with mem off and state will be remembered. \nturn on with mem on and lights are restored to previous value. \nAll on turns on everything.\n\nNote: Must enter instance of all lights in the exec node separated by a space",
        "x": 2060,
        "y": 240,
        "wires": []
    },
    {
        "id": "8a7b2dfc0fce1cb4",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Scene Panel Lights",
        "links": [
            "60d2fba3.9e8cd4",
            "d09ed916c8033fd4"
        ],
        "x": 1695,
        "y": 400,
        "wires": [
            [
                "4dadc37ed6e20b8a"
            ]
        ]
    },
    {
        "id": "33d6f65b89802ba6",
        "type": "function",
        "z": "144c673ecddfa485",
        "name": "",
        "func": "\nvar command = 126;\nvar instance = 100;\nvar brightness = msg.payload.brightness;\nvar instancename = global.get('status').lights[instance].instancename;\n\n\n//figure out a way to get the instance from the instancename\n//var scenelist = global.get('scenelist');\n\nglobal.set('status.lights[' + instance + '].state', command);\nglobal.set('status.lights[' + instance + '].brightness', brightness);\nglobal.set('status.lights[' + instance + '].instancename', instancename);\n\nreturn msg;\n\n\n/*\nObject.prototype.getKey = function(value){\n  for(var key in scenelist.title){\n    if(scenelist.title[key] == value){\n      return key;\n    }\n  }\n  return 'null';\n};\n\n//var key = languageCodes.getKey('Greek');\nvar key = [scenelist].getKey('Panel Lights');\n*/",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 380,
        "wires": [
            [
                "ac370e23cdcaee09",
                "dc5eb72d6b7e9b0f",
                "47bd130d06988cdc"
            ]
        ]
    },
    {
        "id": "4ba71aa93159da3f",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "GPS",
        "links": [
            "d282e6c3.8f6788",
            "401e792b.e6cb28",
            "f8d09fccb34e68b3",
            "7b156f51e3d2832e",
            "4849c4f0e46a8c5d",
            "8da60962ae2b1b83",
            "7672522b0eb6c9cc",
            "a9ef2defe6dc2a30",
            "b757b8c948799271",
            "fd43ffb1aeb03fd1",
            "f5b0b435106e26f7",
            "6cf5e4cc0aeee1e3",
            "cef4d384262906ab",
            "595acd4376e2ef86"
        ],
        "x": 1995,
        "y": 1440,
        "wires": [
            [
                "a88e3c59eda8f0be"
            ]
        ]
    },
    {
        "id": "b406520490624b97",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "command_dc_dimmer",
        "links": [
            "9e0e071d0bb580c2",
            "94c2ddf2da6e8dac",
            "57e416f0256dbb74"
        ],
        "x": 1805,
        "y": 1480,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "12d596a980a2283b",
        "type": "change",
        "z": "144c673ecddfa485",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "OFF",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "100",
                "fromt": "num",
                "to": "ON",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.powerState",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 380,
        "wires": [
            [
                "144079dc139eaf6a"
            ]
        ]
    },
    {
        "id": "47bd130d06988cdc",
        "type": "delay",
        "z": "144c673ecddfa485",
        "name": "",
        "pauseType": "delay",
        "timeout": "50",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 810,
        "y": 420,
        "wires": [
            [
                "144079dc139eaf6a"
            ]
        ]
    },
    {
        "id": "144079dc139eaf6a",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_100_Panel_Lights",
        "links": [
            "9dc19879.3bb408",
            "08e0e6d570f70d10"
        ],
        "x": 975,
        "y": 400,
        "wires": []
    },
    {
        "id": "801aab30eb932091",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa Panel Lights Out",
        "links": [
            "999e55ab.6e2308",
            "f7c96913679af962"
        ],
        "x": 1235,
        "y": 400,
        "wires": [
            [
                "6999fb34c7c110e2"
            ]
        ]
    },
    {
        "id": "1baca9b861a5ea34",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Alexa Virtual",
        "info": "",
        "x": 1130,
        "y": 400,
        "wires": []
    },
    {
        "id": "6999fb34c7c110e2",
        "type": "change",
        "z": "144c673ecddfa485",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload.directive",
                "pt": "msg",
                "from": "TurnOff",
                "fromt": "str",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "change",
                "p": "payload.directive",
                "pt": "msg",
                "from": "TurnOn",
                "fromt": "str",
                "to": "100",
                "tot": "num"
            },
            {
                "t": "change",
                "p": "payload.directive",
                "pt": "msg",
                "from": "SetBrightness",
                "fromt": "str",
                "to": "payload.brightness",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.directive",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 400,
        "wires": [
            [
                "0e1359870f286c96"
            ]
        ]
    },
    {
        "id": "47adf34a2b2c8987",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Play Scene",
        "info": "",
        "x": 1590,
        "y": 400,
        "wires": []
    },
    {
        "id": "9e84d61af5728fa9",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Lights & other items controlled by DC_DIMMER_COMMAND_2",
        "info": "",
        "x": 350,
        "y": 500,
        "wires": []
    },
    {
        "id": "45d517ad55e0f57e",
        "type": "function",
        "z": "144c673ecddfa485",
        "name": "Convert Alexa-Virtual to eRVin",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n// Copyright (C) eRVin project mods 2021\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Input: the output from the Alexa-Virtual node. Commands can either originate from the Alexa app\n//        or an Alexa voice command (msg.payload.source will = 'Alexa').\n// Output: adapt the Alexa-Virtual parameters to be compatible with the eRVin infrastructure.\n//         Alexa 'ON' = 'on', ALEXA 'OFF' = 'off', 'dim' is sent if the Alexa-Virtual type is a\n//         DIMMER_SWITCH or DIMMABLE_LIGHT_BULB, otherwise 'on' is sent.\n\nvar instance = msg.topic;\nvar name = msg.payload.name;\nvar powerState = msg.payload.powerState;\nvar brightness = msg.payload.brightness;\nvar directive = msg.payload.directive;\nvar type = msg.payload.type\nvar command\nvar dimtopic\nvar statetopic\n\n// write the Alexa-Virtula name to global context in case it has been changed in the Alexa app.\nglobal.set('status.lights[' + instance + '].alexaname', name);\nglobal.set('status.lights[' + instance + '].type', type);\n\nif (type == 'DIMMER_SWITCH' || type == 'DIMMABLE_LIGHT_BULB') {command = 'dim';} else {command = 'on';}\n\nif (directive == 'SetBrightness') {\n    dimtopic = instance + '_brightness';\n    msg = {'topic':dimtopic, 'payload':brightness, 'directive':directive};\n}\n\nif (directive == 'TurnOff' ) {\n    statetopic = instance + '_state_' + name;\n    msg = {'topic':statetopic, 'payload':'off', 'directive':directive};\n}\n\nif (directive == 'TurnOn') {\n    statetopic = instance + '_state_' + name;\n    msg = {'topic':statetopic, 'payload':command, 'directive':directive};\n}\n\nreturn msg;\n\n\n// var instance = msg.topic.split('_')[0];\n// var msgtype = msg.topic.split('_')[1];\n//var commands = { 'dim': 0, 'on': 2, 'off': 3 };\n\n//global.set('status.lights[' + instance + '].instancename', instancename);\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3770,
        "y": 1580,
        "wires": [
            [
                "9e0e071d0bb580c2"
            ]
        ]
    },
    {
        "id": "9e0e071d0bb580c2",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "To command_dc_dimmer",
        "links": [
            "b406520490624b97",
            "398e403d167b6e33",
            "df9776c2ecf4d1cb",
            "9b99ed6780f094b9"
        ],
        "x": 4015,
        "y": 1580,
        "wires": []
    },
    {
        "id": "b9438d89807a158b",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 34",
        "links": [
            "9647ec41.5edf6",
            "825d739586d435e0",
            "efe27117d1e092d8"
        ],
        "x": 2785,
        "y": 2380,
        "wires": [
            [
                "f537f85e662f8741"
            ]
        ]
    },
    {
        "id": "5ab8368810d9da1f",
        "type": "link in",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Alexa-Virtual 33",
        "links": [
            "86bec4e3.edbcb8",
            "4bbb3f6f34ca49b1",
            "885f3786c2740dd0"
        ],
        "x": 2785,
        "y": 2320,
        "wires": [
            [
                "f9db1dbb6196ad5d"
            ]
        ]
    },
    {
        "id": "d499218da4c0af23",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 21",
        "links": [
            "b9f024ce.83cf68",
            "93b12fa1586ec48e",
            "9708992826f043f1",
            "07926e32ccccb1d2",
            "969768171ec1606e"
        ],
        "x": 2785,
        "y": 1600,
        "wires": [
            [
                "daabd8b2f973eb72"
            ]
        ]
    },
    {
        "id": "fae01d243990b95c",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 22",
        "links": [
            "aa09b718.231ce8",
            "c0b90754a328b8ee",
            "e2730f1f286c8bfc",
            "1c149f334c522006",
            "7546f67e6d9e72d4"
        ],
        "x": 2785,
        "y": 1660,
        "wires": [
            [
                "07321c7a89ac31f8"
            ]
        ]
    },
    {
        "id": "8e0a5d1def5d9b53",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 23",
        "links": [
            "bf70c94a.c7ef08",
            "9c966514042ebc0e",
            "014a72e3429db409",
            "e60f86ae50b5fb44",
            "4bd10622b69d6598"
        ],
        "x": 2785,
        "y": 1720,
        "wires": [
            [
                "c4cd3d73c7a394f8"
            ]
        ]
    },
    {
        "id": "685185286f9a26df",
        "type": "link in",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Alexa-Virtual 24",
        "links": [
            "b793c70f.9d1c48",
            "e33fc3bec223373a",
            "dc2c4e594ea01021",
            "7ae90eca2f25c33a"
        ],
        "x": 2785,
        "y": 1780,
        "wires": [
            [
                "640fa66b329577b6"
            ]
        ]
    },
    {
        "id": "ba636dc60e4ee411",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 25",
        "links": [
            "a1753018.3f292",
            "349f6799e6af84ce",
            "e9dd424a1847139b",
            "1241f61a1663b566",
            "db594e272383136a"
        ],
        "x": 2785,
        "y": 1840,
        "wires": [
            [
                "54b425e94fc2ee28"
            ]
        ]
    },
    {
        "id": "214fd8ed203690ef",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 26",
        "links": [
            "1a89e6d0.a42329",
            "de1426b4d36a4b16",
            "cacd1f0fadd83386",
            "eb80801bf3e0631b",
            "bd8be3195475ce9c"
        ],
        "x": 2785,
        "y": 1900,
        "wires": [
            [
                "7a5c678261c548e8"
            ]
        ]
    },
    {
        "id": "ef285b92d23ea112",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 27",
        "links": [
            "87c13d1d.828f3",
            "b11383deb21be4b1",
            "bf92649f652889b6",
            "a1c3444c9c084152",
            "069654db8704c0cc"
        ],
        "x": 2785,
        "y": 1960,
        "wires": [
            [
                "d7d9c7b03d7edf04"
            ]
        ]
    },
    {
        "id": "6b63cb39d46b2cf2",
        "type": "link in",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Alexa-Virtual 28",
        "links": [
            "f8c9d73b.0bb9f8",
            "15b4ad39022af212",
            "caa1e903318b5066",
            "293ef959457f656c",
            "6eaa87d6a9a99381"
        ],
        "x": 2785,
        "y": 2020,
        "wires": [
            [
                "a5fff62d71c224f3"
            ]
        ]
    },
    {
        "id": "4f2f350bf61d9a65",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 29",
        "links": [
            "4aa343b9.05a0ac",
            "0b5c0fc1301f98f8",
            "dcf433ecd99f0f32",
            "11755c334a63b65c"
        ],
        "x": 2785,
        "y": 2080,
        "wires": [
            [
                "0c6573c7c24c3419"
            ]
        ]
    },
    {
        "id": "3e7bd4cae5ff9773",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 30",
        "links": [
            "af50c992.3824c8",
            "7b387cd299a4b638",
            "b2a46d416406d9fd",
            "f5c07391ee7a1213",
            "8dc6385714f5622b"
        ],
        "x": 2785,
        "y": 2140,
        "wires": [
            [
                "40f12b0c1089dd1b"
            ]
        ]
    },
    {
        "id": "1961fb9bf0affc6b",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 31",
        "links": [
            "5b7f4b58.21ada4",
            "08abfe0dae1ecce8",
            "02a8f0d191f3cff0",
            "03712286cd8898d5",
            "7a186291e1bb5f4b"
        ],
        "x": 2785,
        "y": 2200,
        "wires": [
            [
                "1e515bcce4665424"
            ]
        ]
    },
    {
        "id": "2d169225bde7c26d",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 32",
        "links": [
            "cd682278.4ea26",
            "74e40f93cfe3f072",
            "a1147c98e60fa8d4",
            "bd4295c323ded89f"
        ],
        "x": 2785,
        "y": 2260,
        "wires": [
            [
                "d9fdcacbcb29d560"
            ]
        ]
    },
    {
        "id": "4fd8d4d1154c36e3",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 35",
        "links": [
            "e4dd64e3.330458",
            "86efec9b57f14f81",
            "c6c82b6424a07fb3"
        ],
        "x": 2785,
        "y": 2440,
        "wires": [
            [
                "c06e849b13462a12"
            ]
        ]
    },
    {
        "id": "45c9d5975f654723",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 36",
        "links": [
            "fa9957ec.e18c88",
            "5d05b2b6ccf1e5fa",
            "0e2f10029df2779d"
        ],
        "x": 2785,
        "y": 2500,
        "wires": [
            [
                "35486b6152d79bb5"
            ]
        ]
    },
    {
        "id": "df0907aec81901a5",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 37",
        "links": [
            "4b4e169d.6f7af8",
            "1e6f0ff6265f180e",
            "37b4d5e979ba4bc3",
            "9066e2d0aa1ceab5",
            "66d1f1aa56d9571a",
            "9d84ac07603af76e",
            "f57fc49e6e692a1c",
            "7f9629688f579bd0",
            "6cb530cc6285e37a",
            "13ed4ff132ca4d5b",
            "c64debb6ee238f40",
            "94c2ddf2da6e8dac"
        ],
        "x": 2785,
        "y": 2560,
        "wires": [
            [
                "b705a6ce27532f8b"
            ]
        ]
    },
    {
        "id": "fd6716d32ad0dd41",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 39",
        "links": [
            "a9a0ea5e.076e48",
            "353449ee40b3a231",
            "fdc02f6f2d867635"
        ],
        "x": 2785,
        "y": 2680,
        "wires": [
            [
                "af635de6082a99fc"
            ]
        ]
    },
    {
        "id": "08e0e6d570f70d10",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 100 Panel Lights",
        "links": [
            "144079dc139eaf6a"
        ],
        "x": 2785,
        "y": 500,
        "wires": [
            [
                "54d4c55594c990dd"
            ]
        ]
    },
    {
        "id": "f7c96913679af962",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual Panel Lights Out",
        "links": [
            "801aab30eb932091"
        ],
        "x": 3095,
        "y": 500,
        "wires": []
    },
    {
        "id": "f9db1dbb6196ad5d",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Used for Aquahot",
        "topic": "33",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 2320,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "f537f85e662f8741",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Stool Room Accent Lights",
        "topic": "34",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2990,
        "y": 2380,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "daabd8b2f973eb72",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Sink Light",
        "topic": "21",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2940,
        "y": 1600,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "07321c7a89ac31f8",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Entry Ceiling Light",
        "topic": "22",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 1660,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "c4cd3d73c7a394f8",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Front Base Accent ",
        "topic": "23",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 1720,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "640fa66b329577b6",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Used for Aquahot",
        "topic": "24",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 1780,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "54b425e94fc2ee28",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Entertainment Center Lights",
        "topic": "25",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 3000,
        "y": 1840,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "7a5c678261c548e8",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Closet Lights",
        "topic": "26",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2950,
        "y": 1900,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "d7d9c7b03d7edf04",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Bath Ceiling Lights",
        "topic": "27",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 1960,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "a5fff62d71c224f3",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Bath Accent Lights",
        "topic": "28",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 2020,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "0c6573c7c24c3419",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Bathroom Lav Lights",
        "topic": "29",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2980,
        "y": 2080,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "40f12b0c1089dd1b",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Courtesy Lights",
        "topic": "30",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2960,
        "y": 2140,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "1e515bcce4665424",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Hall Lights",
        "topic": "31",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2950,
        "y": 2200,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "d9fdcacbcb29d560",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Mid Bath Ceiling Lights",
        "topic": "32",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2980,
        "y": 2260,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "c06e849b13462a12",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Bathroom Base Accent Lights",
        "topic": "35",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 3010,
        "y": 2440,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "35486b6152d79bb5",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Driver Side Security Light",
        "topic": "36",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2990,
        "y": 2500,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "b705a6ce27532f8b",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Passenger Side Security Light",
        "topic": "37",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 3010,
        "y": 2560,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "af635de6082a99fc",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Porch Light",
        "topic": "39",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2950,
        "y": 2680,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "54d4c55594c990dd",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Panel Lights",
        "topic": "100",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2950,
        "y": 500,
        "wires": [
            [
                "f7c96913679af962"
            ]
        ]
    },
    {
        "id": "b39be5b9ba8b9789",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Bedroom Vanity Lights",
        "topic": "12",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2980,
        "y": 1440,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "d192d230b7aa0f06",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Bedroom Overhead Lights",
        "topic": "11",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2990,
        "y": 1360,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "080eccb53ff345c2",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Kitchen Overhead Lights",
        "topic": "10",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2990,
        "y": 1280,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "16683872a0a10e3b",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Midship Lights",
        "topic": "9",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2960,
        "y": 1200,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "58add0c7fae12cab",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Midship Lights",
        "topic": "8",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2960,
        "y": 1120,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "343339c7d482cfd7",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Bedroom Ceiling Lights",
        "topic": "7",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2990,
        "y": 1040,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "c9597c5eedf2f6bd",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Passenger Side Sofa Lights",
        "topic": "6",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 3000,
        "y": 960,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "6832d14ff7ef0d18",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 12",
        "links": [
            "3b7ea03808879ed0",
            "0b997b6e78edf198",
            "4bd7ccdca5fab996",
            "597a3d21beea6d70",
            "e44c83d8969cdc27"
        ],
        "x": 2785,
        "y": 1440,
        "wires": [
            [
                "b39be5b9ba8b9789"
            ]
        ]
    },
    {
        "id": "40dbb00a954d89cf",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 11",
        "links": [
            "9478b65fee158608",
            "28acc921a0348a59",
            "cf3086d09290596c",
            "8d2631decd0435f9",
            "64d31360a36c8508"
        ],
        "x": 2785,
        "y": 1360,
        "wires": [
            [
                "d192d230b7aa0f06"
            ]
        ]
    },
    {
        "id": "ce96636bbdde52ca",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 10",
        "links": [
            "06fe89c6a4171a2b",
            "98e3602fef841bc7",
            "0106b0bc251e6531",
            "b6711e23dc66645f",
            "55d217ea1356528a"
        ],
        "x": 2785,
        "y": 1280,
        "wires": [
            [
                "080eccb53ff345c2"
            ]
        ]
    },
    {
        "id": "4139565f5bde31e0",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 9",
        "links": [
            "5c1cc29131f37d9e",
            "06385952e86e5622",
            "2036bf2fc2266489",
            "e9aa8fa956acbff3",
            "e4a61c50efe96995"
        ],
        "x": 2785,
        "y": 1200,
        "wires": [
            [
                "16683872a0a10e3b"
            ]
        ]
    },
    {
        "id": "e73ad2aecde48654",
        "type": "link in",
        "z": "144c673ecddfa485",
        "d": true,
        "name": "Alexa-Virtual 8",
        "links": [
            "55b60837d13837a3"
        ],
        "x": 2785,
        "y": 1120,
        "wires": [
            [
                "58add0c7fae12cab"
            ]
        ]
    },
    {
        "id": "544c652b291d437e",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 7",
        "links": [
            "e92f0dac376edd3c",
            "89184ac503789499",
            "17df60b2c35b7f71",
            "4f66fc5ed7760f2c",
            "772c5081360240e5"
        ],
        "x": 2785,
        "y": 1040,
        "wires": [
            [
                "343339c7d482cfd7"
            ]
        ]
    },
    {
        "id": "9a9d8bb9ac6b96d2",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 6",
        "links": [
            "7d77f212491812d9",
            "1c61cca905dbecbd",
            "e6e7c3d35ad5a6d3",
            "5fcc2d48fed02835",
            "025c7658a2ea6a16"
        ],
        "x": 2785,
        "y": 960,
        "wires": [
            [
                "c9597c5eedf2f6bd"
            ]
        ]
    },
    {
        "id": "600dc3bc2d23f3a4",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "6",
        "info": "",
        "x": 2590,
        "y": 960,
        "wires": []
    },
    {
        "id": "27a50398eb146214",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "7",
        "info": "",
        "x": 2590,
        "y": 1040,
        "wires": []
    },
    {
        "id": "9ef87a3262e479c4",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "8",
        "info": "",
        "x": 2590,
        "y": 1120,
        "wires": []
    },
    {
        "id": "543c50e429a20113",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "9",
        "info": "",
        "x": 2590,
        "y": 1200,
        "wires": []
    },
    {
        "id": "e37c6294f9797336",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "10",
        "info": "",
        "x": 2590,
        "y": 1280,
        "wires": []
    },
    {
        "id": "365ae2d9fa58e72d",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "11",
        "info": "",
        "x": 2590,
        "y": 1360,
        "wires": []
    },
    {
        "id": "137db7fea2540f35",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "12",
        "info": "",
        "x": 2590,
        "y": 1440,
        "wires": []
    },
    {
        "id": "d2db7221b4c3e940",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "21",
        "info": "",
        "x": 2590,
        "y": 1600,
        "wires": []
    },
    {
        "id": "edb43895c780121f",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "22",
        "info": "",
        "x": 2590,
        "y": 1660,
        "wires": []
    },
    {
        "id": "6e51bb7ca95957d4",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "23",
        "info": "",
        "x": 2590,
        "y": 1720,
        "wires": []
    },
    {
        "id": "65f1ca3759c73e32",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "24",
        "info": "",
        "x": 2590,
        "y": 1779.7777709960938,
        "wires": []
    },
    {
        "id": "96325461307018bb",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "25",
        "info": "",
        "x": 2590,
        "y": 1840,
        "wires": []
    },
    {
        "id": "aedcd15bcd9186f8",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "26",
        "info": "",
        "x": 2590,
        "y": 1900,
        "wires": []
    },
    {
        "id": "4b25b6901aa9f462",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "27",
        "info": "",
        "x": 2590,
        "y": 1960,
        "wires": []
    },
    {
        "id": "b232cbb66ff4b31a",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "28",
        "info": "",
        "x": 2590,
        "y": 2020,
        "wires": []
    },
    {
        "id": "c339a066e7b1cffd",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "29",
        "info": "",
        "x": 2590,
        "y": 2080,
        "wires": []
    },
    {
        "id": "76cdf1a19d0d8d98",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "30",
        "info": "",
        "x": 2590,
        "y": 2140,
        "wires": []
    },
    {
        "id": "284dd0ad4514456f",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "31",
        "info": "",
        "x": 2590,
        "y": 2200,
        "wires": []
    },
    {
        "id": "6c307a99ec1f6bba",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "32",
        "info": "",
        "x": 2590,
        "y": 2260,
        "wires": []
    },
    {
        "id": "1019d7e871f138b3",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "33",
        "info": "",
        "x": 2590,
        "y": 2320,
        "wires": []
    },
    {
        "id": "42f49b55ed646f62",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "34",
        "info": "",
        "x": 2590,
        "y": 2380,
        "wires": []
    },
    {
        "id": "06413ade81650219",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "35",
        "info": "",
        "x": 2590,
        "y": 2440,
        "wires": []
    },
    {
        "id": "3c828e3a794ecec9",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "36",
        "info": "",
        "x": 2590,
        "y": 2500,
        "wires": []
    },
    {
        "id": "0bb16513dfb832c6",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "37",
        "info": "",
        "x": 2590,
        "y": 2560,
        "wires": []
    },
    {
        "id": "48fd0b67797c41dc",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "38",
        "info": "",
        "x": 2590,
        "y": 2620,
        "wires": []
    },
    {
        "id": "e0737611f823938e",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "39",
        "info": "",
        "x": 2590,
        "y": 2680,
        "wires": []
    },
    {
        "id": "e5446fb31ed895ff",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "40",
        "info": "",
        "x": 2590,
        "y": 2740,
        "wires": []
    },
    {
        "id": "206b046e5117d918",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Instance #",
        "info": "",
        "x": 2600,
        "y": 460,
        "wires": []
    },
    {
        "id": "88a71516cfc51c07",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Alexa Virtual Smart Home Nodes (optional)",
        "info": "Each node will need to be configured with your\naccount info. For complete details see:\nhttps://myervin.com/configure-alexa-for-ervin-v0-6x-and-newer\n\n",
        "x": 2700,
        "y": 400,
        "wires": []
    },
    {
        "id": "80b39b86ce233a3b",
        "type": "inject",
        "z": "144c673ecddfa485",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Lights",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 230,
        "y": 160,
        "wires": [
            [
                "a64e23197b936187",
                "e2022ee74507938b"
            ]
        ]
    },
    {
        "id": "619304f2f0b54e04",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 190,
        "y": 120,
        "wires": []
    },
    {
        "id": "a64e23197b936187",
        "type": "change",
        "z": "144c673ecddfa485",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "287fe9d1eb24727e",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_5",
        "mode": "link",
        "links": [
            "3dd1ba4ae5957fd7"
        ],
        "x": 875,
        "y": 940,
        "wires": []
    },
    {
        "id": "5eee61b718dd427d",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_4",
        "mode": "link",
        "links": [
            "91c5f509b21b8f18"
        ],
        "x": 875.9999389648438,
        "y": 858.0000057220459,
        "wires": []
    },
    {
        "id": "2b35339dc99e7d93",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_3",
        "mode": "link",
        "links": [
            "df563b08e48e8db0"
        ],
        "x": 875,
        "y": 780,
        "wires": []
    },
    {
        "id": "b862bae89fb8c806",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_2",
        "mode": "link",
        "links": [
            "693af73643a879b6"
        ],
        "x": 875,
        "y": 700,
        "wires": []
    },
    {
        "id": "b50b5414f49e85bb",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_1",
        "mode": "link",
        "links": [
            "1bcd4177574c3b3d"
        ],
        "x": 875,
        "y": 620,
        "wires": []
    },
    {
        "id": "025c7658a2ea6a16",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_6",
        "mode": "link",
        "links": [
            "9a9d8bb9ac6b96d2"
        ],
        "x": 875,
        "y": 1020,
        "wires": []
    },
    {
        "id": "772c5081360240e5",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_7",
        "mode": "link",
        "links": [
            "544c652b291d437e"
        ],
        "x": 875,
        "y": 1100,
        "wires": []
    },
    {
        "id": "55b60837d13837a3",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_8",
        "mode": "link",
        "links": [
            "e73ad2aecde48654"
        ],
        "x": 875,
        "y": 1180,
        "wires": []
    },
    {
        "id": "e4a61c50efe96995",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_9",
        "mode": "link",
        "links": [
            "4139565f5bde31e0"
        ],
        "x": 875,
        "y": 1260,
        "wires": []
    },
    {
        "id": "55d217ea1356528a",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_10",
        "mode": "link",
        "links": [
            "ce96636bbdde52ca"
        ],
        "x": 875,
        "y": 1340,
        "wires": []
    },
    {
        "id": "64d31360a36c8508",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_11",
        "mode": "link",
        "links": [
            "40dbb00a954d89cf"
        ],
        "x": 875,
        "y": 1420,
        "wires": []
    },
    {
        "id": "e44c83d8969cdc27",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_12",
        "mode": "link",
        "links": [
            "6832d14ff7ef0d18"
        ],
        "x": 875,
        "y": 1500,
        "wires": []
    },
    {
        "id": "969768171ec1606e",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_21",
        "mode": "link",
        "links": [
            "d499218da4c0af23"
        ],
        "x": 875,
        "y": 1640,
        "wires": []
    },
    {
        "id": "7546f67e6d9e72d4",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_22",
        "mode": "link",
        "links": [
            "fae01d243990b95c"
        ],
        "x": 875,
        "y": 1700,
        "wires": []
    },
    {
        "id": "4bd10622b69d6598",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_23",
        "mode": "link",
        "links": [
            "8e0a5d1def5d9b53"
        ],
        "x": 875,
        "y": 1760,
        "wires": []
    },
    {
        "id": "bd8be3195475ce9c",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_26",
        "mode": "link",
        "links": [
            "214fd8ed203690ef"
        ],
        "x": 875,
        "y": 1940,
        "wires": []
    },
    {
        "id": "069654db8704c0cc",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_27",
        "mode": "link",
        "links": [
            "ef285b92d23ea112"
        ],
        "x": 875,
        "y": 2000,
        "wires": []
    },
    {
        "id": "6eaa87d6a9a99381",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_28",
        "mode": "link",
        "links": [
            "6b63cb39d46b2cf2"
        ],
        "x": 875,
        "y": 2060,
        "wires": []
    },
    {
        "id": "11755c334a63b65c",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_29",
        "mode": "link",
        "links": [
            "4f2f350bf61d9a65"
        ],
        "x": 875,
        "y": 2120,
        "wires": []
    },
    {
        "id": "8dc6385714f5622b",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_30",
        "mode": "link",
        "links": [
            "3e7bd4cae5ff9773"
        ],
        "x": 875,
        "y": 2180,
        "wires": []
    },
    {
        "id": "7a186291e1bb5f4b",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_31",
        "mode": "link",
        "links": [
            "1961fb9bf0affc6b"
        ],
        "x": 875,
        "y": 2240,
        "wires": []
    },
    {
        "id": "bd4295c323ded89f",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_32",
        "mode": "link",
        "links": [
            "2d169225bde7c26d"
        ],
        "x": 875,
        "y": 2300,
        "wires": []
    },
    {
        "id": "efe27117d1e092d8",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_34",
        "mode": "link",
        "links": [
            "b9438d89807a158b"
        ],
        "x": 875,
        "y": 2420,
        "wires": []
    },
    {
        "id": "c6c82b6424a07fb3",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_35",
        "mode": "link",
        "links": [
            "4fd8d4d1154c36e3"
        ],
        "x": 875,
        "y": 2480,
        "wires": []
    },
    {
        "id": "0e2f10029df2779d",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_36",
        "mode": "link",
        "links": [
            "45c9d5975f654723"
        ],
        "x": 875,
        "y": 2540,
        "wires": []
    },
    {
        "id": "9d84ac07603af76e",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_37",
        "mode": "link",
        "links": [
            "df0907aec81901a5"
        ],
        "x": 875,
        "y": 2600,
        "wires": []
    },
    {
        "id": "fdc02f6f2d867635",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_39",
        "mode": "link",
        "links": [
            "fd6716d32ad0dd41"
        ],
        "x": 875,
        "y": 2720,
        "wires": []
    },
    {
        "id": "5a6afdfd4e803f25",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Sofa Sconce Lights",
        "topic": "10",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 880,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "81ba877025d22fd9",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Rear Ceiling Lights",
        "topic": "9",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 800,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "2328d8b2ca0847e6",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Dinette Lights",
        "topic": "8",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2960,
        "y": 720,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "7e5aaeeedb3767e4",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Front Ceiling Lights",
        "topic": "7",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2970,
        "y": 640,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "03a1c52148aefba8",
        "type": "vsh-virtual-device",
        "z": "144c673ecddfa485",
        "name": "Driver Side Sofa Lights",
        "topic": "6",
        "connection": "",
        "template": "DIMMER_SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 2980,
        "y": 560,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "3dd1ba4ae5957fd7",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 5",
        "links": [
            "287fe9d1eb24727e"
        ],
        "x": 2785,
        "y": 880,
        "wires": [
            [
                "5a6afdfd4e803f25"
            ]
        ]
    },
    {
        "id": "91c5f509b21b8f18",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 4",
        "links": [
            "5eee61b718dd427d"
        ],
        "x": 2785,
        "y": 800,
        "wires": [
            [
                "81ba877025d22fd9"
            ]
        ]
    },
    {
        "id": "df563b08e48e8db0",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 3",
        "links": [
            "2b35339dc99e7d93"
        ],
        "x": 2785,
        "y": 720,
        "wires": [
            [
                "2328d8b2ca0847e6"
            ]
        ]
    },
    {
        "id": "693af73643a879b6",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 2",
        "links": [
            "b862bae89fb8c806"
        ],
        "x": 2785,
        "y": 640,
        "wires": [
            [
                "7e5aaeeedb3767e4"
            ]
        ]
    },
    {
        "id": "1bcd4177574c3b3d",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "Alexa-Virtual 1",
        "links": [
            "b50b5414f49e85bb"
        ],
        "x": 2785,
        "y": 560,
        "wires": [
            [
                "03a1c52148aefba8"
            ]
        ]
    },
    {
        "id": "79536fe3ed79187d",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "1",
        "info": "",
        "x": 2590,
        "y": 560,
        "wires": []
    },
    {
        "id": "a302b9f02d051c83",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "2",
        "info": "",
        "x": 2590,
        "y": 640,
        "wires": []
    },
    {
        "id": "3743048ed7c77f33",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "3",
        "info": "",
        "x": 2590,
        "y": 720,
        "wires": []
    },
    {
        "id": "6ebda6e496463c29",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "4",
        "info": "",
        "x": 2590,
        "y": 800,
        "wires": []
    },
    {
        "id": "1ae9388d57da9401",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "5",
        "info": "",
        "x": 2590,
        "y": 880,
        "wires": []
    },
    {
        "id": "defcccea1a08a588",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "38 Generator Start",
        "info": "",
        "x": 210,
        "y": 2640,
        "wires": []
    },
    {
        "id": "575e72f187c824ad",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "40 Generator Stop",
        "info": "",
        "x": 210,
        "y": 2760,
        "wires": []
    },
    {
        "id": "b32e4016c319da11",
        "type": "exec",
        "z": "144c673ecddfa485",
        "command": "/coachproxy/rv-c/master.pl",
        "addpay": "payload",
        "append": "2 3 4 5 6 7 10 12 22 23 27 28 31 32 33 36 37 38 39 40 255",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 2290,
        "y": 340,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d8b3940f11b8faf6",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "Aquahot Instances",
        "info": "Electric - 24\nBurner - 33",
        "x": 730,
        "y": 500,
        "wires": []
    },
    {
        "id": "db594e272383136a",
        "type": "link out",
        "z": "144c673ecddfa485",
        "name": "Alexa_25",
        "mode": "link",
        "links": [
            "ba636dc60e4ee411"
        ],
        "x": 875,
        "y": 1880,
        "wires": []
    },
    {
        "id": "bd72e20ad5a8a5cd",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "24 Aquahot Electric",
        "info": "See Aquahot Tab",
        "x": 210,
        "y": 1800,
        "wires": []
    },
    {
        "id": "971c5314ed89f601",
        "type": "comment",
        "z": "144c673ecddfa485",
        "name": "33 Aquahot Burner",
        "info": "See Aquahot Tab",
        "x": 210,
        "y": 2340,
        "wires": []
    },
    {
        "id": "e2022ee74507938b",
        "type": "ui_text",
        "z": "144c673ecddfa485",
        "group": "f8bc211086686736",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "Location",
        "label": "",
        "format": "Tab Name: {{msg.payload.tabname}} <br> Source: {{msg.payload.source}} <br> Tab Version: {{msg.payload.tabver}}",
        "layout": "row-left",
        "className": "",
        "x": 460,
        "y": 160,
        "wires": []
    },
    {
        "id": "58d88c9868837da2",
        "type": "link in",
        "z": "144c673ecddfa485",
        "name": "convert alexa virtual",
        "links": [
            "4a4b3b94746df512"
        ],
        "x": 3815,
        "y": 1500,
        "wires": [
            [
                "45d517ad55e0f57e"
            ]
        ]
    },
    {
        "id": "db8a2e9fe72e29ca",
        "type": "ui_template",
        "z": "144c673ecddfa485",
        "group": "d944623c.5b46b8",
        "name": "",
        "order": 4,
        "width": "0",
        "height": "0",
        "format": "<div>\n<p>\n    Mem Off turns off all lights and remembers what lights were on and their brightness level. Mem On restores the remembered lights & levels. All on turns on all lights to full brightness.\n</p>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2040,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "6b1734832faf1fd2",
        "type": "mqtt in",
        "z": "5a91ecccc946d063",
        "name": "",
        "topic": "RVC/ATS_AC_STATUS_1/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 280,
        "y": 420,
        "wires": [
            [
                "d9084964716961c7",
                "ec42b6c3349ac504",
                "042b75a052f823a0",
                "5b291f955353b8ad",
                "ecefcf3a49173255",
                "597ad182124b8b80",
                "ccc3f5b01ab7df10"
            ]
        ]
    },
    {
        "id": "d9084964716961c7",
        "type": "switch",
        "z": "5a91ecccc946d063",
        "name": "Leg Switch",
        "property": "payload.leg",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 600,
        "wires": [
            [
                "b0c22b2525c7753f",
                "92cb85eb422272ba",
                "c1d561cbbf30ab18",
                "6d76b3c8598b719d"
            ],
            [
                "8a91638a7e37ac3b",
                "9d2928c85f3fd4a5",
                "cddca3d49382cda1"
            ]
        ]
    },
    {
        "id": "206502bca0619f4d",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "d": true,
        "group": "78b5874c47824c25",
        "order": 8,
        "width": "2",
        "height": "1",
        "name": "ATS Current Leg 1",
        "label": "L1:",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 1390,
        "y": 760,
        "wires": []
    },
    {
        "id": "f93b996cca1f1121",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "d": true,
        "group": "78b5874c47824c25",
        "order": 10,
        "width": "2",
        "height": "1",
        "name": "ATS Current Leg 2",
        "label": "L2:",
        "format": "{{payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 1390,
        "y": 840,
        "wires": []
    },
    {
        "id": "088737fd878235c3",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "d": true,
        "group": "78b5874c47824c25",
        "order": 9,
        "width": "2",
        "height": "1",
        "name": "ATS Voltage Leg 1",
        "label": "",
        "format": "{{payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 1390,
        "y": 800,
        "wires": []
    },
    {
        "id": "58e5401dd21a67bd",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "d": true,
        "group": "78b5874c47824c25",
        "order": 11,
        "width": "2",
        "height": "1",
        "name": "ATS Voltage Leg 2",
        "label": "",
        "format": "{{payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 1390,
        "y": 880,
        "wires": []
    },
    {
        "id": "58dc89ba7899b6a1",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1090,
        "y": 440,
        "wires": [
            [
                "09080630937baae8"
            ]
        ]
    },
    {
        "id": "9e2dcf8d65805d44",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1090,
        "y": 520,
        "wires": [
            [
                "302077500a7ecf20"
            ]
        ]
    },
    {
        "id": "6104cba624a34918",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1090,
        "y": 400,
        "wires": [
            [
                "15a630d623f31636"
            ]
        ]
    },
    {
        "id": "daa70f769b58a260",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1090,
        "y": 560,
        "wires": [
            [
                "87b2dbea135eb470"
            ]
        ]
    },
    {
        "id": "a3720552c6b29ba4",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1090,
        "y": 320,
        "wires": [
            [
                "7cbf2b653ae71c33"
            ]
        ]
    },
    {
        "id": "0d56d40cdad0b3d0",
        "type": "comment",
        "z": "5a91ecccc946d063",
        "name": "120V ATS Power Display v066",
        "info": "c Rob Picchione https://myervin.com\n\nv061 original version\n\nFor basic RMS voltage and current requires data from:\nATS_AC_STATUS_1\n\nFor Faults requires installed equipmnet that supports faults as well as:\nATS_AC_STATUS_1\n\nFor Phase Status (determines if 50A or not) and Waveform, requires data from:\nATS_AC_STATUS_3\n\nv062\nfixes (change node) for when there is no shore power to set voltage, current & freq to 0\neliminates type errors in node red and zero's dashboard values.",
        "x": 280,
        "y": 280,
        "wires": []
    },
    {
        "id": "b0c22b2525c7753f",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "L1 rms current",
        "rules": [
            {
                "t": "change",
                "p": "payload[\"rms current\"]",
                "pt": "msg",
                "from": "n/a",
                "fromt": "str",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(payload.\"rms current\",2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 400,
        "wires": [
            [
                "6104cba624a34918"
            ]
        ]
    },
    {
        "id": "8a91638a7e37ac3b",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "L2 rms current",
        "rules": [
            {
                "t": "change",
                "p": "payload[\"rms current\"]",
                "pt": "msg",
                "from": "n/a",
                "fromt": "str",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(payload.\"rms current\",2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 520,
        "wires": [
            [
                "9e2dcf8d65805d44"
            ]
        ]
    },
    {
        "id": "92cb85eb422272ba",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "L1 rms voltage",
        "rules": [
            {
                "t": "change",
                "p": "payload[\"rms voltage\"]",
                "pt": "msg",
                "from": "n/a",
                "fromt": "str",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(payload.\"rms voltage\",2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 440,
        "wires": [
            [
                "58dc89ba7899b6a1"
            ]
        ]
    },
    {
        "id": "9d2928c85f3fd4a5",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "L2 rms voltage",
        "rules": [
            {
                "t": "change",
                "p": "payload[\"rms voltage\"]",
                "pt": "msg",
                "from": "n/a",
                "fromt": "str",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(payload.\"rms voltage\",2)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 560,
        "wires": [
            [
                "daa70f769b58a260"
            ]
        ]
    },
    {
        "id": "a5cbba0654f1adca",
        "type": "mqtt in",
        "z": "5a91ecccc946d063",
        "name": "",
        "topic": "RVC/ATS_AC_STATUS_2/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 280,
        "y": 460,
        "wires": [
            [
                "d9084964716961c7"
            ]
        ]
    },
    {
        "id": "0c27447781ca0882",
        "type": "mqtt in",
        "z": "5a91ecccc946d063",
        "name": "",
        "topic": "RVC/ATS_AC_STATUS_3/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 280,
        "y": 500,
        "wires": [
            [
                "d9084964716961c7"
            ]
        ]
    },
    {
        "id": "cddca3d49382cda1",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "L2 frequency",
        "rules": [
            {
                "t": "change",
                "p": "payload.frequency",
                "pt": "msg",
                "from": "512",
                "fromt": "num",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(payload.\"frequency\")",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 600,
        "wires": [
            [
                "0f7db4556f7cd0c2"
            ]
        ]
    },
    {
        "id": "0f7db4556f7cd0c2",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1090,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "c1d561cbbf30ab18",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "L1 frequency",
        "rules": [
            {
                "t": "change",
                "p": "payload.frequency",
                "pt": "msg",
                "from": "512",
                "fromt": "num",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(payload.\"frequency\")",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 480,
        "wires": [
            [
                "6362645ac6979a93"
            ]
        ]
    },
    {
        "id": "6362645ac6979a93",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1090,
        "y": 480,
        "wires": [
            [
                "25636b8727dd52c8"
            ]
        ]
    },
    {
        "id": "25636b8727dd52c8",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "78b5874c47824c25",
        "order": 3,
        "width": "2",
        "height": "1",
        "name": "ATS Frequency Leg 1",
        "label": "",
        "format": "{{msg.payload}} Hz",
        "layout": "row-spread",
        "className": "",
        "x": 1400,
        "y": 480,
        "wires": []
    },
    {
        "id": "7cbf2b653ae71c33",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "78b5874c47824c25",
        "order": 1,
        "width": "2",
        "height": "1",
        "name": "ATS Status",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 1370,
        "y": 320,
        "wires": []
    },
    {
        "id": "6d76b3c8598b719d",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "phase status",
        "rules": [
            {
                "t": "change",
                "p": "payload[\"phase status\"]",
                "pt": "msg",
                "from": "0000",
                "fromt": "str",
                "to": "No Complementary Leg",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload[\"phase status\"]",
                "pt": "msg",
                "from": "0001",
                "fromt": "str",
                "to": "20/30A",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload[\"phase status\"]",
                "pt": "msg",
                "from": "0010",
                "fromt": "str",
                "to": "50A",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload[\"phase status\"]",
                "pt": "msg",
                "from": "0011",
                "fromt": "str",
                "to": "Phase Relationship Variable",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload[\"phase status\"]",
                "pt": "msg",
                "from": "1110",
                "fromt": "str",
                "to": "Error",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload[\"phase status\"]",
                "pt": "msg",
                "from": "1111",
                "fromt": "str",
                "to": "No Data",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 360,
        "wires": [
            [
                "8ddb121f3bc94b92"
            ]
        ]
    },
    {
        "id": "8ddb121f3bc94b92",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload[\"phase status\"]",
        "x": 1090,
        "y": 360,
        "wires": [
            [
                "81cd4376db5efa6d"
            ]
        ]
    },
    {
        "id": "81cd4376db5efa6d",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "78b5874c47824c25",
        "order": 2,
        "width": "2",
        "height": "1",
        "name": "ATS Phase",
        "label": "",
        "format": "{{msg.payload[\"phase status\"]}}",
        "layout": "row-center",
        "className": "",
        "x": 1370,
        "y": 360,
        "wires": []
    },
    {
        "id": "ec42b6c3349ac504",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "0e6539829c0811ba",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "Fault Ground Current",
        "label": "Ground Current: ",
        "format": "{{msg.payload[\"fault ground current definition\"]}}",
        "layout": "row-spread",
        "className": "",
        "x": 620,
        "y": 420,
        "wires": []
    },
    {
        "id": "042b75a052f823a0",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "0e6539829c0811ba",
        "order": 3,
        "width": "0",
        "height": "0",
        "name": "Fault Open Ground",
        "label": "Open Ground:",
        "format": "{{msg.payload[\"fault open ground definition\"]}}",
        "layout": "row-spread",
        "className": "",
        "x": 610,
        "y": 460,
        "wires": []
    },
    {
        "id": "5b291f955353b8ad",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "0e6539829c0811ba",
        "order": 4,
        "width": "0",
        "height": "0",
        "name": "Fault Open Neutral",
        "label": "Open Neutral: ",
        "format": "{{msg.payload[\"fault open neutral definition\"]}}",
        "layout": "row-spread",
        "className": "",
        "x": 610,
        "y": 500,
        "wires": []
    },
    {
        "id": "ecefcf3a49173255",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "0e6539829c0811ba",
        "order": 5,
        "width": "0",
        "height": "0",
        "name": "Fault Reverse Polarity",
        "label": "Reverse Polarity:",
        "format": "{{msg.payload[\"fault reverse polarity definition\"]}}",
        "layout": "row-spread",
        "className": "",
        "x": 620,
        "y": 540,
        "wires": []
    },
    {
        "id": "9da180c7b509d4f3",
        "type": "inject",
        "z": "5a91ecccc946d063",
        "name": "",
        "props": [
            {
                "p": "payload.leg",
                "v": "0",
                "vt": "str"
            },
            {
                "p": "payload[\"rms current\"]",
                "v": "n/a",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "RVC/ATS_AC_STATUS_1/6",
        "x": 300,
        "y": 600,
        "wires": [
            [
                "d9084964716961c7"
            ]
        ]
    },
    {
        "id": "b1536a09aa83405c",
        "type": "ui_chart",
        "z": "5a91ecccc946d063",
        "name": "AC Power Graph",
        "group": "78b5874c47824c25",
        "order": 12,
        "width": 0,
        "height": 0,
        "label": "AC Power Graph",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "No valid data",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "2",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#d62728",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1390,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "ccc3f5b01ab7df10",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "payload[\"leg definition\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[\"rms voltage\"]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 640,
        "wires": [
            [
                "b1536a09aa83405c"
            ]
        ]
    },
    {
        "id": "597ad182124b8b80",
        "type": "function",
        "z": "5a91ecccc946d063",
        "name": "ATS Source Decode",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Output 1: name of current ATS power source\n\nconst genset_status = global.get('status').power.generator_state || 'stopped';\n\n// If the rmsc value is not numeric (e.g. 'n/a'), then\n// the ATS is not receiving any external power.\nif (isNaN(parseFloat(msg.payload['rms current']))) {\n    msg.payload = 'None';\n} else if (genset_status == 'running') {\n    msg.payload = 'Generator';\n} else {\n    msg.payload = 'Shore';\n}\n\nmsg.type = 'acsource';\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 320,
        "wires": [
            [
                "a3720552c6b29ba4"
            ]
        ]
    },
    {
        "id": "6c2dcc894630b847",
        "type": "comment",
        "z": "5a91ecccc946d063",
        "name": "DC Basic power display (2015-2017) v066",
        "info": "",
        "x": 320,
        "y": 1200,
        "wires": []
    },
    {
        "id": "3e92a3b8d209bc02",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "fb4c3e00.5737a",
        "order": 3,
        "width": "3",
        "height": "1",
        "name": "House Source",
        "label": "",
        "format": "Source:<br> {{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 1320,
        "y": 1240,
        "wires": []
    },
    {
        "id": "67d8fa718c0a9db3",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "d": true,
        "group": "fb4c3e00.5737a",
        "order": 4,
        "width": "3",
        "height": "1",
        "name": "Chassis Battery",
        "label": "Chassis Battery",
        "format": "{{msg.payload}} Volts",
        "layout": "col-center",
        "className": "",
        "x": 1320,
        "y": 1420,
        "wires": []
    },
    {
        "id": "43d9d1813306d287",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "x": 890,
        "y": 1280,
        "wires": [
            [
                "32f2547d9502eb7e",
                "fc7144d7898fffc0"
            ]
        ]
    },
    {
        "id": "35530cb837cc2e14",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status.power.house_battery_priority",
                "pt": "global",
                "to": "payload[\"device priority\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "status.power.house_batteryPriority_def",
                "pt": "global",
                "to": "payload[\"device priority definition\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "status.power.house_battery_volts",
                "pt": "global",
                "to": "payload['dc voltage']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload['dc voltage']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 1280,
        "wires": [
            [
                "43d9d1813306d287"
            ]
        ]
    },
    {
        "id": "2306b01ae2f06ec1",
        "type": "mqtt in",
        "z": "5a91ecccc946d063",
        "name": "",
        "topic": "RVC/DC_SOURCE_STATUS_1/1",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 290,
        "y": 1280,
        "wires": [
            [
                "35530cb837cc2e14"
            ]
        ]
    },
    {
        "id": "3cd49d688a9e8c81",
        "type": "rbe",
        "z": "5a91ecccc946d063",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "x": 890,
        "y": 1320,
        "wires": [
            [
                "43e52edbd020f945",
                "95ab5445e3039285"
            ]
        ]
    },
    {
        "id": "c0d168fec12ba588",
        "type": "mqtt in",
        "z": "5a91ecccc946d063",
        "name": "",
        "topic": "RVC/DC_SOURCE_STATUS_1/2",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 290,
        "y": 1320,
        "wires": [
            [
                "8c6a162c153fc8f7"
            ]
        ]
    },
    {
        "id": "8c6a162c153fc8f7",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status.power.chassis_battery_priority",
                "pt": "global",
                "to": "payload[\"device priority\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "status.power.chassis_battery_priority_def",
                "pt": "global",
                "to": "payload[\"device priority definition\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "status.power.chassis_battery_volts",
                "pt": "global",
                "to": "payload['dc voltage']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload['dc voltage']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 1320,
        "wires": [
            [
                "3cd49d688a9e8c81"
            ]
        ]
    },
    {
        "id": "d94211864cac7a4b",
        "type": "inject",
        "z": "5a91ecccc946d063",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Power",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 270,
        "y": 140,
        "wires": [
            [
                "fdd93a6766b082a3"
            ]
        ]
    },
    {
        "id": "127ce908e6699813",
        "type": "comment",
        "z": "5a91ecccc946d063",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 230,
        "y": 100,
        "wires": []
    },
    {
        "id": "fdd93a6766b082a3",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "32f2547d9502eb7e",
        "type": "ui_gauge",
        "z": "5a91ecccc946d063",
        "name": "House",
        "group": "fb4c3e00.5737a",
        "order": 1,
        "width": "3",
        "height": "2",
        "gtype": "gage",
        "title": "House",
        "label": "DC Volts",
        "format": "{{value}}",
        "min": "0",
        "max": "16",
        "colors": [
            "#ca3838",
            "#00b500",
            "#e6e638"
        ],
        "seg1": "12.2",
        "seg2": "14.5",
        "className": "",
        "x": 1290,
        "y": 1280,
        "wires": []
    },
    {
        "id": "43e52edbd020f945",
        "type": "ui_gauge",
        "z": "5a91ecccc946d063",
        "name": "Chassis",
        "group": "fb4c3e00.5737a",
        "order": 2,
        "width": "3",
        "height": "2",
        "gtype": "gage",
        "title": "Chassis",
        "label": "DC Volts",
        "format": "{{value}}",
        "min": 0,
        "max": "16",
        "colors": [
            "#ca3838",
            "#00b500",
            "#e6e638"
        ],
        "seg1": "11.9",
        "seg2": "14.5",
        "className": "",
        "x": 1300,
        "y": 1320,
        "wires": []
    },
    {
        "id": "95ab5445e3039285",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "Chassis Source",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "status.power.chassis_battery_priority_def",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 1360,
        "wires": [
            [
                "ee3c8d15794372df"
            ]
        ]
    },
    {
        "id": "fc7144d7898fffc0",
        "type": "change",
        "z": "5a91ecccc946d063",
        "name": "House Source",
        "rules": [
            {
                "t": "change",
                "p": "status.power.house_batteryPriority_def",
                "pt": "global",
                "from": "battery soc device",
                "fromt": "str",
                "to": "soc device",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "status.power.house_batteryPriority_def",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 1260,
        "wires": [
            [
                "3e92a3b8d209bc02"
            ]
        ]
    },
    {
        "id": "ee3c8d15794372df",
        "type": "ui_text",
        "z": "5a91ecccc946d063",
        "group": "fb4c3e00.5737a",
        "order": 3,
        "width": "3",
        "height": "1",
        "name": "Chassis Source",
        "label": "",
        "format": "Source:<br> {{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 1320,
        "y": 1360,
        "wires": []
    },
    {
        "id": "09080630937baae8",
        "type": "ui_gauge",
        "z": "5a91ecccc946d063",
        "name": "Volts Leg 1",
        "group": "78b5874c47824c25",
        "order": 4,
        "width": "3",
        "height": "2",
        "gtype": "gage",
        "title": "Leg 1",
        "label": "L1 Volts",
        "format": "{{value}}",
        "min": "0",
        "max": "150",
        "colors": [
            "#ca3838",
            "#00b500",
            "#e6e638"
        ],
        "seg1": "104",
        "seg2": "132",
        "className": "",
        "x": 1370,
        "y": 440,
        "wires": []
    },
    {
        "id": "87b2dbea135eb470",
        "type": "ui_gauge",
        "z": "5a91ecccc946d063",
        "name": "Volts Leg 2",
        "group": "78b5874c47824c25",
        "order": 5,
        "width": "3",
        "height": "2",
        "gtype": "gage",
        "title": "Leg 2",
        "label": "L2 Volts",
        "format": "{{value}}",
        "min": "0",
        "max": "150",
        "colors": [
            "#ca3838",
            "#00b500",
            "#e6e638"
        ],
        "seg1": "104",
        "seg2": "132",
        "className": "",
        "x": 1370,
        "y": 560,
        "wires": []
    },
    {
        "id": "15a630d623f31636",
        "type": "ui_gauge",
        "z": "5a91ecccc946d063",
        "name": "Current Leg 1",
        "group": "78b5874c47824c25",
        "order": 6,
        "width": "3",
        "height": "2",
        "gtype": "gage",
        "title": "",
        "label": "L1 Amps",
        "format": "{{value}}",
        "min": "0",
        "max": "50",
        "colors": [
            "#00b538",
            "#00b500",
            "#e6e638"
        ],
        "seg1": "45",
        "seg2": "50",
        "className": "",
        "x": 1380,
        "y": 400,
        "wires": []
    },
    {
        "id": "302077500a7ecf20",
        "type": "ui_gauge",
        "z": "5a91ecccc946d063",
        "name": "Current Leg 1",
        "group": "78b5874c47824c25",
        "order": 7,
        "width": "3",
        "height": "2",
        "gtype": "gage",
        "title": "",
        "label": "L2 Amps",
        "format": "{{value}}",
        "min": "0",
        "max": "50",
        "colors": [
            "#00b538",
            "#00b500",
            "#e6e638"
        ],
        "seg1": "45",
        "seg2": "50",
        "className": "",
        "x": 1380,
        "y": 520,
        "wires": []
    },
    {
        "id": "9a9cd513c78dac4c",
        "type": "comment",
        "z": "5a91ecccc946d063",
        "name": "Non-graphical display",
        "info": "",
        "x": 1400,
        "y": 720,
        "wires": []
    },
    {
        "id": "c2fc5b03.d08078",
        "type": "ui_template",
        "z": "5a91ecccc946d063",
        "group": "0e6539829c0811ba",
        "name": "120/240 VAC Faults",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div>\n    <b>WARNING:</b> Valid <i>only</i> if equipment (i.e. Xfer Switch) supports fault reporting.\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 620,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "87a7a86683c612d3",
        "type": "comment",
        "z": "5a91ecccc946d063",
        "name": "",
        "info": "<!DOCTYPE html>\n<div style=\"height: 10px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 10px; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    <b>{{msg.payload}}</b><br><br><b>WARNING:</b> Valid <i>only</i> if equipment (i.e. Xfer Switch) supports fault reporting.\n  </span>\n</div>\n<div style=\"height: 8px;\">&nbsp;</div>",
        "x": 820,
        "y": 200,
        "wires": []
    },
    {
        "id": "fa7eb916c91835a0",
        "type": "inject",
        "z": "5a91ecccc946d063",
        "name": "Clear Graph",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "x": 1170,
        "y": 680,
        "wires": [
            [
                "b1536a09aa83405c"
            ]
        ]
    },
    {
        "id": "0b44c7b3ec84a825",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All Inside On",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "All Inside On",
        "payloadType": "str",
        "topic": "",
        "x": 170,
        "y": 600,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "fd50d9d30d5b11f2",
        "type": "file",
        "z": "17d34c2dd41238af",
        "name": "Write Scene",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "false",
        "x": 1130,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "b41047a52c1f36bb",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Kitchen",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Kitchen",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 440,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "c9c12ae3c5b724e2",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Dinnertime",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Dinnertime",
        "payloadType": "str",
        "topic": "",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "71a3e8dcbab05d44",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Bedtime",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Bedtime",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 560,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "7ce3d8624d4caee8",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "TV Time",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "TV Time",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 520,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "5a300a32bb29a2ed",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Good Morning",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Good Morning",
        "payloadType": "str",
        "topic": "",
        "x": 180,
        "y": 360,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "928c453243baa3b7",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Good Evening",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Good Evening",
        "payloadType": "str",
        "topic": "",
        "x": 180,
        "y": 400,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "28c091351018a359",
        "type": "comment",
        "z": "17d34c2dd41238af",
        "name": "Play a Scene v066",
        "info": "",
        "x": 190,
        "y": 300,
        "wires": []
    },
    {
        "id": "4a61b8f7d4120de5",
        "type": "file in",
        "z": "17d34c2dd41238af",
        "name": "Get Scene File",
        "filename": "filename",
        "filenameType": "msg",
        "format": "lines",
        "chunk": false,
        "sendError": false,
        "x": 500,
        "y": 720,
        "wires": [
            [
                "958306e205afdf56"
            ]
        ]
    },
    {
        "id": "07e7fdcdda862f8c",
        "type": "function",
        "z": "17d34c2dd41238af",
        "name": "Play Scene",
        "func": "// Author: Rob Picchione 20180727 v1.1\n//\n// Fill out the Label and Payload fields of a dashboard Button that is input\n// to this function with the name of the Scene file to be executed.\n//\n// Prerequisite: A Scene file of the same exact name must already have been created\n// using the Scene Builder function.\n//\n// This function gets the Scene file name passed from the Payload field of the dashboard \n// button node.\n//\n// The directory path of the scene file is hard coded below in the path variable to avoid\n// having to enter it as a topic in every scene button. If your path is different change it below.\n//\n// The fuction outputs the concatenated path + filename as msg.filename for the Get File node.\n\nlet scenename = msg.payload;\nlet path = global.get ('settings.scenes.scenepath');\n\nmsg = {\n    filename:path+scenename,\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 660,
        "wires": [
            [
                "4a61b8f7d4120de5",
                "1ebf982ca2aca844"
            ]
        ]
    },
    {
        "id": "f4a358d16502902e",
        "type": "catch",
        "z": "17d34c2dd41238af",
        "name": "Play Scene Error",
        "scope": [
            "4a61b8f7d4120de5",
            "07e7fdcdda862f8c",
            "958306e205afdf56"
        ],
        "uncaught": false,
        "x": 500,
        "y": 600,
        "wires": [
            [
                "40624ce8cebbe70a"
            ]
        ]
    },
    {
        "id": "998449a71b14198a",
        "type": "ui_toast",
        "z": "17d34c2dd41238af",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Scene File Does Not Exist",
        "name": "Scene FIle Does Not Exist",
        "x": 970,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "40624ce8cebbe70a",
        "type": "change",
        "z": "17d34c2dd41238af",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "error",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "First Create a Scene with Scene Builder",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 600,
        "wires": [
            [
                "998449a71b14198a"
            ]
        ]
    },
    {
        "id": "fe38227c735979c8",
        "type": "comment",
        "z": "17d34c2dd41238af",
        "name": "Build a Scene v066",
        "info": "",
        "x": 190,
        "y": 1080,
        "wires": []
    },
    {
        "id": "e6bbca4e2692d651",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 8,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All Inside Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "All Inside Off",
        "payloadType": "str",
        "topic": "",
        "x": 170,
        "y": 640,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "09f483d7c6e7b48f",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 9,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "All Outside On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "All Outside On",
        "payloadType": "str",
        "topic": "",
        "x": 180,
        "y": 680,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "604ec36243d36767",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "All Outside Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "All Outside Off",
        "payloadType": "str",
        "topic": "",
        "x": 180,
        "y": 720,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "df1a6363a57f641f",
        "type": "link out",
        "z": "17d34c2dd41238af",
        "name": "Scenes",
        "links": [
            "a40ca2ef.9935e",
            "17216134e6f77df4",
            "75a29edda38bdf80",
            "bcdc58913f221aac"
        ],
        "x": 955,
        "y": 700,
        "wires": []
    },
    {
        "id": "1974c9835e3798a1",
        "type": "ui_dropdown",
        "z": "17d34c2dd41238af",
        "name": "",
        "label": "<b>Select Scene</b>",
        "tooltip": "",
        "place": "Select Scene",
        "group": "ec9d7f42.8db13",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "options": [
            {
                "label": "",
                "value": "Good Morning",
                "type": "str"
            },
            {
                "label": "",
                "value": "Good Evening",
                "type": "str"
            },
            {
                "label": "",
                "value": "Dinnertime",
                "type": "str"
            },
            {
                "label": "",
                "value": "Kitchen",
                "type": "str"
            },
            {
                "label": "",
                "value": "TV Time",
                "type": "str"
            },
            {
                "label": "",
                "value": "Bedtime",
                "type": "str"
            },
            {
                "label": "",
                "value": "All Inside On",
                "type": "str"
            },
            {
                "label": "",
                "value": "All Inside Off",
                "type": "str"
            },
            {
                "label": "",
                "value": "All inside Off",
                "type": "str"
            },
            {
                "label": "",
                "value": "All Outside On",
                "type": "str"
            },
            {
                "label": "",
                "value": "All Outside Off",
                "type": "str"
            },
            {
                "label": "",
                "value": "Scene A",
                "type": "str"
            },
            {
                "label": "",
                "value": "Scene B",
                "type": "str"
            },
            {
                "label": "",
                "value": "Scene C",
                "type": "str"
            },
            {
                "label": "",
                "value": "Scene D",
                "type": "str"
            },
            {
                "label": "",
                "value": "Scene E",
                "type": "str"
            },
            {
                "label": "",
                "value": "Scene F",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 200,
        "y": 1140,
        "wires": [
            [
                "2c091435d332d8f0"
            ]
        ]
    },
    {
        "id": "2c091435d332d8f0",
        "type": "change",
        "z": "17d34c2dd41238af",
        "name": "Save scene name",
        "rules": [
            {
                "t": "set",
                "p": "settings.scenes.scenename",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 1140,
        "wires": [
            [
                "3a8bd1b2910824db"
            ]
        ]
    },
    {
        "id": "327a0711c0f663f7",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "ec9d7f42.8db13",
        "order": 7,
        "width": 5,
        "height": 1,
        "passthru": false,
        "label": "Build Scene",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "build",
        "payloadType": "str",
        "topic": "",
        "x": 170,
        "y": 1560,
        "wires": [
            [
                "087690c9a3ea3fec"
            ]
        ]
    },
    {
        "id": "087690c9a3ea3fec",
        "type": "function",
        "z": "17d34c2dd41238af",
        "name": "Delete Scene File",
        "func": "// (c) 2020 eRVin project Rob Picchione\n//\n// Define path and delete scene file to prepare for new scene definition\n// Output msg1 adds a delay to ensure sucessful deletion of the scene file\n// before new data is written.\n\n\nif (typeof global.get ('settings.scenes.scenename') !== 'object')\n{\n    var file = global.get ('settings.scenes.scenepath') + global.get ('settings.scenes.scenename') ;\n    var msg1 = { 'payload': file } ;\n    var msg2 = { 'filename': file } ;\n    return [msg1, msg2];\n}\n\nthrow \"Please Choose a Scene Name First\";\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1560,
        "wires": [
            [
                "9ff1059de5b6073c"
            ],
            [
                "664244c46d9a750c"
            ]
        ]
    },
    {
        "id": "9ff1059de5b6073c",
        "type": "delay",
        "z": "17d34c2dd41238af",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 600,
        "y": 1540,
        "wires": [
            [
                "a566289cec4cfc4f",
                "63111c945ccb8273"
            ]
        ]
    },
    {
        "id": "664244c46d9a750c",
        "type": "file",
        "z": "17d34c2dd41238af",
        "name": "Delete Existing Scene File",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "delete",
        "x": 650,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "0d6ca6f9807c0fb5",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "Scene A",
        "group": "7ef807d5.1ca3b8",
        "order": 11,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "SCENE A",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Scene A",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 160,
        "y": 760,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "5e1c2feec33bbbbf",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Scene B",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Scene B",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 800,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "9a997edfd7318c33",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 13,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Scene C",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Scene C",
        "payloadType": "str",
        "topic": "scene_c",
        "topicType": "str",
        "x": 160,
        "y": 840,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "4c72d11a68342f4c",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 14,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Scene D",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Scene D",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 880,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "995435753af50d45",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 15,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Scene E",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Scene E",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 920,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "3a02ba7ef626ad76",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "7ef807d5.1ca3b8",
        "order": 16,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Scene F",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "Scene F",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 960,
        "wires": [
            [
                "07e7fdcdda862f8c"
            ]
        ]
    },
    {
        "id": "1ebf982ca2aca844",
        "type": "ui_toast",
        "z": "17d34c2dd41238af",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Scene Active",
        "name": "Scene Active",
        "x": 730,
        "y": 660,
        "wires": []
    },
    {
        "id": "74f134e107dad1e5",
        "type": "ui_template",
        "z": "17d34c2dd41238af",
        "group": "fe130cc1.4b7f6",
        "name": " How to use Scene Builder",
        "order": 1,
        "width": 6,
        "height": 6,
        "format": "<div>\n\n    A \"Scene\" is the learned status of a group of lights that can be \"re-played\" with a single button press. The lights\n    in a scene can be either on or off, or on at a particular dim level. A scene can set the desired status of every\n    light all at once, but sometimes it is undesireable for certain lights to be in a particular scene, so there is an\n    Exclusion option which means no action is taken for the excluded lights. For example, a scene for\n    <i>All Inside Lights On</i> should exclude doing anything to the outside lights.\n    <ol>\n        <li>Scene Builder will automatically capture the current state (on, off, dim level) of all your lights from the\n            network, so first create your scene manually by setting your lights to the desired on, off, and dim state.\n            This can be done either via eRVin, your wall switches, or a combination of both.</li>\n        <li>In <b>Scene Builder</b>, if the list of lights is not displayed below <b>Exclusion List</b>, refresh the\n            browser or select another tab and then reselect the Scenes tab until the checkboxes are visible.</li>\n        <li>Now from the <b>Select Scene</b> dropdown, select the name of the scene name you want to use. </li>\n        <li>In the <b>Exclusion Checklist</b> check the box for all devices you do NOT want to be controlled by the\n            scene. For example, for <i>All Inside Lights On</i> you would check the boxes for all of the outside lights\n            because for this scene you don't want them to be changed from whatever state they may be in. If you change\n            your mind, you may uncheck the box and the light will be added back to the scene. The exclusion list is now\n            persistent across multiple scene creations and the timeout has been eliminated.</li>\n        <li>Click the <b>Build Scene</b> button at the bottom of the Exclusion List, the scene will now be created.</li>\n        <li>Now the corresponding button in <b>Scene Control</b> will activate the scene.</li>\n        <li>In the <b>Delete Scenes</b> section \"Clear All Scene Data\" will delete ALL the exisiting scene files if you want to start fresh.</li>\n    </ol>\n\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 530,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "05aecaeb312f1e82",
        "type": "ui_template",
        "z": "17d34c2dd41238af",
        "group": "ec9d7f42.8db13",
        "name": "Exclusion List Title",
        "order": 4,
        "width": "0",
        "height": "0",
        "format": "<div>\n    <p>\n    <br><b>Exclusion List:</b>\n    </p>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1290,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "ab6b9f6576d8d8a7",
        "type": "ui_toast",
        "z": "17d34c2dd41238af",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Building Scene",
        "name": "Building Scene",
        "x": 1140,
        "y": 1500,
        "wires": []
    },
    {
        "id": "a566289cec4cfc4f",
        "type": "change",
        "z": "17d34c2dd41238af",
        "name": "Clear Scene Selection & Reload Scene List",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "settings.scenes.scenename",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1340,
        "wires": [
            [
                "1974c9835e3798a1"
            ]
        ]
    },
    {
        "id": "26b7459aafc88f9b",
        "type": "catch",
        "z": "17d34c2dd41238af",
        "name": "Build Scene Error",
        "scope": [
            "fd50d9d30d5b11f2",
            "087690c9a3ea3fec",
            "664244c46d9a750c",
            "63111c945ccb8273"
        ],
        "uncaught": false,
        "x": 180,
        "y": 1640,
        "wires": [
            [
                "692cf4cfd7dd75d8"
            ]
        ]
    },
    {
        "id": "5f5c0268c9e1e6d3",
        "type": "ui_toast",
        "z": "17d34c2dd41238af",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Build Scene Error",
        "x": 910,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "5eabc98d437414f1",
        "type": "change",
        "z": "17d34c2dd41238af",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "error.message",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "error.source.name",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 1640,
        "wires": [
            [
                "5f5c0268c9e1e6d3"
            ]
        ]
    },
    {
        "id": "0d6551af83dd7758",
        "type": "complete",
        "z": "17d34c2dd41238af",
        "name": "Scene Build Complete",
        "scope": [
            "63111c945ccb8273"
        ],
        "uncaught": false,
        "x": 920,
        "y": 1500,
        "wires": [
            [
                "ab6b9f6576d8d8a7"
            ]
        ]
    },
    {
        "id": "0f69d4f89055f758",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "Cancel",
        "group": "ec9d7f42.8db13",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#8D4040",
        "icon": "replay",
        "payload": "cancel",
        "payloadType": "str",
        "topic": "",
        "x": 160,
        "y": 1520,
        "wires": [
            [
                "69dcf44a401fee47",
                "3a8bd1b2910824db"
            ]
        ]
    },
    {
        "id": "69dcf44a401fee47",
        "type": "change",
        "z": "17d34c2dd41238af",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "reset",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "settings.scenes.scenename",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 1340,
        "wires": [
            [
                "1974c9835e3798a1"
            ]
        ]
    },
    {
        "id": "958306e205afdf56",
        "type": "function",
        "z": "17d34c2dd41238af",
        "name": "Redirect",
        "func": "//Splits the output into flow1 for lights and flow2 for panel backlights.\n//\npayload = msg.payload;\nvar instance = msg.payload.split(' ')[0];\n\nif (instance <= 60)\n{\n    var msg1 = {payload: msg.payload};\n    return [msg1, null];\n}\n\nvar state = 126 //figure out a way to get this value from instance #\nvar brightness = msg.payload.split(' ')[2];\n\nvar msg2 = {'payload': state + ' ' + brightness}\nreturn [null, msg2];",
        "outputs": 2,
        "noerr": 0,
        "x": 800,
        "y": 720,
        "wires": [
            [
                "df1a6363a57f641f"
            ],
            [
                "d09ed916c8033fd4"
            ]
        ]
    },
    {
        "id": "d09ed916c8033fd4",
        "type": "link out",
        "z": "17d34c2dd41238af",
        "name": "Scene Panel Lights",
        "links": [
            "2959b7ca.912418",
            "8a7b2dfc0fce1cb4"
        ],
        "x": 955,
        "y": 740,
        "wires": []
    },
    {
        "id": "3a53d8eb2ed55a8f",
        "type": "inject",
        "z": "17d34c2dd41238af",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Scenes",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.663",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 210,
        "y": 180,
        "wires": [
            [
                "eace151696345db8",
                "b082dcda3e38efdd"
            ]
        ]
    },
    {
        "id": "7135c77cca02902e",
        "type": "comment",
        "z": "17d34c2dd41238af",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 170,
        "y": 140,
        "wires": []
    },
    {
        "id": "eace151696345db8",
        "type": "change",
        "z": "17d34c2dd41238af",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "b082dcda3e38efdd",
        "type": "ui_text",
        "z": "17d34c2dd41238af",
        "group": "ae4a73f53fea2131",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "Location",
        "label": "",
        "format": "Tab Name: {{msg.payload.tabname}} <br> Source: {{msg.payload.source}} <br> Tab Version: {{msg.payload.tabver}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 440,
        "y": 180,
        "wires": []
    },
    {
        "id": "2da258c49720b73e",
        "type": "fs-ops-dir",
        "z": "17d34c2dd41238af",
        "name": "Get All Scene File Names",
        "path": "settings.scenes.scenepath",
        "pathType": "global",
        "filter": "*",
        "filterType": "str",
        "dir": "files",
        "dirType": "msg",
        "x": 570,
        "y": 420,
        "wires": [
            [
                "67049a5739e2fd64"
            ]
        ]
    },
    {
        "id": "67049a5739e2fd64",
        "type": "fs-ops-delete",
        "z": "17d34c2dd41238af",
        "name": "",
        "path": "settings.scenes.scenepath",
        "pathType": "global",
        "filename": "files",
        "filenameType": "msg",
        "x": 950,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "55e08457b2c498bf",
        "type": "inject",
        "z": "17d34c2dd41238af",
        "name": "inject at start",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 830,
        "y": 1260,
        "wires": [
            [
                "3a8bd1b2910824db"
            ]
        ]
    },
    {
        "id": "600270b9085856ef",
        "type": "ui_button",
        "z": "17d34c2dd41238af",
        "name": "",
        "group": "e404279f57445b75",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": false,
        "label": "Clear All Scene Data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Do you really want to delete all scene data?",
        "payloadType": "str",
        "topic": "Are you sure?",
        "topicType": "str",
        "x": 520,
        "y": 360,
        "wires": [
            [
                "4c02ee7a1b652380"
            ]
        ]
    },
    {
        "id": "4c02ee7a1b652380",
        "type": "ui_toast",
        "z": "17d34c2dd41238af",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "r u sure?",
        "x": 760,
        "y": 360,
        "wires": [
            [
                "e0f6988881077956"
            ]
        ]
    },
    {
        "id": "e0f6988881077956",
        "type": "switch",
        "z": "17d34c2dd41238af",
        "name": "OK only",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 940,
        "y": 360,
        "wires": [
            [
                "2da258c49720b73e"
            ]
        ]
    },
    {
        "id": "ab0d6410ef7a7f76",
        "type": "ui_list",
        "z": "17d34c2dd41238af",
        "group": "ec9d7f42.8db13",
        "name": "Exclusion List",
        "order": 5,
        "width": "6",
        "height": "6",
        "lineType": "two",
        "actionType": "check",
        "allowHTML": false,
        "outputs": 1,
        "topic": "",
        "x": 1280,
        "y": 1160,
        "wires": [
            [
                "3397a3975470f0a6"
            ]
        ]
    },
    {
        "id": "3a8bd1b2910824db",
        "type": "function",
        "z": "17d34c2dd41238af",
        "name": "get light list save as object",
        "func": "// v0.66\n\n// \u00c2\u00a9 2025 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\n// Global init in System_Notify upon startup scans all the switches in the Lights tab,\n// builds a list and saves all the valid switches found in global.status.lights\n\n// This flow further filters that list to remove any Aquahot switches.\n// Then it saves the following values to global.settings.scenes.scenelist\n//  - current state (on/off/dim)\n//  - brightness\n//  - title (the light friendly name)\n//  - description (the insatance)\n// Also note the instance matches the index\n\n// Read the 'status.lights' object from global context\nconst lightsStatus = global.get(\"status.lights\") || {};\nconst settings = global.get(\"settings\") || {}; // Get settings object\nsettings.scenes = settings.scenes || {}; // Ensure settings.scenes exists\n\n// Initialize an object to store the formatted lights with instance ID as key\nconst sceneList = {};\n\n// Iterate through the keys in the 'lightsStatus' object\nObject.keys(lightsStatus).forEach((instance) => {\n    const light = lightsStatus[instance];\n\n    // Ensure the instance has a name property and does not contain \"Aquahot\"\n    if (light && light.name && !light.name.toLowerCase().includes(\"aquahot\")) {\n        sceneList[instance] = {\n            title: light.name,\n            description: instance, // **Fix: Include the instance ID**\n            state: [\"on\", \"off\", \"dim\"].includes(light.state) ? light.state : \"off\",\n            brightness: (typeof light.brightness === \"number\" && light.brightness >= 0 && light.brightness <= 100)\n                ? light.brightness\n                : 0\n        };\n    }\n});\n\n// Save the output to global context at settings.scenes.scenelist\nsettings.scenes.scenelist = sceneList;\nglobal.set(\"settings\", settings);\n\n// When a new scene starts, refresh scenetemp from scenelist\n// global.set(\"settings.scenes.scenetemp\", JSON.parse(JSON.stringify(global.get(\"settings.scenes.scenelist\") || {})));\n\n// Return the new scene list\nreturn { payload: sceneList };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "3397a3975470f0a6",
        "type": "function",
        "z": "17d34c2dd41238af",
        "name": "Build Light List for Scene - input array or object",
        "func": "// v0.66\n\n// \u00c2\u00a9 2025 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\n// This function modifies `scenetemp` by:\n// - Removing checked lights (`isChecked = true`).\n// - Restoring unchecked lights (`isChecked = false`).\n\n// Retrieve global settings\nconst settings = global.get(\"settings\") || {};\nif (!settings.scenes) return msg; // No scenes object to modify\n\n// Ensure `scenetemp` is initialized as a fresh copy of `scenelist` if missing\nif (!settings.scenes.scenetemp) {\n    settings.scenes.scenetemp = JSON.parse(JSON.stringify(settings.scenes.scenelist));\n}\n\n// Reference `scenetemp` and `scenelist`\nconst sceneTemp = settings.scenes.scenetemp;\nconst sceneList = settings.scenes.scenelist;\nconst selectedItems = Array.isArray(msg.payload) ? msg.payload : [msg.payload]; // Ensure array format\n\nselectedItems.forEach(item => {\n    if (item.description) {\n        const key = String(item.description); // Ensure key is a string for matching\n\n        if (item.isChecked) {\n            // Remove item from `scenetemp`\n            delete sceneTemp[key];\n        } else {\n            // Restore item to `scenetemp` if it exists in `scenelist`\n            if (sceneList[key]) {\n                sceneTemp[key] = sceneList[key];\n            }\n        }\n    }\n});\n\n// Explicitly update global context for persistence\nglobal.set(\"settings.scenes.scenetemp\", sceneTemp);\n\n// Return updated temporary scene list\nreturn { payload: sceneTemp };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "0ae690e7711b03d7",
        "type": "comment",
        "z": "17d34c2dd41238af",
        "name": "v0.663",
        "info": "",
        "x": 150,
        "y": 80,
        "wires": []
    },
    {
        "id": "63111c945ccb8273",
        "type": "function",
        "z": "17d34c2dd41238af",
        "name": "Write Scenelist to File",
        "func": "var scenetemp = global.get('settings.scenes.scenetemp') || {};\nvar lightsStatus = global.get('status.lights') || {};\nvar file = msg.payload;\n\n// State mapping for replacements\nvar stateMap = { \"on\": 2, \"off\": 3, \"dim\": 0 };\n\n// Update scenetemp with current brightness and state from lightsStatus\nfor (let [instance, scene] of Object.entries(scenetemp)) {\n    if (lightsStatus[instance]) { // Ensure instance exists in lightsStatus\n        scene.state = lightsStatus[instance].state || scene.state; // Update state\n        scene.brightness = lightsStatus[instance].brightness ?? scene.brightness; // Update brightness\n    }\n}\n\n// Write updated scenetemp to file\nfor (let [key, scene] of Object.entries(scenetemp)) {\n    if (scene.command !== null) {\n        let mappedState = stateMap[scene.state] ?? scene.state; // Default to original if not found\n        node.send({\n            filename: file,\n            payload: `${scene.description} ${mappedState} ${scene.brightness}`\n        });\n    }\n}\n\nglobal.set('settings.scenes.scenetemp', scenetemp); // Save updated values\n\nnode.done();\nreturn;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 1540,
        "wires": [
            [
                "fd50d9d30d5b11f2"
            ]
        ]
    },
    {
        "id": "692cf4cfd7dd75d8",
        "type": "switch",
        "z": "17d34c2dd41238af",
        "name": "Block \"no such file...\" errors",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "cont",
                "v": "no such file",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 420,
        "y": 1640,
        "wires": [
            [
                "5eabc98d437414f1"
            ],
            []
        ]
    },
    {
        "id": "18eab7d60e4d1aeb",
        "type": "comment",
        "z": "17d34c2dd41238af",
        "name": "Clear All Scene Data v066",
        "info": "Quick method for the user to start fresh \nwith building scenes by clearing all the \nexisting scene files. Scene files are text\nfiles containing a line for each device \n[instance command brightness] that \nare \"played\" when the scene is activated.\n\nDeletes all the files in the directory\ndefined by global.settings.scenes.scenepath\n\nNormally for eRVin systems this will be:\n/coachproxy/home/pi/.node-red/scenes",
        "x": 530,
        "y": 300,
        "wires": []
    },
    {
        "id": "fbcc13c5a2684739",
        "type": "comment",
        "z": "17d34c2dd41238af",
        "name": "Exclude Instances From Scenes v0661",
        "info": "Allows checking off specific instances so they\nwill not be included in a scene. For example \nyou may not want devices such as a water pump\nincluded in any lighting scenes. Or you may not \nwant to mix exterior lighting scenes with\nintereir lighting scenes and vice versa.\n\nThe exclusion list is now bidirectionsal. That is\nchecking a box will remove that instance, and\nunchecking the box wil restore it. The exclusion\nlist is also now independendent of\nthe Scene name selection and is persistent\nthruought the creation of multiple scenes.\nHowever, it will be cleared at statrtup.",
        "x": 1150,
        "y": 1100,
        "wires": []
    },
    {
        "id": "e26b30eb7736ab62",
        "type": "inject",
        "z": "17d34c2dd41238af",
        "name": "inject at start",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "settings.scenes.scenelist",
        "payloadType": "global",
        "x": 1090,
        "y": 1160,
        "wires": [
            [
                "ab0d6410ef7a7f76"
            ]
        ]
    },
    {
        "id": "0dfd08f3f513293c",
        "type": "inject",
        "z": "17d34c2dd41238af",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1220,
        "y": 1280,
        "wires": [
            [
                "371176e05bc4bc0f"
            ]
        ]
    },
    {
        "id": "371176e05bc4bc0f",
        "type": "change",
        "z": "17d34c2dd41238af",
        "name": "",
        "rules": [
            {
                "t": "delete",
                "p": "settings.scenes.scenetemp",
                "pt": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1520,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "318e192b9c7de441",
        "type": "ui_switch",
        "z": "60ba2c9ab24c420e",
        "name": "33_Aquahot_Burner",
        "label": "Aquahot Burner",
        "tooltip": "",
        "group": "ff243d9021e510cb",
        "order": 22,
        "width": "3",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "33_state_Aquahot Burner",
        "topicType": "str",
        "onvalue": "on",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1060,
        "y": 500,
        "wires": [
            [
                "94c2ddf2da6e8dac"
            ]
        ]
    },
    {
        "id": "826cb531142dcfcd",
        "type": "file function",
        "z": "60ba2c9ab24c420e",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 643.999885559082,
        "y": 513,
        "wires": [
            [
                "318e192b9c7de441"
            ],
            [],
            [
                "96c99fefcb4a216d"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "7b9f744508f60922",
        "type": "mqtt in",
        "z": "60ba2c9ab24c420e",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/33",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 263.99988555908203,
        "y": 513,
        "wires": [
            [
                "826cb531142dcfcd"
            ]
        ]
    },
    {
        "id": "2ea2c731c7fb4603",
        "type": "mqtt in",
        "z": "60ba2c9ab24c420e",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/24",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 263.99988555908203,
        "y": 433,
        "wires": [
            [
                "728d2c3bcec91c48"
            ]
        ]
    },
    {
        "id": "728d2c3bcec91c48",
        "type": "file function",
        "z": "60ba2c9ab24c420e",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 643.999885559082,
        "y": 433,
        "wires": [
            [
                "3329550cd2e68bf6"
            ],
            [],
            [
                "1346baeba66e7e9d"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "3329550cd2e68bf6",
        "type": "ui_switch",
        "z": "60ba2c9ab24c420e",
        "name": "24_Aquahot_Electric",
        "label": "Aquahot Electric",
        "tooltip": "",
        "group": "ff243d9021e510cb",
        "order": 22,
        "width": "3",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "24_state_Aquahot Electric",
        "topicType": "str",
        "onvalue": "on",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1061.0000610351562,
        "y": 421,
        "wires": [
            [
                "94c2ddf2da6e8dac"
            ]
        ]
    },
    {
        "id": "7b9ffd35b8435df0",
        "type": "inject",
        "z": "60ba2c9ab24c420e",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Aquahot",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 230,
        "y": 120,
        "wires": [
            [
                "80e2224466562082"
            ]
        ]
    },
    {
        "id": "438a4da6ee39e956",
        "type": "comment",
        "z": "60ba2c9ab24c420e",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 190,
        "y": 60,
        "wires": []
    },
    {
        "id": "80e2224466562082",
        "type": "change",
        "z": "60ba2c9ab24c420e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "592d457015bb334c",
        "type": "comment",
        "z": "60ba2c9ab24c420e",
        "name": "Optional - Owner can add Aquahot Controls by employing unused channels. The channels below are unused on this floorplan. Open me for URL.",
        "info": "see https://myervin.com/adding-aquahot-control",
        "x": 600,
        "y": 260,
        "wires": []
    },
    {
        "id": "94c2ddf2da6e8dac",
        "type": "link out",
        "z": "60ba2c9ab24c420e",
        "name": "Aquahot Controls",
        "mode": "link",
        "links": [
            "3b9df8297ed1c575",
            "a05ac2b7.d426d"
        ],
        "x": 1278.999885559082,
        "y": 453,
        "wires": []
    },
    {
        "id": "96c99fefcb4a216d",
        "type": "vsh-virtual-device",
        "z": "60ba2c9ab24c420e",
        "name": "Aquahot Burner",
        "topic": "33",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1040,
        "y": 540,
        "wires": [
            [
                "4a4b3b94746df512"
            ]
        ]
    },
    {
        "id": "1346baeba66e7e9d",
        "type": "vsh-virtual-device",
        "z": "60ba2c9ab24c420e",
        "name": "Aquahot Electric",
        "topic": "33",
        "connection": "",
        "template": "SWITCH",
        "retrievable": false,
        "passthrough": false,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1040,
        "y": 380,
        "wires": [
            [
                "4a4b3b94746df512"
            ]
        ]
    },
    {
        "id": "4a4b3b94746df512",
        "type": "link out",
        "z": "60ba2c9ab24c420e",
        "name": "Aquahot Alexa",
        "mode": "link",
        "links": [
            "69cb324f56bfeecf"
        ],
        "x": 1441.5045166015625,
        "y": 451.9453125,
        "wires": []
    },
    {
        "id": "cef4d384262906ab",
        "type": "link out",
        "z": "a9a1344b8e184732",
        "name": "GPS",
        "mode": "link",
        "links": [
            "c5b4b8df.138d88",
            "285a9715bf37ed15",
            "3bb54f5f7c258c88",
            "8eff0d3cec8e8955"
        ],
        "x": 1035,
        "y": 740,
        "wires": []
    },
    {
        "id": "b32210cf398c61df",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "Set Tank Trend Defaults",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 240,
        "y": 840,
        "wires": [
            [
                "9e61711f91fe0b57"
            ]
        ]
    },
    {
        "id": "4a3beb8a17901441",
        "type": "mqtt in",
        "z": "a9a1344b8e184732",
        "name": "",
        "topic": "CP/TANK_STATUS/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 210,
        "y": 720,
        "wires": [
            [
                "d95923de19e3b864"
            ]
        ]
    },
    {
        "id": "3a74bd7c92af4d3c",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "name": "Shore Water Valve",
        "info": "v064\n\n\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\nPrevents overfilling or wasting water if one forgets to turn off the fresh tank fill valve.\nRequires installation of an appropriate electric water valve such as the US Solid 2 wire models.\nhttps://www.amazon.com/gp/product/B06WWPZWGZ/ref=ppx_yo_dt_b_search_asin_title?ie=UTF8&th=1\n\nThe valve can be controlled via an unused lighting channel on a Spyder/Firefly system. Future\nenhancements to include support via MQTT for other control devices such as a Shelly Plus Uni.\n\nGeneral Operation:\n\nWill turn off the shore water valve if the the gray or black tank reaches 100%.\nWill turn off the shore water valve if the fresh tank reaches 100% and the overfill delay expires.\n\nThe Settings tab in the Dashboard has a Tank Overfill Protection section\nShore Valve ID is the instance number for the shore valve.\nFresh Tank Fill Delay is the delay to be imposed AFTER the fresh tank reaches 100%.\n\nThe reason for the Fresh Tank Fill Delay is to create some hysteresis. In practice if the fresh tank \nreaches 100% and immediately shuts off the shore water, motion in the coach can cause the level to drop\nback below 100%, then back to 100%, creating an annoyance where the shore water valve keeps shutting off, \njust by, for example, someone walking thru the coach. In addition, most tank sensors reach 100% before the\ntank is actually full. This is particularly true of the SeeLevel sensors. On my Entegra the SeeLevel sensor\nis a couple of inches below the top of the tank. I can fill for 10-15 minutes more after 100% before the\ntank overflows.\n\n\n",
        "x": 180,
        "y": 680,
        "wires": []
    },
    {
        "id": "d95923de19e3b864",
        "type": "function",
        "z": "a9a1344b8e184732",
        "name": "Tanks Full? v2",
        "func": "//\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n// Adds support for shore water valve automatic shut off when any tank reaches 100%//\n// - requires the standard RV-C spec tank data PGN to be active\n// - requires most of the other flows in this tab to be enabled\n// \n//\n//\nvar valveinstance = global.get('settings.tankprotect.shorevalve_id');\nvar commandnum = \"3\"; // 3 = off, 2 = on\nvar freshdelay = 60000 * (global.get('settings.tankprotect.freshfill_delay')); //milliseconds ex. 300000 = 5 min\nvar tankinst = msg.payload.tankinst\nvar tanklevel = msg.payload.level;\nvar previous = msg.payload.previous;\n//var trend = global.get('tanklevels')[tankinst].trend;\nvar trend = msg.payload.trend\n \n// The below line tests for the fresh tank level = \"100\" and if true command is set = 'off' (3),\n// if not it falls thru and sets command = 'on'(2)\n\n//var command = (tanklevel == \"100\" ) ? \"off\" : \"on\";\n//var commandnum = (tanklevel == \"100\") ? \"3\" : \"2\"; //3 is off, 2 is on\n//var commandnum = (tanklevel == \"100\" && trend == \"filling\") ? \"3\" : \"6\";\n\n// Only send a message if the tank level is 100%, the trend is \"filling\".\nif (tanklevel == 100 && trend == \"filling\" && previous < tanklevel) {\n    msg.payload = valveinstance + ' ' + commandnum;\n    msg.tanklevel = tanklevel;\n    msg.tankinst = tankinst;\n    msg.trend = trend;\n    msg.delay = freshdelay;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 720,
        "wires": [
            [
                "6e92eaced6c6cd84"
            ]
        ],
        "info": "//\r\n// Copyright (C) 2019 Wandertech LLC\r\n// Copyright (C) eRVin project mods 2020\r\n// Copyright (C) eRVin project alexa-virtual mods 2021\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\n// Input: the JSON output of DC_DIMMER_STATUS_3/# for a light.\r\n// Output 1: \"dim\", \"on\" or \"off\" payload to set toggle switch indicator.\r\n// Output 2: brightness level (0-100) to set optional slider value.\r\n// Output 3: for alexa-virtual node; powerState, brightness, instance to update status in the Alexa app\r\n//\r\n// Also saves the on/off status, brightness and Alexa powerState into global 'status'\r\n// context for use by other nodes.\r\n//\r\n// Built-in RBE functionality only outputs messages if the value has\r\n// changed from the previously recorded value.\r\n\r\nvar instance = msg.payload.instance;\r\nvar brightness = msg.payload['operating status (brightness)'];\r\nvar previous = global.get('status').lights[instance];\r\n//var payloadAlexa = {'powerState':'OFF', 'brightness':0, 'instance':instance};\r\n\r\n// eRVin mod: Instead of just on/off for all lights, distinguish between dimable and \r\n// non-dimmable and off. One reason for this is to allow use of a global variable 'onmode'\r\n// to allow the user a choice between full on and previous dim value. for proper operation\r\n// configure the dashboard switch nodes so dimmable lights have \r\n// an ON PAYLOAD = dim, and non-dimmable have an ON PAYLOAD = on. Appropriate\r\n// changes have also been made to accomadate this in the command_dc_dimmer_ervin.js\r\n// \r\n// The below line tests for brightness = 100 and if true command is set = 'on',\r\n// if not it falls thru and tests for brightness > 0. If true it sets command = 'dim',\r\n// if not it falls thru and sets command = 'off'\r\n\r\n\r\nvar command = (brightness == 100) ? 'on' : (brightness > 0) ? 'dim' : 'off';\r\n\r\n// The below adds the additional processing for payloadAlexa to convert the eRVin 'state' to the\r\n// 'powerState' value required by the Alexa-Virtual contrib nodes\r\n\r\nvar powerState = (brightness == 100) ? 'ON' : (brightness > 0) ? 'ON' : 'OFF';\r\nvar payloadAlexa = {'powerState':powerState, 'brightness':brightness, 'instance':instance};\r\n\r\nvar msg1 = null;\r\nvar msg2 = null;\r\nvar msg3 = null;\r\n\r\n// Only send a message if the value has changed.\r\nif (previous.state != command) {\r\n  if (previous) {\r\n    global.set('status.lights[' + instance + '].state', command);\r\n  }\r\n  msg1 = { 'payload': command };\r\n}\r\n\r\nif (previous.brightness != brightness && brightness <= 100) {\r\n  global.set('status.lights[' + instance + '].brightness', brightness);\r\n  msg2 = { 'payload': brightness };\r\n  msg3 = { 'payload':payloadAlexa };\r\n}\r\n\r\n\r\nif (previous.powerState != powerState) {\r\n  if (previous) {\r\n    global.set('status.lights[' + instance + '].powerState', powerState);\r\n  }\r\n  msg3 = { 'payload':payloadAlexa };\r\n}\r\n\r\nreturn [ msg1, msg2, msg3 ];\r\n\r\n"
    },
    {
        "id": "9e61711f91fe0b57",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "tanklevels[0].trend",
                "pt": "global",
                "to": "draining",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "tanklevels[1].trend",
                "pt": "global",
                "to": "filling",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "tanklevels[2].trend",
                "pt": "global",
                "to": "filling",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "198707b3dcb6dff7",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "name": "Post Default Tank Trend & Settings Info to Global Context ",
        "info": "v064\n\n\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\nThis flow only sets initialization values for the tank\ntrend indicators in the tank level status dashboard\n",
        "x": 300,
        "y": 800,
        "wires": []
    },
    {
        "id": "e485640b763ac5f9",
        "type": "delay",
        "z": "a9a1344b8e184732",
        "name": "Fresh Tank Shut Off Delay",
        "pauseType": "delayv",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 870,
        "y": 700,
        "wires": [
            [
                "595acd4376e2ef86"
            ]
        ]
    },
    {
        "id": "6e92eaced6c6cd84",
        "type": "switch",
        "z": "a9a1344b8e184732",
        "name": "",
        "property": "tankinst",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 640,
        "y": 720,
        "wires": [
            [
                "e485640b763ac5f9"
            ],
            [
                "cef4d384262906ab"
            ]
        ]
    },
    {
        "id": "595acd4376e2ef86",
        "type": "link out",
        "z": "a9a1344b8e184732",
        "name": "GPS",
        "mode": "link",
        "links": [
            "c5b4b8df.138d88",
            "285a9715bf37ed15",
            "3bb54f5f7c258c88",
            "8eff0d3cec8e8955"
        ],
        "x": 1035,
        "y": 700,
        "wires": []
    },
    {
        "id": "d120f2f51b3d1dd1",
        "type": "ui_numeric",
        "z": "a9a1344b8e184732",
        "name": "Shore Valve ID",
        "label": "Shore Valve ID",
        "tooltip": "",
        "group": "6b85ba73db24b757",
        "order": 2,
        "width": "0",
        "height": "0",
        "wrap": true,
        "passthru": false,
        "topic": "shorevalve_id",
        "topicType": "str",
        "format": "{{msg.payload}}",
        "min": "1",
        "max": "200",
        "step": 1,
        "className": "",
        "x": 590,
        "y": 940,
        "wires": [
            [
                "c5a4f991dc1990dd"
            ]
        ]
    },
    {
        "id": "c5a4f991dc1990dd",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.tankprotect.shorevalve_id",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "0dc2cc057773a16b",
        "type": "ui_template",
        "z": "a9a1344b8e184732",
        "group": "6b85ba73db24b757",
        "name": "Tank Overfill Protection Settings",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<!DOCTYPE html>\n<html>\n<body>\n    <div style=\"margin-bottom: 0px;\">\n            <p style=\"font-size:120%;\"><b>Tank Overfill Protection Settings</b></p>\n            <p style=\"line-height: 1; white-space: nowrap;\"> <!--style=\"font-size:70%;\"-->\n            These settings only need to be set once. See <a href=\"https://myervin.com\">myeRVin.com</a> for additional info. Requires installation of a shore water valve controlled by a MQTT device.<br>\n            <b>Shore Valve ID</b> - The decimal instance value of the shore valve (range 1-200).<br>\n            <b>Fresh Tank Fill Delay</b> - Time in minutes (range 1-30).\n            </p>\n    </div>\n</body>\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 640,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "74193b2a9f264653",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.tankprotect.shorevalve_id",
        "payloadType": "global",
        "x": 290,
        "y": 940,
        "wires": [
            [
                "d120f2f51b3d1dd1"
            ]
        ]
    },
    {
        "id": "0265a8dfd2dbc347",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "name": "Tank Overfill Protection Settings",
        "info": "v064\n\n\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\nThis flow only sets the global context values for the shore water valve ID\nand the fresh fill shutoff delay.\n\nSee Shore Water Valve for more details.\n\nText, dropdown and number dashboard nodes accept the input values\nand write them to global context with the Change nodes.\n\nAt initilization, the inject nodes copy the settings from  global\ncontext and populate the buttons with the correct values.",
        "x": 220,
        "y": 900,
        "wires": []
    },
    {
        "id": "532eeb1a187a9bfb",
        "type": "ui_numeric",
        "z": "a9a1344b8e184732",
        "name": "Fresh Tank Fill Delay",
        "label": "Fresh Tank Fill Delay",
        "tooltip": "",
        "group": "6b85ba73db24b757",
        "order": 3,
        "width": "0",
        "height": "0",
        "wrap": true,
        "passthru": false,
        "topic": "freshfill_delay",
        "topicType": "str",
        "format": "{{msg.payload}}",
        "min": "1",
        "max": "30",
        "step": 1,
        "className": "",
        "x": 610,
        "y": 980,
        "wires": [
            [
                "89ddfc9cef450386"
            ]
        ]
    },
    {
        "id": "89ddfc9cef450386",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.tankprotect.freshfill_delay",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "5efd6ad0cce2bce6",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.tankprotect.freshfill_delay",
        "payloadType": "global",
        "x": 290,
        "y": 980,
        "wires": [
            [
                "532eeb1a187a9bfb"
            ]
        ]
    },
    {
        "id": "2a5634bb200ac312",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "settings.tanksense.srcaddr",
        "payloadType": "global",
        "x": 270,
        "y": 1120,
        "wires": [
            [
                "8e12f0d46f3c7129"
            ]
        ]
    },
    {
        "id": "8e12f0d46f3c7129",
        "type": "ui_numeric",
        "z": "a9a1344b8e184732",
        "name": "Source Address",
        "label": "Source Address",
        "tooltip": "All = 0, SeeLevel = 048",
        "group": "6b85ba73db24b757",
        "order": 5,
        "width": 0,
        "height": 0,
        "wrap": true,
        "passthru": false,
        "topic": "",
        "topicType": "str",
        "format": "{{msg.payload}}",
        "min": "0",
        "max": "256",
        "step": 1,
        "className": "",
        "x": 570,
        "y": 1120,
        "wires": [
            [
                "90029f2e85db5465"
            ]
        ]
    },
    {
        "id": "90029f2e85db5465",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Tank Sensor Source Address",
        "rules": [
            {
                "t": "set",
                "p": "settings.tanksense.srcaddr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "ecdc5f9e995e9c5b",
        "type": "ui_template",
        "z": "a9a1344b8e184732",
        "group": "6b85ba73db24b757",
        "name": "Tank Sensor Source Address",
        "order": 4,
        "width": "",
        "height": "",
        "format": "<!DOCTYPE html>\n<html>\n\n<body>\n    <div style=\"margin-bottom: 0px;\">\n        <p style=\"font-size:120%;\"><b>Tank Sensor Source Address</b></p>\n        <p style=\"line-height: 1; white-space: nowrap;\">\n            <!--style=\"font-size:70%;\"-->\n            If there is a conflict between tank level senders on the RV-C network, specify the Source Address of the valid sensor in hex. The defualt value is 48.<br>\n            (range 1-254).<br>\n        </p>\n    </div>\n</body>\n\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 610,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "fe178d164b58efbb",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "name": "Tank Sensor Filter Source Address",
        "info": "v064\n\n\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\nThis flow only sets the value of the source address to be used to \nread tank level info in the event that there is more than one \ndevice broadcasting the same tank level PGN's.\n\nNote that an upgraded version of rvc2mqtt.pl is required that posts the\nsource address to MQTT.\n\nText, dropdown and number dashboard nodes accept the input values\nand write them to global context with the Change nodes.\n\nAt initilization, the inject nodes copy the settings from global\ncontext and populate the buttons with the correct values.",
        "x": 230,
        "y": 1080,
        "wires": []
    },
    {
        "id": "c5803d89b7dc9125",
        "type": "mqtt in",
        "z": "a9a1344b8e184732",
        "name": "",
        "topic": "CP/TANK_STATUS/Fresh",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 220,
        "y": 440,
        "wires": [
            [
                "4d4b29378aa5c467",
                "2a9c5963845a7d68"
            ]
        ]
    },
    {
        "id": "628f60b31ae08fc2",
        "type": "ui_text",
        "z": "a9a1344b8e184732",
        "group": "87ed7eaa.ab8fe",
        "order": 1,
        "width": "2",
        "height": "1",
        "name": "Fresh:",
        "label": "Fresh",
        "format": "{{msg.payload}}%",
        "layout": "col-center",
        "className": "",
        "x": 960,
        "y": 420,
        "wires": []
    },
    {
        "id": "05aa01ed5722c158",
        "type": "mqtt in",
        "z": "a9a1344b8e184732",
        "name": "",
        "topic": "CP/TANK_STATUS/Grey",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 220,
        "y": 480,
        "wires": [
            [
                "ccfca70fabd3e5a8",
                "9dee0dcef3c9f1a4"
            ]
        ]
    },
    {
        "id": "079f0ad8a9f74115",
        "type": "ui_text",
        "z": "a9a1344b8e184732",
        "group": "87ed7eaa.ab8fe",
        "order": 2,
        "width": "2",
        "height": "1",
        "name": "Grey:",
        "label": "Grey",
        "format": "{{msg.payload}}%",
        "layout": "col-center",
        "className": "",
        "x": 960,
        "y": 480,
        "wires": []
    },
    {
        "id": "c9aa77b0a0b72eeb",
        "type": "mqtt in",
        "z": "a9a1344b8e184732",
        "name": "",
        "topic": "CP/TANK_STATUS/Black",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 220,
        "y": 520,
        "wires": [
            [
                "40ebc6e007c0c91e",
                "d4ec369c7b3957b0"
            ]
        ]
    },
    {
        "id": "7e802f12612ae7d6",
        "type": "ui_text",
        "z": "a9a1344b8e184732",
        "group": "87ed7eaa.ab8fe",
        "order": 3,
        "width": "2",
        "height": "1",
        "name": "Black:",
        "label": "Black",
        "format": "{{msg.payload}}%",
        "layout": "col-center",
        "className": "",
        "x": 960,
        "y": 540,
        "wires": []
    },
    {
        "id": "709e85d569a84597",
        "type": "rbe",
        "z": "a9a1344b8e184732",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "x": 560,
        "y": 540,
        "wires": [
            [
                "7e802f12612ae7d6",
                "1918d021577a8bc8",
                "82e0626321b5bef1"
            ]
        ]
    },
    {
        "id": "26f8a3e310015d0a",
        "type": "rbe",
        "z": "a9a1344b8e184732",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "x": 560,
        "y": 480,
        "wires": [
            [
                "079f0ad8a9f74115",
                "1918d021577a8bc8",
                "849c195dbd16a837"
            ]
        ]
    },
    {
        "id": "7c8302be3b9f4e06",
        "type": "rbe",
        "z": "a9a1344b8e184732",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 560,
        "y": 420,
        "wires": [
            [
                "628f60b31ae08fc2",
                "1918d021577a8bc8",
                "7cba22d907e60bb7"
            ]
        ]
    },
    {
        "id": "7c13cb7e1ff901d8",
        "type": "ui_chart",
        "z": "a9a1344b8e184732",
        "name": "Tanks Bar Chart",
        "group": "87ed7eaa.ab8fe",
        "order": 7,
        "width": 0,
        "height": 0,
        "label": "",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "No Valid Data",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#999999",
            "#424242",
            "#941100",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 990,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "b42edad320d1574a",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "Tank Chart Setup",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 380,
        "wires": [
            [
                "b3374952a3193c37"
            ]
        ]
    },
    {
        "id": "b3374952a3193c37",
        "type": "function",
        "z": "a9a1344b8e184732",
        "name": "Tank Chart Setup",
        "func": "var msgs = [\n    {topic: 'Fresh', payload: 0},\n    {topic: 'Grey', payload: 0},\n    {topic: 'Black', payload: 0},\n];\n\nreturn [msgs];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 380,
        "wires": [
            [
                "1918d021577a8bc8"
            ]
        ]
    },
    {
        "id": "1918d021577a8bc8",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Set Chart Label",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "$replace(msg.topic, /.*\\//, '')",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 380,
        "wires": [
            [
                "7c13cb7e1ff901d8"
            ]
        ]
    },
    {
        "id": "41ec52369d998246",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "name": "Tank Levels w/Trend v065",
        "info": "v065\n\n\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com",
        "x": 201.00000762939453,
        "y": 323.00000953674316,
        "wires": []
    },
    {
        "id": "4d4b29378aa5c467",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Move",
        "rules": [
            {
                "t": "move",
                "p": "payload.level",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 420,
        "wires": [
            [
                "7c8302be3b9f4e06"
            ]
        ]
    },
    {
        "id": "ccfca70fabd3e5a8",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Move",
        "rules": [
            {
                "t": "move",
                "p": "payload.level",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 480,
        "wires": [
            [
                "26f8a3e310015d0a"
            ]
        ]
    },
    {
        "id": "40ebc6e007c0c91e",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Move",
        "rules": [
            {
                "t": "move",
                "p": "payload.level",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 540,
        "wires": [
            [
                "709e85d569a84597"
            ]
        ]
    },
    {
        "id": "5be0739df4c58ded",
        "type": "ui_text",
        "z": "a9a1344b8e184732",
        "group": "87ed7eaa.ab8fe",
        "order": 4,
        "width": "2",
        "height": "1",
        "name": "Fresh Trend",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 980,
        "y": 440,
        "wires": []
    },
    {
        "id": "2a9c5963845a7d68",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Move",
        "rules": [
            {
                "t": "change",
                "p": "payload.trend",
                "pt": "msg",
                "from": "filling",
                "fromt": "str",
                "to": "<font color = \"grey\" i class=\"fa fa-arrow-up fa-2x \"></i>",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.trend",
                "pt": "msg",
                "from": "draining",
                "fromt": "str",
                "to": "<font color = \"grey\" i class=\"fa fa-arrow-down fa-2x \"></i>",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload.trend",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 440,
        "wires": [
            [
                "b68824c43f921c6e"
            ]
        ]
    },
    {
        "id": "9dee0dcef3c9f1a4",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Move",
        "rules": [
            {
                "t": "change",
                "p": "payload.trend",
                "pt": "msg",
                "from": "filling",
                "fromt": "str",
                "to": "<font color = \"grey\" i class=\"fa fa-arrow-up fa-2x \"></i>",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.trend",
                "pt": "msg",
                "from": "draining",
                "fromt": "str",
                "to": "<font color = \"grey\" i class=\"fa fa-arrow-down fa-2x \"></i>",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload.trend",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 500,
        "wires": [
            [
                "2d9bfbfa4656331f"
            ]
        ]
    },
    {
        "id": "345efb293e643ce3",
        "type": "ui_text",
        "z": "a9a1344b8e184732",
        "group": "87ed7eaa.ab8fe",
        "order": 5,
        "width": "2",
        "height": "1",
        "name": "Grey Trend",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 980,
        "y": 500,
        "wires": []
    },
    {
        "id": "d4ec369c7b3957b0",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "Move",
        "rules": [
            {
                "t": "change",
                "p": "payload.trend",
                "pt": "msg",
                "from": "filling",
                "fromt": "str",
                "to": "<font color = \"grey\" i class=\"fa fa-arrow-up fa-2x \"></i>",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.trend",
                "pt": "msg",
                "from": "draining",
                "fromt": "str",
                "to": "<font color = \"grey\" i class=\"fa fa-arrow-down fa-2x \"></i>",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload.trend",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 560,
        "wires": [
            [
                "a9867adeac2eb0a1"
            ]
        ]
    },
    {
        "id": "d35bec7a7c014487",
        "type": "ui_text",
        "z": "a9a1344b8e184732",
        "group": "87ed7eaa.ab8fe",
        "order": 6,
        "width": "2",
        "height": "1",
        "name": "Black Trend",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 980,
        "y": 560,
        "wires": []
    },
    {
        "id": "b68824c43f921c6e",
        "type": "rbe",
        "z": "a9a1344b8e184732",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 560,
        "y": 440,
        "wires": [
            [
                "5be0739df4c58ded"
            ]
        ]
    },
    {
        "id": "2d9bfbfa4656331f",
        "type": "rbe",
        "z": "a9a1344b8e184732",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 560,
        "y": 500,
        "wires": [
            [
                "345efb293e643ce3"
            ]
        ]
    },
    {
        "id": "a9867adeac2eb0a1",
        "type": "rbe",
        "z": "a9a1344b8e184732",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 560,
        "y": 560,
        "wires": [
            [
                "d35bec7a7c014487"
            ]
        ]
    },
    {
        "id": "7cba22d907e60bb7",
        "type": "link out",
        "z": "a9a1344b8e184732",
        "name": "Fresh Tank Level",
        "mode": "link",
        "links": [
            "e872c350c06db651"
        ],
        "x": 695,
        "y": 460,
        "wires": []
    },
    {
        "id": "849c195dbd16a837",
        "type": "link out",
        "z": "a9a1344b8e184732",
        "name": "Grey Tank Level",
        "mode": "link",
        "links": [
            "2c7e37676d8b2f1c"
        ],
        "x": 695,
        "y": 520,
        "wires": []
    },
    {
        "id": "82e0626321b5bef1",
        "type": "link out",
        "z": "a9a1344b8e184732",
        "name": "Black Tank Level",
        "mode": "link",
        "links": [
            "44c53a8293b965fd"
        ],
        "x": 695,
        "y": 580,
        "wires": []
    },
    {
        "id": "cbe4b34d2fd32409",
        "type": "mqtt in",
        "z": "a9a1344b8e184732",
        "name": "",
        "topic": "RVC/TANK_STATUS/#",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 210,
        "y": 1280,
        "wires": [
            [
                "a6bf6e272316fd22"
            ]
        ]
    },
    {
        "id": "5f8134b475ea1a4d",
        "type": "mqtt out",
        "z": "a9a1344b8e184732",
        "name": "CP/TANK_STATUS/TankName",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 1120,
        "y": 1280,
        "wires": []
    },
    {
        "id": "ba8833ff0234e2bd",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "name": "Calculate holding tank percent full and republish it",
        "info": "v064\n\n\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\nSwitch Node only accepts tanklevel data from a device with a source address of 48 (hex).\nThat would be from a standard RV-C device like the Garnet SeeLevel.\nThis prevents active, but invalid, tank level data (such as from a programmed, \nbut unused, Firefly RSI module) from squashing the SeeLevel data.\n\nNote: requires modified rvc2mqtt.pl that passes the source address to MQTT\n\nThe second output in the switch node, addresses installations where\nrvc2mqtt.pl has NOT been updated and the payload.src_addr value does not exist.",
        "x": 270,
        "y": 1240,
        "wires": []
    },
    {
        "id": "bca7627baab0543a",
        "type": "function",
        "z": "a9a1344b8e184732",
        "name": "decode_tanks_ eRVin v064",
        "func": "//\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n// Adds support for tank trend (filling or draining)\n// See white Comment node for details about source address filtering.\n//\n// Copyright (C) 2019 Wandertech LLC\n// \n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Calculate the tank percent full and republish it to the \"CP/\" topic.\n//\nvar newmsg = {}; //not needed?\nmsg.topic = null; // Required to block pass-through topic\n\nvar level = Math.round(msg.payload['relative level'] / msg.payload.resolution * 100);\n\nconst labels = ['Fresh', 'Black', 'Grey', 'LPG'];\n\nvar tankname = labels[msg.payload.instance];\nvar tankinst = msg.payload.instance;\nvar topic = 'CP/TANK_STATUS/' + tankname;\nvar previous = global.get('tanklevels[' + tankinst + '].level');\n\n\n// Write tank levels and tankname to global context. Tank instance: 0=Fresh, 1=Black, 2=Grey\nglobal.set('tanklevels[' + tankinst + '].level', level);\nglobal.set('tanklevels[' + tankinst + '].tankname', tankname);\n//global.set('tanklevels')[tankinst].level, level;\n//global.set('tanklevels')[tankinst].tankname, tankname;\n\n// Is tank filling or draining? Write the trend to global context.\nif (previous > level) {\n    global.set('tanklevels[' + tankinst + '].trend', 'draining');\n} else if (previous < level) {\n    global.set('tanklevels[' + tankinst + '].trend', 'filling');\n}\n// get the trend value and send it out with the msg.\nvar trend = global.get('tanklevels')[tankinst].trend;\n\nreturn {\n    topic,\n    payload: {\n        level: level,\n        tankname: tankname,\n        tankinst: tankinst,\n        previous: previous,\n        trend: trend\n    }\n};\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1280,
        "wires": [
            [
                "5f8134b475ea1a4d"
            ]
        ]
    },
    {
        "id": "4ddd1882b95d3949",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "valid src addr field",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"absolute level\":65535,\"data\":\"000E20FFFFFFFFFF\",\"dgn\":\"1FFB7\",\"instance\":0,\"instance definition\":\"fresh water\",\"name\":\"TANK_STATUS\",\"relative level\":14,\"resolution\":32,\"src_addr\":\"48\",\"tank size\":65535,\"timestamp\":\"1733526683.226426\"}",
        "payloadType": "json",
        "x": 220,
        "y": 1340,
        "wires": [
            [
                "a6bf6e272316fd22"
            ]
        ]
    },
    {
        "id": "a6bf6e272316fd22",
        "type": "switch",
        "z": "a9a1344b8e184732",
        "name": "Filter by tank sensor src addr",
        "property": "payload.src_addr",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "settings.tanksense.srcaddr",
                "vt": "global"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 530,
        "y": 1280,
        "wires": [
            [
                "bca7627baab0543a"
            ],
            [
                "bca7627baab0543a"
            ]
        ]
    },
    {
        "id": "f1b70d4ed71a820f",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "no src addr field",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"absolute level\":65535,\"data\":\"002020FFFFFFFFFF\",\"dgn\":\"1FFB7\",\"instance\":1,\"instance definition\":\"black water\",\"name\":\"TANK_STATUS\",\"relative level\":32,\"resolution\":32,\"tank size\":65535,\"timestamp\":\"1673249877.888019\"}",
        "payloadType": "json",
        "x": 210,
        "y": 1380,
        "wires": [
            [
                "a6bf6e272316fd22"
            ]
        ]
    },
    {
        "id": "c42360de5fb93d63",
        "type": "vsh-virtual-device",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "Fresh Tank",
        "topic": "fresh",
        "connection": "",
        "template": "TEMPERATURE_SENSOR",
        "retrievable": true,
        "passthrough": true,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1560,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "7940b16b58bd3811",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload.temperature",
                "v": "212",
                "vt": "str"
            },
            {
                "p": "payload.scale",
                "v": "FAHRENHEIT",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1320,
        "y": 420,
        "wires": [
            [
                "c42360de5fb93d63"
            ]
        ]
    },
    {
        "id": "d07f5c2d6b573dd6",
        "type": "debug",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "debug 10",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1550,
        "y": 420,
        "wires": []
    },
    {
        "id": "e872c350c06db651",
        "type": "link in",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "Alexa Fresh Tank",
        "links": [
            "7cba22d907e60bb7",
            "0475087c216029c7"
        ],
        "x": 1145,
        "y": 460,
        "wires": [
            [
                "9358099c1609a289"
            ]
        ]
    },
    {
        "id": "9358099c1609a289",
        "type": "change",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.temperature",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.scale",
                "pt": "msg",
                "to": "FAHRENHEIT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 460,
        "wires": [
            [
                "d07f5c2d6b573dd6",
                "c42360de5fb93d63"
            ]
        ]
    },
    {
        "id": "5f919e5b24110049",
        "type": "vsh-virtual-device",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "Grey Tank",
        "topic": "fresh",
        "connection": "",
        "template": "TEMPERATURE_SENSOR",
        "retrievable": true,
        "passthrough": true,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1560,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "0d782fbc4948e758",
        "type": "vsh-virtual-device",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "Black Tank",
        "topic": "fresh",
        "connection": "",
        "template": "TEMPERATURE_SENSOR",
        "retrievable": true,
        "passthrough": true,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1560,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "47ede5aa29a08acc",
        "type": "change",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.temperature",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.scale",
                "pt": "msg",
                "to": "FAHRENHEIT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 520,
        "wires": [
            [
                "5f919e5b24110049",
                "d07f5c2d6b573dd6"
            ]
        ]
    },
    {
        "id": "aae240b8ef8d2d5e",
        "type": "change",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.temperature",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.scale",
                "pt": "msg",
                "to": "FAHRENHEIT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 580,
        "wires": [
            [
                "0d782fbc4948e758",
                "d07f5c2d6b573dd6"
            ]
        ]
    },
    {
        "id": "2c7e37676d8b2f1c",
        "type": "link in",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "Alexa Grey Tank",
        "links": [
            "849c195dbd16a837",
            "b77f2801d24ef63b"
        ],
        "x": 1145,
        "y": 520,
        "wires": [
            [
                "47ede5aa29a08acc"
            ]
        ]
    },
    {
        "id": "44c53a8293b965fd",
        "type": "link in",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "Alexa Black Tank",
        "links": [
            "82e0626321b5bef1",
            "cf625d045b063f0b"
        ],
        "x": 1145,
        "y": 580,
        "wires": [
            [
                "aae240b8ef8d2d5e"
            ]
        ]
    },
    {
        "id": "71c8f83080687b37",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "d": true,
        "name": "Alexa Virtual Smart Home Support",
        "info": "v064\n\n\u00c2\u00a9 2023 Rob Picchione myervin.com - eRVin add-ons & modifications http://myervin.com\n\nAdds the capability to ask Alexa for the tank level of each tank.\nHowever, there is no \"level\" feature in VSH/Alexa so I used \"temperature\" instead.\n\nAsk \"Alexa, what is the temperature of the black tank?\" and she will respond with a value\nthat actually represents the level in percent.",
        "x": 1270,
        "y": 340,
        "wires": []
    },
    {
        "id": "be62338aa61c9031",
        "type": "inject",
        "z": "a9a1344b8e184732",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Water_Tanks",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 210,
        "y": 160,
        "wires": [
            [
                "10f3e29be302adea"
            ]
        ]
    },
    {
        "id": "f8e3669bff813def",
        "type": "comment",
        "z": "a9a1344b8e184732",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 170,
        "y": 120,
        "wires": []
    },
    {
        "id": "10f3e29be302adea",
        "type": "change",
        "z": "a9a1344b8e184732",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "03b56bbae8fe0ee5",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "shellyplusuni-0_lock_all-1_unlock_entry/command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "4",
        "topic": "shellyplusuni-0_lock_all-1_unlock_entry/command",
        "payload": "status_update",
        "payloadType": "str",
        "x": 330,
        "y": 1600,
        "wires": [
            [
                "4d0cafd6557bfd48",
                "3b012af0762222b4"
            ]
        ]
    },
    {
        "id": "4d0cafd6557bfd48",
        "type": "mqtt out",
        "z": "88d7f3330d1f4af5",
        "name": "shelly plus entry locks",
        "topic": "",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "c1170463.5c7f8",
        "x": 760,
        "y": 1620,
        "wires": [],
        "info": "shellies/shellyrgbw2-E868E7F2DB5C/color/0/command"
    },
    {
        "id": "c90c132c19bd51b3",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Shelly Uni Plus Get Status from Voltmeter for Chassis Battery and Ignition v065",
        "info": "\u00c2\u00a92024 Rob Picchione myervin.com\n\nThe Shelly Uni Plus does not automatically report the voltmeter value. It will\ngenerate some info for an event change, such as the locks being locked or unlocked. \n\nFor reliable current status the voltmeter and other info needs to be requested\nby a status_update using the below topic and payload\n\nThe inject nodes below request a \"status\"update\" every x second.\nOne for each Shelly Uni Plus\n\nThe topic format is \"shellyplusuni-0_lock_all-1_unlock_entry/command\"\nWith a payload of \"status_update\"\n\nThis will return a number of payloads with complete status details.",
        "x": 400,
        "y": 1540,
        "wires": []
    },
    {
        "id": "caf74d36e719e121",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "shellyplusuni-1_unlock_cargo/command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "4",
        "topic": "shellyplusuni-1_unlock_cargo/command",
        "payload": "status_update",
        "payloadType": "str",
        "x": 300,
        "y": 1640,
        "wires": [
            [
                "4d0cafd6557bfd48",
                "886ad0f57c4da625"
            ]
        ]
    },
    {
        "id": "c727bd12bc7d0f45",
        "type": "ui_button",
        "z": "88d7f3330d1f4af5",
        "name": "/entry-unlock/",
        "group": "f6ae28b7.041968",
        "order": 11,
        "width": "2",
        "height": "2",
        "passthru": true,
        "label": "Unlock",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "on,0.6",
        "payloadType": "str",
        "topic": "shellyplusuni-0_lock_all-1_unlock_entry/command/switch:1",
        "topicType": "str",
        "x": 1000,
        "y": 620,
        "wires": [
            [
                "0284ec8ae4415187"
            ]
        ]
    },
    {
        "id": "86e0ab3844a9c64a",
        "type": "ui_button",
        "z": "88d7f3330d1f4af5",
        "name": "/entry-lock/",
        "group": "f6ae28b7.041968",
        "order": 5,
        "width": "2",
        "height": "2",
        "passthru": true,
        "label": "Lock",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "entry_lock",
        "payloadType": "str",
        "topic": "entry_lock",
        "topicType": "str",
        "x": 270,
        "y": 440,
        "wires": [
            [
                "c483c194722d08e0"
            ]
        ]
    },
    {
        "id": "14f0a3603f850f74",
        "type": "ui_button",
        "z": "88d7f3330d1f4af5",
        "name": "/cargo-unlock/",
        "group": "f6ae28b7.041968",
        "order": 17,
        "width": "2",
        "height": "2",
        "passthru": true,
        "label": "Unlock",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "on,0.6",
        "payloadType": "str",
        "topic": "shellyplusuni-1_unlock_cargo/command/switch:1",
        "topicType": "str",
        "x": 1000,
        "y": 440,
        "wires": [
            [
                "274eac0dcdacbfc4"
            ]
        ]
    },
    {
        "id": "6675427880436fd8",
        "type": "ui_button",
        "z": "88d7f3330d1f4af5",
        "name": "/cargo-lock/",
        "group": "f6ae28b7.041968",
        "order": 13,
        "width": "2",
        "height": "2",
        "passthru": true,
        "label": "Lock",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "cargo_lock",
        "payloadType": "str",
        "topic": "cargo_lock",
        "topicType": "str",
        "x": 270,
        "y": 620,
        "wires": [
            [
                "116e6d1fe682b786"
            ]
        ]
    },
    {
        "id": "feb1dd47388587ce",
        "type": "ui_button",
        "z": "88d7f3330d1f4af5",
        "name": "/all-unlock/",
        "group": "f6ae28b7.041968",
        "order": 3,
        "width": "3",
        "height": "2",
        "passthru": true,
        "label": "All-Unlock",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-unlock",
        "payload": "all_unlock",
        "payloadType": "str",
        "topic": "all_unlock",
        "topicType": "str",
        "x": 270,
        "y": 500,
        "wires": [
            [
                "c727bd12bc7d0f45",
                "264274238880636a"
            ]
        ]
    },
    {
        "id": "b4203eb99dc1e078",
        "type": "ui_button",
        "z": "88d7f3330d1f4af5",
        "name": "/all-lock/",
        "group": "f6ae28b7.041968",
        "order": 1,
        "width": "3",
        "height": "2",
        "passthru": true,
        "label": "All-Lock",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-lock",
        "payload": "on,0.6",
        "payloadType": "str",
        "topic": "shellyplusuni-0_lock_all-1_unlock_entry/command/switch:0",
        "topicType": "str",
        "x": 980,
        "y": 540,
        "wires": [
            [
                "0284ec8ae4415187"
            ]
        ]
    },
    {
        "id": "76363df4fc3cc823",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Locks Shelly Plus Uni w/discrete unlock v065",
        "info": "\u00c2\u00a92024 Rob Picchione myervin.com\n\nThe Trimark controller has separate unlock inputs for\ncargo and entry, however for locking, there is only a Lock All\ninput. These inputs are pulled to ground to activate and suitable for the\nShelly Plus Uni Solid State relays.\n\nThis flow provides the input buttons to the dashboard:\nAll Lock   - triggers native Trimark \"All Lock\" input\nAll Unlock - triggers native Trimark \"Entry Unlock\" input, adds 1s delay then triggers native Trimark \"Cargo Unlock\"\nEntry Lock - see below\nCargo Lock - see below\n\nThis flow also adds logic to create a simulated discrete lock function for cargo and entry:\n- If both the cargo and entry are unlocked, and the\n  entry lock button is pressed, the lock all trigger is activated,\n  and 4s later the cargo is unlocked to restore its state.\n- If both the cargo and entry are unlocked, and the\n  cargo lock button is pressed, the lock all trigger is activated\n  and 4s later the entry is unlocked.\n\n  Unfortunately, due to inherent delays in the Trimark device, the flow does not\n  work without the 4 second delay for the entry and cargo discreet lock buttons.\n  3 seconds may work, but any less and the lock and unlock commands will\n  collide.\n\n",
        "x": 290,
        "y": 380,
        "wires": []
    },
    {
        "id": "0284ec8ae4415187",
        "type": "mqtt out",
        "z": "88d7f3330d1f4af5",
        "name": "shelly plus uni all_lock/entry_unlock",
        "topic": "",
        "qos": "0",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "c1170463.5c7f8",
        "x": 1280,
        "y": 560,
        "wires": [],
        "info": "shellies/shellyrgbw2-E868E7F2DB5C/color/0/command"
    },
    {
        "id": "274eac0dcdacbfc4",
        "type": "mqtt out",
        "z": "88d7f3330d1f4af5",
        "name": "shelly plus uni cargo unlock",
        "topic": "",
        "qos": "0",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "c1170463.5c7f8",
        "x": 1260,
        "y": 440,
        "wires": [],
        "info": "shellies/shellyrgbw2-E868E7F2DB5C/color/0/command"
    },
    {
        "id": "5116ab5889955f94",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "entry lock status",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "shelly.status.locks.entry",
                "tot": "global"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "unlocked",
                "fromt": "str",
                "to": "<i class=\"fa fa-unlock fa-2x\"></i>",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "locked",
                "fromt": "str",
                "to": "<i class=\"fa fa-lock fa-2x\"></i>",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 860,
        "wires": [
            [
                "e825e5e4050b5514"
            ]
        ]
    },
    {
        "id": "ae3607fd2e06e107",
        "type": "mqtt in",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "topic": "shellyplusuni-0_lock_all-1_unlock_entry/events/rpc",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 330,
        "y": 860,
        "wires": [
            [
                "ad07839f7e82a551",
                "ec6968dee2987351",
                "a2bdd48418cba421"
            ]
        ]
    },
    {
        "id": "ec6968dee2987351",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "payload.params[\"input:1\"].state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 900,
        "wires": [
            [
                "37abb7d00c9e1b6f"
            ]
        ]
    },
    {
        "id": "ad07839f7e82a551",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "payload.params[\"input:0\"].state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 860,
        "wires": [
            [
                "2929c2f94cd8e8b4"
            ]
        ]
    },
    {
        "id": "2929c2f94cd8e8b4",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save status entry locked",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.locks.entry",
                "pt": "global",
                "to": "locked",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "color",
                "pt": "msg",
                "to": "green",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.lockState",
                "pt": "msg",
                "to": "LOCKED",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 860,
        "wires": [
            [
                "5116ab5889955f94",
                "118b30c73f244ba4",
                "d8795228a864bc03"
            ]
        ],
        "info": "First two rules are for eRVin dashboard\r\nThird rule is for Alexa integration"
    },
    {
        "id": "37abb7d00c9e1b6f",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save status entry unlocked",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.locks.entry",
                "pt": "global",
                "to": "unlocked",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "color",
                "pt": "msg",
                "to": "rgb(192, 0, 0)",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.lockState",
                "pt": "msg",
                "to": "UNLOCKED",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 900,
        "wires": [
            [
                "5116ab5889955f94",
                "118b30c73f244ba4",
                "d8795228a864bc03"
            ]
        ],
        "info": "First two rules are for eRVin dashboard\r\nThird rule is for Alexa integration"
    },
    {
        "id": "87fccb13f1985669",
        "type": "mqtt in",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "topic": "shellyplusuni-1_unlock_cargo/events/rpc",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 300,
        "y": 1080,
        "wires": [
            [
                "6596ea618ff2dd9c"
            ]
        ]
    },
    {
        "id": "6596ea618ff2dd9c",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "payload.params[\"input:1\"].state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 1100,
        "wires": [
            [
                "7c9cb544f4a8435b"
            ]
        ]
    },
    {
        "id": "a2bdd48418cba421",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "payload.params[\"input:0\"].state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 1060,
        "wires": [
            [
                "bc17beba6cc88bee"
            ]
        ]
    },
    {
        "id": "bc17beba6cc88bee",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save status cargo locked",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.locks.cargo",
                "pt": "global",
                "to": "locked",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "color",
                "pt": "msg",
                "to": "green",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.lockState",
                "pt": "msg",
                "to": "LOCKED",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1060,
        "wires": [
            [
                "f3624d6826ee57bb",
                "c7187af4b751a192"
            ]
        ],
        "info": "First two rules are for eRVin dashboard\r\nThird rule is for Alexa integration"
    },
    {
        "id": "7c9cb544f4a8435b",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save status cargo unlocked",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.locks.cargo",
                "pt": "global",
                "to": "unlocked",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "color",
                "pt": "msg",
                "to": "rgb(192, 0, 0)",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.lockState",
                "pt": "msg",
                "to": "UNLOCKED",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 1100,
        "wires": [
            [
                "f3624d6826ee57bb",
                "c7187af4b751a192"
            ]
        ],
        "info": "First two rules are for eRVin dashboard\r\nThird rule is for Alexa integration"
    },
    {
        "id": "14c04b1d0d535236",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Locks Shelly Plus Uni Switch Event State Change v065",
        "info": "\u00c2\u00a92024 Rob Picchione myervin.com\n\nState change occurs when the locks state changes from locked to unlocked or\nunlocked to locked as follows:\n\nShelly Plus Uni has two relay outputs 0,1) and two \"digital\" inputs (0,1). The outputs \n(limited to 300mA) in this application pull to ground to trigger the Trimark lock functions. \nThe inputs when pulled to ground will change state. If the inputs are wired to the outputs, this\nwill trigger a state change and generate the following topic/payload:\n{\n\t\"topic\": \"shellyplusuni-0_lock_all-1_unlock_entry/events/rpc\",\n\t\"payload\": {\n\t\t\"src\": \"shellyplusuni-e465b847cf48\",\n\t\t\"dst\": \"shellyplusuni-0_lock_all-1_unlock_entry/events\",\n\t\t\"method\": \"NotifyStatus\",\n\t\t\"params\": {\n\t\t\t\"ts\": 1710012450.12,\n\t\t\t\"input:1\": {\n\t\t\t\t\"id\": 1,\n\t\t\t\t\"state\": true\n\t\t\t}\n\t\t}\n\t},\n\t\"qos\": 1,\n\t\"retain\": false,\n\t\"_topic\": \"shellyplusuni-0_lock_all-1_unlock_entry/events/rpc\",\n\t\"_msgid\": \"46398132245524ef\"\n}\n\nUse this path in a flow to detect the state change:\n \tpayload.params[\"input:1\"].state\n- the state will be true if it changed\n- input:0 is IN1 and input:1 is IN2\n\nAn additional benefit is if the door handle keypad is used, it will ALSO\ntrigger a state change. This way the lock status should always stay in sync\nexcept in the case where the lock status is physically changed with a key or\nthe inside lock lever.\n\nWhenever a lock state change event occurs, the status is written to global context.\nImmediately after the state change, the global context value is written to the dashboard.\nHowever, the TriMark has built in delays and the actual lock status is delayed by up to \na few seconds.\n\nwhen status is written to the dashboard, the following icons are sent for lock and unlock:\ncargo: <i class=\"fa fa-unlock fa-2x\"></i>\nentry: <i class=\"fa fa-unlock fa-2x\"></i>\n\nThe template nodes contain example html for controlling text or icon colors.\nsend a msg.color from the previous nodes to set the color.\nmsg.payload from the previous nodes contains the text or icon to be displayed.",
        "x": 320,
        "y": 800,
        "wires": []
    },
    {
        "id": "43ed7e8ea378a845",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "payload[\"input:0\"].state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 1440,
        "wires": [
            [
                "10bd19ca29934714"
            ],
            [
                "f4501f280118be75"
            ]
        ]
    },
    {
        "id": "10bd19ca29934714",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save status entry door closed",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.doors.entry",
                "pt": "global",
                "to": "Closed",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "color",
                "pt": "msg",
                "to": "green",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "shelly.status.doors.entry",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 1440,
        "wires": [
            [
                "81e880660a6e4cb1"
            ]
        ]
    },
    {
        "id": "f4501f280118be75",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save status entry door open",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.doors.entry",
                "pt": "global",
                "to": "Open",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "color",
                "pt": "msg",
                "to": "rgb(192, 0, 0)",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "shelly.status.doors.entry",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 1480,
        "wires": [
            [
                "81e880660a6e4cb1"
            ]
        ]
    },
    {
        "id": "1defb9131c197ac9",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "unlock",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "<i class=\"fa fa-unlock fa-2x\" style=\"color: red;\"></i>",
        "payloadType": "str",
        "x": 1230,
        "y": 1140,
        "wires": [
            [
                "02d65c18e23cc9b1"
            ]
        ]
    },
    {
        "id": "5b86bd2d149bfdc7",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "lock",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "<i class=\"fa fa-lock fa-2x\"></i>",
        "payloadType": "str",
        "x": 1230,
        "y": 1180,
        "wires": [
            [
                "02d65c18e23cc9b1"
            ]
        ]
    },
    {
        "id": "f3624d6826ee57bb",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "cargo lock status",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "shelly.status.locks.cargo",
                "tot": "global"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "unlocked",
                "fromt": "str",
                "to": "<i class=\"fa fa-unlock fa-2x\"></i>",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "locked",
                "fromt": "str",
                "to": "<i class=\"fa fa-lock fa-2x\"></i>",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 1060,
        "wires": [
            [
                "02d65c18e23cc9b1"
            ]
        ]
    },
    {
        "id": "33e7c2268adcbaac",
        "type": "delay",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 720,
        "y": 520,
        "wires": [
            [
                "14f0a3603f850f74"
            ]
        ]
    },
    {
        "id": "7d108d28587333d7",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save chassis battery voltage",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.chassis_battery_volts",
                "pt": "global",
                "to": "payload[\"voltmeter:100\"].voltage",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "326c5eb716291b53",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save ignition status on",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.ignition",
                "pt": "global",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "75d408d5444c08f2",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "payload[\"voltmeter:100\"].voltage",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "5",
                "vt": "num"
            },
            {
                "t": "gt",
                "v": "5",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 1380,
        "wires": [
            [
                "5b563816df4b73a8"
            ],
            [
                "326c5eb716291b53"
            ]
        ]
    },
    {
        "id": "5b563816df4b73a8",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "save ignition status off",
        "rules": [
            {
                "t": "set",
                "p": "shelly.status.ignition",
                "pt": "global",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "096f32bcdc5eaf33",
        "type": "mqtt in",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "topic": "shellyplusuni-0_lock_all-1_unlock_entry/status",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 310,
        "y": 1320,
        "wires": [
            [
                "c614bcbbeeeb3761"
            ]
        ]
    },
    {
        "id": "575416edb0edd0ed",
        "type": "mqtt in",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "topic": "shellyplusuni-1_unlock_cargo/status",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 280,
        "y": 1380,
        "wires": [
            [
                "564a495197df7d78",
                "c6ec5b67bcdf8362"
            ]
        ]
    },
    {
        "id": "564a495197df7d78",
        "type": "rbe",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "func": "rbe",
        "gap": "1%",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload[\"input:0\"].state",
        "topi": "topic",
        "x": 650,
        "y": 1440,
        "wires": [
            [
                "43ed7e8ea378a845"
            ]
        ]
    },
    {
        "id": "c6ec5b67bcdf8362",
        "type": "rbe",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "func": "deadbandEq",
        "gap": "1",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload[\"voltmeter:100\"].voltage",
        "topi": "topic",
        "x": 660,
        "y": 1380,
        "wires": [
            [
                "75d408d5444c08f2"
            ]
        ]
    },
    {
        "id": "c614bcbbeeeb3761",
        "type": "rbe",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "func": "deadbandEq",
        "gap": "1%",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload[\"voltmeter:100\"].voltage",
        "topi": "topic",
        "x": 660,
        "y": 1320,
        "wires": [
            [
                "7d108d28587333d7"
            ]
        ]
    },
    {
        "id": "3c74ca0d297be3bc",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Locks Shelly Plus Uni Switch Event Status v065",
        "info": "\u00c2\u00a92024 Rob Picchione myervin.com\n\nThis flow depends on the \"Get Status for Voltmeter\" flow below, which at a specified \ntime interval (currently 2 seconds), requests a status update from the Shelly Uni Plus.\n\nIt takes info from the two Shelly Plus Uni units as wired per https:myervin.com and\nwrites them to global context for use byother flows:\n- Chassis battery voltage provided by Uni #1 voltmeter input (actual voltage)\n- Ignition status provided by Uni #2 Voltmeter input (on or off)\n- Entry door open/closed status is provided by Uni#2 IN1 input:0 (open or closed) \n\nBecause the voltmeter, state of the inputs, and possibly some other status info, is only sent during \nan \"event\" trigger, such as in the above flow when the doors are either locked or unlocked, the\n\"Get Status...\" flow below is required for this flow to work.\n\nBy requesting the status in a regular fashion like this, the chassis battery voltage,\nignition state, and entry door open/closed state are kept constantly updated.\n\nNote: the above is only relevant to the eRVin locks wiring using two Shelly Plus Uni modules.\nsee http://myerin.com for details\n\nThe RBE and deadband nodes eliminate constant rewrites if the data has not changed significantly.\n\n",
        "x": 300,
        "y": 1260,
        "wires": []
    },
    {
        "id": "c483c194722d08e0",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "shelly.status.locks.cargo",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "unlocked",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "locked",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 440,
        "wires": [
            [
                "b4203eb99dc1e078",
                "33e7c2268adcbaac"
            ],
            [
                "b4203eb99dc1e078"
            ]
        ]
    },
    {
        "id": "116e6d1fe682b786",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "property": "shelly.status.locks.entry",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "unlocked",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "locked",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 620,
        "wires": [
            [
                "b4203eb99dc1e078",
                "2bf4c3d4b8dda272"
            ],
            [
                "b4203eb99dc1e078"
            ]
        ]
    },
    {
        "id": "2bf4c3d4b8dda272",
        "type": "delay",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 720,
        "y": 560,
        "wires": [
            [
                "c727bd12bc7d0f45"
            ]
        ]
    },
    {
        "id": "264274238880636a",
        "type": "delay",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 520,
        "y": 500,
        "wires": [
            [
                "14f0a3603f850f74"
            ]
        ]
    },
    {
        "id": "8b95090163b7701d",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Republish Shelly voltmeter chassis battery to RV-C DGN 1FFFD",
        "info": "\u00c2\u00a92024 Rob Picchione myervin.com\n\nOne way to report the chassis battery voltage as read by the Shelly Plus Uni\nis simply to read it out of global context and display it on the dashboard.\nHowever, this would entail changes to the existing flows and create incompatibilities\nwith coaches that already have the chassis battery voltage reported on the RV-C.\nTo avoid that and restrict all mods to the Locks flow, instead we will report\nthe voltage readings from the Shelly Plus Uni directly to the RV-C so they can\nbe read by the original flows with no issues or additional modifications. \nThis small flow does exactly that:\n\nThe Shelly Plus Uni reports the chassis battery voltage, nd other parts\nof this Locks flow save that value in global context at status.power.chassis_battery_volts.\n\nThe function node takes that voltage value from global context and publishes it\ndirectly to the RV-C CAN as shown below. Note the canid is in decimal but could\nalso be expressed in hex by preceeding the value with 0x, such as 0x19FFFD.\n\nAs per the RV-C spec, bytes 2 and 3 contain the voltage value that must be converted into \ntwo bytes. See this Chatgpt discussion for full details:\nhttps://chatgpt.com/share/6766ff5d-a058-800b-a34d-017280cb8775\n\nOnce the voltage values are calculated, the complet CAN frame is constructed into msg.payload\nthen sent along to the SocketCan In node which will broadcast it on the RV-C.\nNote in the data array (see RV-C spec for full details):\n - bytes 2 and 3 are the 2 byte representation of the voltage\n - byte 0 is set to 2 which represent the chassis battery instance\n - byte 1 is set to 20 which represents a source of \"voltmeter\n\nJavascript:\nvar voltage = global.get('status.power.chassis_battery_volts');  // Get the voltage from global context\n\n// Step 1: Calculate the raw value\nvar rawValue = voltage / 0.05;\n\n// Step 2: Extract Byte 3 and Byte 2\nvar byte3 = Math.floor(rawValue / 256);  // Most significant byte\nvar byte2 = rawValue % 256;             // Least significant byte\n\n// Prepare the CAN frame data\nmsg.payload = {  \n    \"ext\": true,\n    \"canid\": 436206914, // RV-C canID for 1FFFD\n    \"dlc\": 8,\n    \"data\": [\n        2,   // chassis battery voltage\n        20,  // specifies RV-C \"voltmeter\" device\n        byte2,   // Byte 2 (least significant byte)\n        byte3,  // Byte 3 (most significant byte)\n        0,\n        0,\n        0,\n        0,\n    ]\n};\n\nreturn msg;\n\nLink to chatgpt discussing voltmeter calculations and flows:\nhttps://chatgpt.com/share/6766ff5d-a058-800b-a34d-017280cb8775\n\nAs a side note, when reading the RV-C 1FFFD frame such as with a SocketCan out node,\nthe data array will for example, look like this:\n0: 2   //\"chassis battery\" as per RV-C spec, 1 = \"house battery\"\n1: 20  //\"voltmeter\" as per RV-C spec, 120 = \"SOC device\", etc.\n2: 2   //most significant byte of battery voltage\n3: 1   //least significant byte of battery voltage\n4: 255   //amps, not present in this example\n5: 255   //amps, not present in this example\n6: 255   //amps, not present in this example\n7: 255   //amps, not present in this example\n\nTo calculate the voltage multiply byte3 by 256, add byte2 to the result\nthen multiply that result by .05\nso 1*256 = 256, 256+2 = 258, 258*.05 = 12.9 volts\n",
        "x": 350,
        "y": 1720,
        "wires": []
    },
    {
        "id": "3e93c9141bf45256",
        "type": "socketcan-in",
        "z": "88d7f3330d1f4af5",
        "name": "socketcan-in",
        "config": "0d9f75586354dfd5",
        "x": 670,
        "y": 1820,
        "wires": []
    },
    {
        "id": "c7187af4b751a192",
        "type": "vsh-virtual-device",
        "z": "88d7f3330d1f4af5",
        "name": "Cargo Doors",
        "topic": "lock/cargo",
        "connection": "",
        "template": "LOCK",
        "retrievable": true,
        "passthrough": true,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1130,
        "y": 1100,
        "wires": [
            [
                "8d2d19d16bccf395"
            ]
        ]
    },
    {
        "id": "8d2d19d16bccf395",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "Alexa Lock Cmd Splitter",
        "property": "payload.directive",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Unlock",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Lock",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 1100,
        "wires": [
            [
                "33252f50586957c9"
            ],
            [
                "02dadca0c909eff5"
            ]
        ]
    },
    {
        "id": "44e2ab9551949115",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "LOCKED",
        "props": [
            {
                "p": "payload.lockState",
                "v": "LOCKED",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 900,
        "y": 1180,
        "wires": [
            [
                "c7187af4b751a192"
            ]
        ]
    },
    {
        "id": "6e32c9d670e1e384",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "UNLOCKED",
        "props": [
            {
                "p": "payload.lockState",
                "v": "UNLOCKED",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 910,
        "y": 1140,
        "wires": [
            [
                "c7187af4b751a192"
            ]
        ]
    },
    {
        "id": "33252f50586957c9",
        "type": "link out",
        "z": "88d7f3330d1f4af5",
        "name": "Cargo Unlock",
        "mode": "link",
        "links": [
            "4b26e2d2fd6daae3"
        ],
        "x": 1615,
        "y": 1080,
        "wires": []
    },
    {
        "id": "4b26e2d2fd6daae3",
        "type": "link in",
        "z": "88d7f3330d1f4af5",
        "name": "Cargo Doors Alexa Unlock",
        "links": [
            "33252f50586957c9"
        ],
        "x": 855,
        "y": 420,
        "wires": [
            [
                "14f0a3603f850f74"
            ]
        ]
    },
    {
        "id": "02dadca0c909eff5",
        "type": "link out",
        "z": "88d7f3330d1f4af5",
        "name": "Cargo Lock",
        "mode": "link",
        "links": [
            "2ed3353daec50c1e"
        ],
        "x": 1615,
        "y": 1120,
        "wires": []
    },
    {
        "id": "2ed3353daec50c1e",
        "type": "link in",
        "z": "88d7f3330d1f4af5",
        "name": "Cargo Doors Alexa Lock",
        "links": [
            "02dadca0c909eff5"
        ],
        "x": 145,
        "y": 620,
        "wires": [
            [
                "6675427880436fd8"
            ]
        ]
    },
    {
        "id": "118b30c73f244ba4",
        "type": "vsh-virtual-device",
        "z": "88d7f3330d1f4af5",
        "name": "Entry Door",
        "topic": "lock/entry",
        "connection": "",
        "template": "LOCK",
        "retrievable": true,
        "passthrough": true,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1130,
        "y": 900,
        "wires": [
            [
                "9ee1abf9c8d515c9"
            ]
        ]
    },
    {
        "id": "9ee1abf9c8d515c9",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "Alexa Lock Cmd Splitter",
        "property": "payload.directive",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Unlock",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Lock",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 900,
        "wires": [
            [
                "bb1d9d97d9523207"
            ],
            [
                "57b22dedf3a94959"
            ]
        ]
    },
    {
        "id": "bb1d9d97d9523207",
        "type": "link out",
        "z": "88d7f3330d1f4af5",
        "name": "Entry Unlock",
        "mode": "link",
        "links": [
            "41852ec4a6ec5242"
        ],
        "x": 1615,
        "y": 860,
        "wires": []
    },
    {
        "id": "57b22dedf3a94959",
        "type": "link out",
        "z": "88d7f3330d1f4af5",
        "name": "Entry Lock",
        "mode": "link",
        "links": [
            "65dd88a274a3a952"
        ],
        "x": 1615,
        "y": 900,
        "wires": []
    },
    {
        "id": "41852ec4a6ec5242",
        "type": "link in",
        "z": "88d7f3330d1f4af5",
        "name": "Entry Door Alexa Unlock",
        "links": [
            "bb1d9d97d9523207"
        ],
        "x": 865,
        "y": 660,
        "wires": [
            [
                "c727bd12bc7d0f45"
            ]
        ]
    },
    {
        "id": "65dd88a274a3a952",
        "type": "link in",
        "z": "88d7f3330d1f4af5",
        "name": "Entry Door Alexa Lock",
        "links": [
            "57b22dedf3a94959"
        ],
        "x": 145,
        "y": 440,
        "wires": [
            [
                "86e0ab3844a9c64a"
            ]
        ]
    },
    {
        "id": "d8795228a864bc03",
        "type": "vsh-virtual-device",
        "z": "88d7f3330d1f4af5",
        "name": "All Doors",
        "topic": "lock/all",
        "connection": "",
        "template": "LOCK",
        "retrievable": true,
        "passthrough": true,
        "diff": false,
        "filter": false,
        "filterTopic": false,
        "x": 1120,
        "y": 960,
        "wires": [
            [
                "c5f3e5cf884ec6da"
            ]
        ]
    },
    {
        "id": "c5f3e5cf884ec6da",
        "type": "switch",
        "z": "88d7f3330d1f4af5",
        "name": "Alexa Lock Cmd Splitter",
        "property": "payload.directive",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Unlock",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Lock",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 960,
        "wires": [
            [
                "ac4f76358d806e24"
            ],
            [
                "d6fe2e96267a1c81"
            ]
        ]
    },
    {
        "id": "d6fe2e96267a1c81",
        "type": "link out",
        "z": "88d7f3330d1f4af5",
        "name": "All Lock",
        "mode": "link",
        "links": [
            "d10a53d8f1d5be55"
        ],
        "x": 1615,
        "y": 1020,
        "wires": []
    },
    {
        "id": "d10a53d8f1d5be55",
        "type": "link in",
        "z": "88d7f3330d1f4af5",
        "name": "All Doors Alexa Lock",
        "links": [
            "d6fe2e96267a1c81"
        ],
        "x": 885,
        "y": 540,
        "wires": [
            [
                "b4203eb99dc1e078"
            ]
        ]
    },
    {
        "id": "ac4f76358d806e24",
        "type": "link out",
        "z": "88d7f3330d1f4af5",
        "name": "All Unlock",
        "mode": "link",
        "links": [
            "e4000eb1f9cc397a"
        ],
        "x": 1615,
        "y": 940,
        "wires": []
    },
    {
        "id": "e4000eb1f9cc397a",
        "type": "link in",
        "z": "88d7f3330d1f4af5",
        "name": "All Doors Alexa Unlock",
        "links": [
            "ac4f76358d806e24"
        ],
        "x": 145,
        "y": 500,
        "wires": [
            [
                "feb1dd47388587ce"
            ]
        ]
    },
    {
        "id": "dea5ee1c7bdbfaad",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Read Me v065",
        "info": "\u00c2\u00a92024 Rob Picchione myervin.com\n\nDependencies\n  - Virtual Smart Home Contrib\n  - SocketCan Contrib\n  - eRVin v6.x image or newer\n\nSee the other white comment nodes for additional details\n\nThis group of flows is intended to be used with an OEM installed Trimark Lock controller with pull down inputs for:\n  - Unlock Entry\n  - Unlock Cargo\n  - Lock All\n\nControl is accomplished with a pair of Shelly Plus Uni'S wired as shown at https://myervin.com \n(if you cant find it email rob@myervin.com.)\n\nThis flow also supports Alexa via the Virtual Smarthome Contrib, so the ervin dashboard or Alexa can be used\ninterchangeably and status is reported back to each other.\n\nThe first flow, \"Locks Shelly Plus Uni w/discrete unlock\", creates the actual dashbaord buttons. It also simulates discrete \nEntry Lock and Cargo Lock by implementing the delays necessary to work around the Trimark limitations.\n\nThe second flow , \"Locks Shelly Plus Uni Event State Change\" gets event status changes from the Shelly via MQTT.\nNote these events are triggered when the Shelly switches change state and are found in payload.params[\"input:0\"].state\nThis is different than requesting a status update (more on this later.)\nThis flow writes the status to global context and reports it to the dashboard in the form of a lock or unlock icon.\nThis flow also integrates the Virtual Smart Home Alexa nodes and modifies status to support them.\nThis flow also checks for the 'shelly' path in global context and if not present creates it.\n\nThe third flow, \"Locks Shelly Plus Uni Switch Event Status\" is for the additional functions performed by the Shelly:\n  - Voltmeter for the chassis batteries\n  - Voltmeter to sense ignition on or off\n  - Digital input to sense if the entry door is open or closed\nThis info is requested via a status request to the Shelly which is done in the fourth flow.\nThis status info is returned and saved to global context by this flow.\nThe entry door open/closed status is additionally written to the dashboard display.\n\nThe Fourth flow, \"Shelly Uni Plus Get Status from Voltmeter for Chassis Battery and Ignition\" as mentioned above,\nsends a request every x seconds to get the currrent status report for the Voltmeters and Door open/closed input.\nIn addition it re-broadcasts the chassis battery voltage directly to the RV-C network, in a properly configured CANbus\nframe. This avoids making other modifications to the existing coachproxy and eRVin flows.\n\nNOTE: IF YOUR VEHICLE ALREADY HAS CHASSIS BATTERY BEING REPORTED VIA RV-C the function node \"Convert DC volts to RV-C CANid\"\nmust be disabled or deleted.\n\n",
        "x": 200,
        "y": 340,
        "wires": []
    },
    {
        "id": "b9edd9fc57303f18",
        "type": "function",
        "z": "88d7f3330d1f4af5",
        "name": "Init Entry",
        "func": "// Get the value of the global variable\nlet lockStatus = global.get('shelly.status.locks.entry');\n\n// Initialize the payload\nmsg.payload = { params: {} };\n\n// Check the lock status and set the corresponding output\nif (lockStatus === 'locked') {\n    msg.payload.params[\"input:0\"] = { state: true };\n} else if (lockStatus === 'unlocked') {\n    msg.payload.params[\"input:1\"] = { state: true };\n} else {\n    // Handle unexpected values, if necessary\n    msg.payload.error = \"Unknown lock status\";\n}\n\n// Return the message\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 960,
        "wires": [
            [
                "ad07839f7e82a551",
                "ec6968dee2987351"
            ]
        ]
    },
    {
        "id": "4fb504d5e87e83c5",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "Initilize lock status",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 980,
        "wires": [
            [
                "b9edd9fc57303f18",
                "a6e2b5233f9c6c54",
                "76d597d6b21da3d9"
            ]
        ]
    },
    {
        "id": "a6e2b5233f9c6c54",
        "type": "function",
        "z": "88d7f3330d1f4af5",
        "name": "Init Cargo",
        "func": "// Get the value of the global variable\nlet lockStatus = global.get('shelly.status.locks.cargo');\n\n// Initialize the payload\nmsg.payload = { params: {} };\n\n// Check the lock status and set the corresponding output\nif (lockStatus === 'locked') {\n    msg.payload.params[\"input:0\"] = { state: true };\n} else if (lockStatus === 'unlocked') {\n    msg.payload.params[\"input:1\"] = { state: true };\n} else {\n    // Handle unexpected values, if necessary\n    msg.payload.error = \"Unknown lock status\";\n}\n\n// Return the message\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 1000,
        "wires": [
            [
                "a2bdd48418cba421",
                "6596ea618ff2dd9c"
            ]
        ]
    },
    {
        "id": "eb08de7e94dcf6c0",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Alexa notes for Locks",
        "info": "Alexa will lock anything by default, however unlock requires\nthat explicit permissions be givin within the Alexa app.\n\nAfter registering the Lock nodes, go into the Alexa app for\neach of them and selct Settings (gear icon).\n\nThere are two switches to configure, both are off by default:\n  - Unlock with Alexa App: If you want to allow unlocking via the \n  Alexa app turn this on. Note it says Routines will still work\n  even if this is off.\n  - Unlock By Voice And Echo Hub: This allows you to tell alexa \n  to unlock the doors. The app will ask you to establish a four\n  digit voice code if you enable this mode.",
        "x": 1160,
        "y": 800,
        "wires": []
    },
    {
        "id": "76d597d6b21da3d9",
        "type": "function",
        "z": "88d7f3330d1f4af5",
        "name": "eRVin global.context init for Shelly",
        "func": "// \u00c2\u00a92024 Rob Picchione myervin.com\n//\n// Nested default values for global context initialization of 'shelly'\n// If the context paths do not exist create them,\n//if the context paths do exist and have values, leave them alone.\n//\nconst defaults = {\n    status: {\n        locks: {\n            entry: null,\n            cargo: null\n        },\n        doors: {\n            entry: null\n        },\n        ignition: null,\n        chassis_battery_volts: null\n    }\n};\n\n// Function to initialize nested properties\nfunction initializeNestedObject(target, defaults) {\n    Object.keys(defaults).forEach(key => {\n        if (typeof defaults[key] === 'object' && defaults[key] !== null) {\n            // If the property is an object, initialize recursively\n            target[key] = target[key] || {};\n            initializeNestedObject(target[key], defaults[key]);\n        } else {\n            // Otherwise, set the default value if undefined\n            if (target[key] === undefined) {\n                target[key] = defaults[key];\n            }\n        }\n    });\n}\n\n// Retrieve the existing 'shelly' object or initialize it\nconst shelly = global.get('shelly') || {};\n\n// Initialize nested properties\ninitializeNestedObject(shelly, defaults);\n\n// Save the updated object back to global context\nglobal.set('shelly', shelly);\n// set the chassis battery RV-C source to 20 which denotes 'voltmeter'\n// global.set('status.power.chassis_battery_priority', 20);",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "3b012af0762222b4",
        "type": "function",
        "z": "88d7f3330d1f4af5",
        "name": "Convert DC volts to RV-C CANid v3",
        "func": "// \u00c2\u00a92024 Rob Picchione myervin.com\n//v0.65.3\n//\n// This flow reads the chassis voltage value in global context (status.power.chassis_battery_volts), \n// saved by the Shelly Plus Uni flows. Then, it rebracasts it in RV-C format onto the Canbus.\n\n// The reason to do it this way is to eliminate the need to make more extensive modifications\n// to other parts of the flow that expect the chassis battery voltage to be on the RV-C.\n//\n// To calculate the voltage multiply byte3 by 256, add byte2 to the result\n// then multiply that result by .05\n// Example: byte3=1, byte2=2: 1 * 256 = 256, 256 + 2 = 258, 258 * .05 = 12.9 volts\n\n// If the device priority is greater than 20 cancel the operation. This is to minimize\n// conflict if an RV-C device is already reporting to the RV-C.\n// The CAN packet sent from this flow has a device priority of 20 (voltmeter), \n// most other devices have a higher value.\n//\n// CAUTION: this code shoud detect if another source is already reporting chassis battery voltage,\n// however, if it causes errors this node can simply be deleted or disabled.\n\n// Get the device priority value from global context\nvar devpriority = global.get('status.power.chassis_battery_priority');\n\n// Ensure devpriority is valid before proceeding\nif (devpriority === undefined || devpriority === null || (typeof devpriority === 'number' && devpriority <= 20)) {\n\n    // Get the voltage from global context\n    var voltage = global.get('shelly.status.chassis_battery_volts');\n\n    // Check if voltage is a valid number before proceeding\n    if (typeof voltage === 'number') {\n        // Step 1: Calculate the raw value\n        var rawValue = voltage / 0.05;\n\n        // Step 2: Extract Byte 3 and Byte 2\n        var byte3 = Math.floor(rawValue / 256);  // Most significant byte\n        var byte2 = Math.floor(rawValue % 256); // Least significant byte\n\n        // Prepare the CAN frame data\n        msg.payload = {\n            \"ext\": true,\n            \"canid\": 0x19FFFD99, // RV-C canID for DGN 1FFFD\n            \"dlc\": 8,\n            \"data\": [\n                2,   // Instance for chassis battery voltage \n                20,  // Specifies RV-C \"voltmeter\" device for instance\n                byte2,   // Byte 2 (least significant byte) of voltage value\n                byte3,   // Byte 3 (most significant byte) of voltage value\n                255,    // These bytes report Amps (current) which are not provided by the Shelly\n                255,\n                255,\n                255\n            ]\n        };\n        return msg; // Return the prepared message\n    } else {\n        // Voltage is not a valid number\n        // node.error(\"Voltage is not a valid number\", msg);\n        return null; // Stop the flow\n    }\n} else {\n    // devpriority is invalid or too high\n    // node.warn(\"Device priority is too high or invalid, operation canceled\");\n    return null; // Stop the flow\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 1780,
        "wires": [
            [
                "3e93c9141bf45256"
            ]
        ]
    },
    {
        "id": "4229cb50d29607f1",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "1FFF4h",
        "info": "",
        "x": 210,
        "y": 1840,
        "wires": []
    },
    {
        "id": "886ad0f57c4da625",
        "type": "function",
        "z": "88d7f3330d1f4af5",
        "name": "Convert Ignition Status RV-C CANid 19FFF4",
        "func": "// \u00c2\u00a92024 Rob Picchione myervin.com\n//v0.65.3\n//\n// This flow reads the chassis ignition status value in global context (status.power.chassis_battery_volts), \n// saved by the Shelly Plus Uni flows. Then, it rebracasts it in RV-C format onto the Canbus.\n\n// The reason to do it this way is to eliminate the need to make more extensive modifications\n// to other parts of the flow that expect the chassis battery voltage to be on the RV-C.\n//\n// To calculate the voltage multiply byte3 by 256, add byte2 to the result\n// then multiply that result by .05\n// Example: byte3=1, byte2=2: 1 * 256 = 256, 256 + 2 = 258, 258 * .05 = 12.9 volts\n//\n// CAUTION: this code shoud detect if another source is already reporting chassis battery voltage,\n// however, if it causes errors this node can simply be deleted or disabled.\n\n// Get the ignition status from global context\nvar ignitionstatus = global.get('status.chassis.ignition');\n\n// Ensure ignitionstatus is valid before proceeding\nif (ignitionstatus === undefined || ignitionstatus === null || typeof ignitionstatus === 'string') {\n\n    // Get the ignition status from the Shelly global context\n    var ignstat = global.get('shelly.status.ignition');\n\n    // Check if ignstat is a valid string and matches 'off' or 'on'\n    if (typeof ignstat === 'string' && (ignstat === 'off' || ignstat === 'on')) {\n        // Determine ignval based on ignstat\n        var ignval = 0x00; // Default to 'off'\n        if (ignstat === 'on') {\n            ignval = 0x01;\n        }\n\n        // Prepare the CAN frame data\n        msg.payload = {\n            \"ext\": true,\n            \"canid\": 0x19FFF499, // RV-C canID for DGN 1FFF4\n            \"dlc\": 8,\n            \"data\": [\n                255,   // Byte 0 least significant byte RPM\n                255,   // Byte 1 most significant byte RPM - total 65535 = unknown per RV-C spec\n                255,   // Byte 2 least significant byte SPEED\n                255,   // Byte 3 most significant byte SPEED - total 65535 = unknown per RV-C spec\n                255,   // Byte 4 statuses per RV-C spec\n                ignval, // Byte 5 ignition switch status (off: 0x00, on: 0x01)\n                255,   // Byte 6 Transmission current gear\n                255    // Byte 7 Transmission gear selected\n            ]\n        };\n        return msg; // Return the prepared message\n    } else {\n        // ignstat is not valid\n        //node.error(\"Ignition status (ignstat) is not a valid string or value\", msg);\n        return null; // Stop the flow\n    }\n} else {\n    // ignitionstatus is invalid\n    //node.warn(\"Ignition status (ignitionstatus) is invalid or not available in global context\");\n    return null; // Stop the flow\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1880,
        "wires": [
            [
                "3e93c9141bf45256"
            ]
        ]
    },
    {
        "id": "3754ed9931983e72",
        "type": "ui_text",
        "z": "88d7f3330d1f4af5",
        "group": "f2520bf9936cf711",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "Locks_Shelly",
        "label": "",
        "format": "Tab Name: {{msg.payload.tabname}} <br> Source: {{msg.payload.source}} <br> Tab Version: {{msg.payload.tabver}}",
        "layout": "row-left",
        "className": "",
        "x": 470,
        "y": 240,
        "wires": []
    },
    {
        "id": "2d39b953db62f2fa",
        "type": "inject",
        "z": "88d7f3330d1f4af5",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Locks_Shelly",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.65",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 230,
        "y": 240,
        "wires": [
            [
                "3754ed9931983e72",
                "ee04f7d75a03db01"
            ]
        ]
    },
    {
        "id": "e6d4ad544425f928",
        "type": "comment",
        "z": "88d7f3330d1f4af5",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 190,
        "y": 200,
        "wires": []
    },
    {
        "id": "ee04f7d75a03db01",
        "type": "change",
        "z": "88d7f3330d1f4af5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "81e880660a6e4cb1",
        "type": "ui_template",
        "z": "88d7f3330d1f4af5",
        "group": "f6ae28b7.041968",
        "name": "Entry Door Status",
        "order": 18,
        "width": 0,
        "height": 0,
        "format": "<div style=\"display: flex; justify-content: space-between; align-items: center; font-size: 16px;\">\n    <span style=\"color: black; font-weight: bold;\">Entry Door Status:</span>\n    <span style=\"color: {{msg.color}}; font-weight: bold;\">{{msg.payload}}</span>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1430,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "02d65c18e23cc9b1",
        "type": "ui_template",
        "z": "88d7f3330d1f4af5",
        "group": "f6ae28b7.041968",
        "name": "Cargo Bay Door Lock Status",
        "order": 15,
        "width": 2,
        "height": 2,
        "format": "<div\n    style=\"display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; font-size: 16px;\">\n    <div style=\"color: black; font-weight: bold;\">CARGO</div>\n    <i style=\"color: {{msg.color}}; margin-top: 5px;\" ng-bind-html=\"msg.payload\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1440,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "e825e5e4050b5514",
        "type": "ui_template",
        "z": "88d7f3330d1f4af5",
        "group": "f6ae28b7.041968",
        "name": "Entry Door Lock Status",
        "order": 7,
        "width": 2,
        "height": 2,
        "format": "<div style=\"display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; font-size: 16px;\">\n    <div style=\"color: black; font-weight: bold;\">ENTRY</div>\n    <i style=\"color: {{msg.color}}; margin-top: 5px;\" ng-bind-html=\"msg.payload\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1430,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "f655e209.c54c2",
        "type": "exec",
        "z": "ecaba791469be1cf",
        "command": "/coachproxy/rv-c/window_shade_entegra_pre2013.pl",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 2150,
        "y": 2000,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "5a45bd75.3ba2b4",
        "type": "template",
        "z": "ecaba791469be1cf",
        "name": "shade_template",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "2016 {{payload}} {{topic}}",
        "output": "str",
        "x": 1740,
        "y": 2000,
        "wires": [
            [
                "f655e209.c54c2",
                "a8df53602ddc8312"
            ]
        ]
    },
    {
        "id": "48c2ce4b.accd5",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/windshield_42_night_up/",
        "group": "ae3b3824.48abe8",
        "order": 3,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "42",
        "topicType": "str",
        "x": 1130,
        "y": 1540,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "a8cdf72f.d35398",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/windshield_42_night_down/",
        "group": "ae3b3824.48abe8",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "42",
        "topicType": "str",
        "x": 1140,
        "y": 1580,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "a10e021a.9b08a",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/windshield_42_day_up/",
        "group": "ae3b3824.48abe8",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "42",
        "topicType": "str",
        "x": 1130,
        "y": 1460,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "50fbb40f.f0037c",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/windshield_42_day_down/",
        "group": "ae3b3824.48abe8",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "42",
        "topicType": "str",
        "x": 1140,
        "y": 1500,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "2e7ed346.e1a85c",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/all_shades_night_up/",
        "group": "5725fb8d.051db4",
        "order": 3,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "41 42 43 44 45 50 51 52",
        "topicType": "str",
        "x": 1120,
        "y": 400,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "b8f35696.48a998",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/all_shades_night_down/",
        "group": "5725fb8d.051db4",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "41 42 43 44 45 50 51 52",
        "topicType": "str",
        "x": 1130,
        "y": 480,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "494657c0.4deba8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/all_shades_day_up/",
        "group": "5725fb8d.051db4",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "41 42 43 44 45 46 47 48 49 50 51 52",
        "topicType": "str",
        "x": 1120,
        "y": 360,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "eb7fdc35.a9cbc",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/all_shades_day_down/",
        "group": "5725fb8d.051db4",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "41 42 43 44 45 46 47 48 49 50 51 52",
        "topicType": "str",
        "x": 1130,
        "y": 440,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "98e93956.c0ab48",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/toll_43_night_up/",
        "group": "ae3b3824.48abe8",
        "order": 8,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "43",
        "topicType": "str",
        "x": 1110,
        "y": 1720,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "90a045a2.5633c8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/toll_43_night_down/",
        "group": "ae3b3824.48abe8",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "43",
        "topicType": "str",
        "x": 1120,
        "y": 1800,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "5be44ea5.e3559",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/toll_43_day_up/",
        "group": "ae3b3824.48abe8",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "43",
        "topicType": "str",
        "x": 1100,
        "y": 1680,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "ac7f1ee4.02722",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ps_windshield_43_day_down/",
        "group": "ae3b3824.48abe8",
        "order": 14,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "43",
        "topicType": "str",
        "x": 1090,
        "y": 1320,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "dc37a726.1f7db8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/entry_44_night_up/",
        "group": "ae3b3824.48abe8",
        "order": 18,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "44",
        "topicType": "str",
        "x": 1120,
        "y": 1940,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "d74e63d3.c1f0f",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/entry_44_night_down/",
        "group": "ae3b3824.48abe8",
        "order": 20,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "44",
        "topicType": "str",
        "x": 1120,
        "y": 2020,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "ee36d7ca.aff688",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/entry_44_day_up/",
        "group": "ae3b3824.48abe8",
        "order": 17,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "44",
        "topicType": "str",
        "x": 1110,
        "y": 1900,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "5ea21cd0.56c684",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/entry_44_day_down/",
        "group": "ae3b3824.48abe8",
        "order": 19,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "44",
        "topicType": "str",
        "x": 1120,
        "y": 1980,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "87b626c4.7b23a8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/toll_41_night_up/",
        "group": "ae3b3824.48abe8",
        "order": 13,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "41",
        "topicType": "str",
        "x": 1110,
        "y": 1280,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "be112b05.a65e18",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/toll_41_night_down/",
        "group": "ae3b3824.48abe8",
        "order": 15,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "41",
        "topicType": "str",
        "x": 1120,
        "y": 1360,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "1de16049.6f018",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/toll_41_day_up/",
        "group": "ae3b3824.48abe8",
        "order": 12,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "41",
        "topicType": "str",
        "x": 1100,
        "y": 1240,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "c477dccf.4b151",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/toll_41_day_down/",
        "group": "ae3b3824.48abe8",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "41",
        "topicType": "str",
        "x": 1150,
        "y": 1760,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "ae61032c.7ed5f",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/dinette_47_night_up/",
        "group": "5a6f1f47.88d1c",
        "order": 3,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "47",
        "topicType": "str",
        "x": 1120,
        "y": 2400,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "2bf36062.f8d7",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/dinette_47_night_down/",
        "group": "5a6f1f47.88d1c",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "47",
        "topicType": "str",
        "x": 1130,
        "y": 2480,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "decb10b6.d3976",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/dinette_47_day_up/",
        "group": "5a6f1f47.88d1c",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "47",
        "topicType": "str",
        "x": 1120,
        "y": 2360,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "204463ab.d88f3c",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/dinette_47_day_down/",
        "group": "5a6f1f47.88d1c",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "47",
        "topicType": "str",
        "x": 1130,
        "y": 2440,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "4c40c0a4.1d043",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ds_slide_end_rear_48_night_up/",
        "group": "5a6f1f47.88d1c",
        "order": 18,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "48",
        "topicType": "str",
        "x": 1160,
        "y": 2840,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "74d65a97.ec0c54",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ds_slide_end_rear_48_night_down/",
        "group": "5a6f1f47.88d1c",
        "order": 20,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "48",
        "topicType": "str",
        "x": 1170,
        "y": 2920,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "7e9cc68c.95e508",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ds_slide_end_rear_48_day_up/",
        "group": "5a6f1f47.88d1c",
        "order": 17,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "48",
        "topicType": "str",
        "x": 1150,
        "y": 2800,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "180d3825.7734c8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ds_slide_end_rear_48_day_down/",
        "group": "5a6f1f47.88d1c",
        "order": 19,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "48",
        "topicType": "str",
        "x": 1160,
        "y": 2880,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "b5ccdd00.f54e",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_50_night_up/",
        "group": "3806de6b.607142",
        "order": 3,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "50",
        "topicType": "str",
        "x": 1110,
        "y": 3440,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "751bafdb.117ce",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_50_night_down/",
        "group": "3806de6b.607142",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "50",
        "topicType": "str",
        "x": 1120,
        "y": 3520,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "6b2a8d58.901564",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_50_day_up/",
        "group": "3806de6b.607142",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "50",
        "topicType": "str",
        "x": 1110,
        "y": 3400,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "33f88c5c.5f4b14",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_50_day_down/",
        "group": "3806de6b.607142",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "50",
        "topicType": "str",
        "x": 1120,
        "y": 3480,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "baab6b0e.a596f8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/vanity_51_night_up/",
        "group": "3806de6b.607142",
        "order": 8,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "51",
        "topicType": "str",
        "x": 1120,
        "y": 3660,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "b257ea0d.8bafd8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/vanity_51_night_down/",
        "group": "3806de6b.607142",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "51",
        "topicType": "str",
        "x": 1130,
        "y": 3740,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "58ee4ea0.cca99",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/vanity_51_day_up/",
        "group": "3806de6b.607142",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "51",
        "topicType": "str",
        "x": 1110,
        "y": 3620,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "e669d5.be89f628",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/vanity_51_day_down/",
        "group": "3806de6b.607142",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "51",
        "topicType": "str",
        "x": 1120,
        "y": 3700,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "4a3c64a0.dda8bc",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bath_52_night_up/",
        "group": "6fd8f21b.f22b1c",
        "order": 8,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "52",
        "topicType": "str",
        "x": 1110,
        "y": 3880,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "c4d8abeb.7c76f8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bath_52_night_down/",
        "group": "6fd8f21b.f22b1c",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "52",
        "topicType": "str",
        "x": 1120,
        "y": 3960,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "95ff0a36.a10568",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bath_52_day_up/",
        "group": "6fd8f21b.f22b1c",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "52",
        "topicType": "str",
        "x": 1110,
        "y": 3840,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "caaa5737.511258",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bath_52_day_down/",
        "group": "6fd8f21b.f22b1c",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "52",
        "topicType": "str",
        "x": 1120,
        "y": 3920,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "8d944c36.f329b",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ds_slide_end_front_45_night_up/",
        "group": "5a6f1f47.88d1c",
        "order": 13,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1160,
        "y": 2180,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "a7df515f.690b5",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ds_slide_end_front_45_night_down/",
        "group": "5a6f1f47.88d1c",
        "order": 15,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1170,
        "y": 2260,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "9b9f9164.0d927",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ds_slide_end_front_45_day_up/",
        "group": "5a6f1f47.88d1c",
        "order": 12,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1150,
        "y": 2140,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "58330ec9.8f6ed",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ds_slide_end_front_45_day_down/",
        "group": "5a6f1f47.88d1c",
        "order": 14,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1160,
        "y": 2220,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "7dc8b4aa.78a1cc",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ds_sofa_46_night_up/",
        "group": "5a6f1f47.88d1c",
        "order": 8,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "46",
        "topicType": "str",
        "x": 1120,
        "y": 2620,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "b4f24073.1361a",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ds_sofa_46_night_down/",
        "group": "5a6f1f47.88d1c",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "46",
        "topicType": "str",
        "x": 1130,
        "y": 2700,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "ca62de06.e639f",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ds_sofa_46_day_up/",
        "group": "5a6f1f47.88d1c",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "46",
        "topicType": "str",
        "x": 1120,
        "y": 2580,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "1691f00.f216c1",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ds_sofa_46_day_down/",
        "group": "5a6f1f47.88d1c",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "46",
        "topicType": "str",
        "x": 1130,
        "y": 2660,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "57d055b7.fc4aac",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ps_sofa_49_night_up/",
        "group": "5a6f1f47.88d1c",
        "order": 23,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "49",
        "topicType": "str",
        "x": 1120,
        "y": 3060,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "badc2697.b24f88",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "d": true,
        "name": "/ps_sofa_49_night_down/",
        "group": "5a6f1f47.88d1c",
        "order": 25,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "49",
        "topicType": "str",
        "x": 1130,
        "y": 3140,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "f534772d.5a9228",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ps_sofa_49_day_up/",
        "group": "5a6f1f47.88d1c",
        "order": 22,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "49",
        "topicType": "str",
        "x": 1120,
        "y": 3020,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "2beb92c8.dbddde",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/ps_sofa_49_day_down/",
        "group": "5a6f1f47.88d1c",
        "order": 24,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "49",
        "topicType": "str",
        "x": 1130,
        "y": 3100,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "107e7b31.7589c5",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/cab_master_night_up/",
        "group": "5725fb8d.051db4",
        "order": 8,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "41 42 43 44",
        "topicType": "str",
        "x": 1120,
        "y": 620,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "68517efc.ad07",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/cab_master_night_down/",
        "group": "5725fb8d.051db4",
        "order": 10,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "41 42 43  44",
        "topicType": "str",
        "x": 1130,
        "y": 700,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "66734e3d.527ca",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/cab_master_day_up/",
        "group": "5725fb8d.051db4",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "41 42 43 44",
        "topicType": "str",
        "x": 1120,
        "y": 580,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "d332f7ba.4e4de8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/cab_master_day_down/",
        "group": "5725fb8d.051db4",
        "order": 9,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "41 42 43 44",
        "topicType": "str",
        "x": 1130,
        "y": 660,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "2418ae48.659112",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/lr_master_night_up/",
        "group": "5725fb8d.051db4",
        "order": 13,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1120,
        "y": 840,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "2a5149b6.23d136",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/lr_master_night_down/",
        "group": "5725fb8d.051db4",
        "order": 15,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1130,
        "y": 920,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "bc1bbb64.e89bb8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/lr_master_day_up/",
        "group": "5725fb8d.051db4",
        "order": 12,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "45 46 47 48 49",
        "topicType": "str",
        "x": 1110,
        "y": 800,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "c61072a0.ef868",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/lr_master_day_down/",
        "group": "5725fb8d.051db4",
        "order": 14,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "45 46 47 48 49",
        "topicType": "str",
        "x": 1120,
        "y": 880,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "b1596a5d.09a098",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_master_night_up/",
        "group": "5725fb8d.051db4",
        "order": 18,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "50 51",
        "topicType": "str",
        "x": 1120,
        "y": 1060,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "38e04b6b.e8bc74",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_master_night_down/",
        "group": "5725fb8d.051db4",
        "order": 20,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "50 51",
        "topicType": "str",
        "x": 1130,
        "y": 1140,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "dd2da6a9.4c58e8",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_master_day_up/",
        "group": "5725fb8d.051db4",
        "order": 17,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "day up",
        "payloadType": "str",
        "topic": "50 51",
        "topicType": "str",
        "x": 1120,
        "y": 1020,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "e1156209.d0e4d",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/bed_master_day_down/",
        "group": "5725fb8d.051db4",
        "order": 19,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "day down",
        "payloadType": "str",
        "topic": "50 51",
        "topicType": "str",
        "x": 1130,
        "y": 1100,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "9114a169.3f84f",
        "type": "comment",
        "z": "ecaba791469be1cf",
        "name": "Window Shades Entegra",
        "info": "",
        "x": 1130,
        "y": 260,
        "wires": []
    },
    {
        "id": "dd8d3259.146c1",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5725fb8d.051db4",
        "name": "/all_shades/",
        "order": 1,
        "width": "6",
        "height": "1",
        "format": "<!DOCTYPE html>\n<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>All Shades</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 1090,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "625a2a8.f46b9d4",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5725fb8d.051db4",
        "name": "/cab_master/",
        "order": 6,
        "width": "6",
        "height": "1",
        "format": "<!DOCTYPE html>\n<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Cab Master</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 1090,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "d4ee8ec3.89ed1",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5725fb8d.051db4",
        "name": "/lr_master/",
        "order": 11,
        "width": "6",
        "height": "1",
        "format": "<!DOCTYPE html>\n<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Living Room Master</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 1090,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "3c29a9c4.551016",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5725fb8d.051db4",
        "name": "/bed_master/",
        "order": 16,
        "width": "6",
        "height": "1",
        "format": "<!DOCTYPE html>\n<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Bedroom Master</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 1090,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "1173c392.b8b40c",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "d": true,
        "group": "ae3b3824.48abe8",
        "name": "/toll_41/",
        "order": 11,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Toll</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "77b13605.4a3f98",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "ae3b3824.48abe8",
        "name": "windshield_42/",
        "order": 1,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Windshield</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1100,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "e2b5442a.7a29c8",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "ae3b3824.48abe8",
        "name": "/toll_43/",
        "order": 6,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>toll</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "bb152417.485968",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "ae3b3824.48abe8",
        "name": "/entry_44/",
        "order": 16,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Entry</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "4bcd5f2a.d9ddf",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5a6f1f47.88d1c",
        "name": "/ps_sofa/",
        "order": 21,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>PS Sofa</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 2980,
        "wires": [
            []
        ]
    },
    {
        "id": "875e8c8a.5d873",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5a6f1f47.88d1c",
        "name": "/ds_slide_end_front_45/",
        "order": 11,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>DS Slide End Front</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1130,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "e1394c3f.8b478",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5a6f1f47.88d1c",
        "name": "/dinette_47/",
        "order": 1,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Dinette</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1090,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "cdaea80d.7c6c38",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5a6f1f47.88d1c",
        "name": "/ds_sofa_46/",
        "order": 6,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>DS Sofa</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1090,
        "y": 2540,
        "wires": [
            []
        ]
    },
    {
        "id": "2d947296.ddea6e",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5a6f1f47.88d1c",
        "name": "/ds_slide_end_rear_48/",
        "order": 16,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>DS Slide End Rear</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1130,
        "y": 2760,
        "wires": [
            []
        ]
    },
    {
        "id": "e63d8ae.5587a78",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "3806de6b.607142",
        "name": "/bed_50/",
        "order": 1,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Bed</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 3360,
        "wires": [
            []
        ]
    },
    {
        "id": "88a5a9a1.d29ff8",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "3806de6b.607142",
        "name": "/vanity_51/",
        "order": 6,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Vanity</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1090,
        "y": 3580,
        "wires": [
            []
        ]
    },
    {
        "id": "762dc253.7b33cc",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "6fd8f21b.f22b1c",
        "name": "/bath_52/",
        "order": 6,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-sun-o\" style=\"margin-left:44px;\"></i></div>\n<span>Bath</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 3800,
        "wires": [
            []
        ]
    },
    {
        "id": "3638bd7857716257",
        "type": "inject",
        "z": "ecaba791469be1cf",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Shades_Awnings",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1130,
        "y": 140,
        "wires": [
            [
                "c7f8aa1525f9c4ec",
                "bcba1c72e09674ec"
            ]
        ]
    },
    {
        "id": "ff6245cf68dfe6e1",
        "type": "comment",
        "z": "ecaba791469be1cf",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 1090,
        "y": 100,
        "wires": []
    },
    {
        "id": "c7f8aa1525f9c4ec",
        "type": "change",
        "z": "ecaba791469be1cf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "bcba1c72e09674ec",
        "type": "ui_text",
        "z": "ecaba791469be1cf",
        "group": "909ecac6b6d706db",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "Location",
        "label": "",
        "format": "Tab Name: {{msg.payload.tabname}} <br> Source: {{msg.payload.source}} <br> Tab Version: {{msg.payload.tabver}}",
        "layout": "row-left",
        "className": "",
        "x": 1360,
        "y": 140,
        "wires": []
    },
    {
        "id": "a8df53602ddc8312",
        "type": "debug",
        "z": "ecaba791469be1cf",
        "name": "debug 27",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2100,
        "y": 1780,
        "wires": []
    },
    {
        "id": "0cdbb0805f3fcb3c",
        "type": "comment",
        "z": "ecaba791469be1cf",
        "name": "Typical Entegra Shade Mapping 2015+",
        "info": "  # [ENTEGRA] Note: As of 20190108 2014 & older Entegra have not been tested, the below may work.\n  1  => {'day' => 1,  'night' => 5}, # drivers toll\n  2  => {'day' => 2,  'night' => 6}, # drivers windshield\n  3  => {'day' => 3,  'night' => 7}, # passenger windshield\n  4  => {'day' => 4,  'night' => 8}, # Entry\n  5  => {'day' => 9,  'night' => 13}, # DS slide ends\n  6  => {'day' => 10, 'night' => 14}, # Ent Center\n  7  => {'day' => 11, 'night' => 15}, # Dinette\n  8  => {'day' => 12, 'night' => 16}, # Sofa\n  9  => {'day' => 17, 'night' => 21}, # Bed\n  10 => {'day' => 18, 'night' => 22}, # Bed Vanity\n  11 => {'day' => 19, 'night' => 23}, # Mid Bath\n  12 => {'day' => 20, 'night' => 24}, # Bath\n  13 => {'day' => 25, 'night' => 29},  \n  14 => {'day' => 26, 'night' => 30},\n  15 => {'day' => 27, 'night' => 31},\n  16 => {'day' => 28, 'night' => 32},\n  #\n  # [ENTEGRA] Below Mapping for passenger seat window which was split into two shades (entry and window) 2018\n  # and up. Below are the G6 instances on a 2018 Entegra Cornerstone DEQ, all the other shades have dedicated\n  # shade control modules.\n  #\n  17 => {'day' => {'up' => [ 117,  118], 'down' => [ 118,  117]}, 'night' => {'up' => [ 119,  120], 'down' => [ 120,  119]}},\n  #\n  # [ENTEGRA] Below mappings are for a 2014 44B. Offset from original by 20.\n  21 => {'day' => 1,  'night' => 5}, \t# toll\n  22 => {'day' => 2,  'night' => 7}, \t# DS windshield\n  23 => {'day' => 3,  'night' => 8},\t# PS windshield\n  24 => {'day' => 4,  'night' => 6},\t# entry\n  # no d/s slide end\n  # no ent center\n  27 => {'day' => 9, 'night' => 14},\t# dinette\n  28 => {'day' => 13, 'night' => 15},\t# sofa\n  29 => {'day' => 17, 'night' => 21},\t# bed\n  30 => {'day' => 18, 'night' => 22},\t# vanity\n  31 => {'day' => 19, 'night' => 23},\t# mid bath\n  32 => {'day' => 20, 'night' => 24},\t# bath\n  #\n  # [ENTEGRA] Below mappings are for a 2013 DEQ. Offset from original by 40.\n  41 => {'day' => 1,  'night' => 5}, \t# toll\n  42 => {'day' => 2,  'night' => 7}, \t# DS windshield\n  43 => {'day' => 3,  'night' => 8},\t# PS windshield\n  44 => {'day' => 4,  'night' => 6},\t# entry\n  45 => {'day' => 9,  'night' => 14},\t# DS slie end front\n  46 => {'day' => 10,  'night' => 14},\t# DS sofa\n  47 => {'day' => 11, 'night' => 14},\t# dinette\n  48 => {'day' => 12, 'night' => 14},\t# DS slide end rear\n  49 => {'day' => 13,  'night' => 14},\t# PS sofa\n  50 => {'day' => 17, 'night' => 21},\t# bed\n  51 => {'day' => 18, 'night' => 22},\t# vanity\n  52 => {'day' => 19, 'night' => 23},\t# bath",
        "x": 1430,
        "y": 260,
        "wires": []
    },
    {
        "id": "40b3b833c6574093",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/all_LR_45_night_up/",
        "group": "5a6f1f47.88d1c",
        "order": 27,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-up fa-3x",
        "payload": "night up",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1120,
        "y": 3240,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "91578281b8d159c3",
        "type": "ui_button",
        "z": "ecaba791469be1cf",
        "name": "/all_LR_45_night_down/",
        "group": "5a6f1f47.88d1c",
        "order": 28,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "#000",
        "bgcolor": "",
        "className": "",
        "icon": "fa-caret-down fa-3x",
        "payload": "night down",
        "payloadType": "str",
        "topic": "45",
        "topicType": "str",
        "x": 1130,
        "y": 3280,
        "wires": [
            [
                "5a45bd75.3ba2b4"
            ]
        ]
    },
    {
        "id": "a76cd9533afe16a9",
        "type": "ui_template",
        "z": "ecaba791469be1cf",
        "group": "5a6f1f47.88d1c",
        "name": "/all_LR_night_45/",
        "order": 26,
        "width": "6",
        "height": "1",
        "format": "<div style=\"height: 14px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 18px; font-size: 16px; text-align: center\">\n<div style=\"float:left;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-left:44px;\"></i></div>\n<span>All LR Night Shades</span>\n<div style=\"float:right;\"><i class=\"fa fa-fw fa-moon-o\" style=\"margin-right:44px;\"></i></div>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1110,
        "y": 3200,
        "wires": [
            []
        ]
    },
    {
        "id": "c0a7faf7d7a57a61",
        "type": "exec",
        "z": "c9c5d006fca5358e",
        "command": "/coachproxy/rv-c/generator_uni.pl ",
        "addpay": "payload",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "generator_uni",
        "x": 1060,
        "y": 380,
        "wires": [
            [
                "4a9227799490f1bc"
            ],
            [],
            []
        ]
    },
    {
        "id": "4a9227799490f1bc",
        "type": "delay",
        "z": "c9c5d006fca5358e",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1240,
        "y": 440,
        "wires": [
            [
                "fa1cb54ad32a9744"
            ]
        ]
    },
    {
        "id": "fa1cb54ad32a9744",
        "type": "template",
        "z": "c9c5d006fca5358e",
        "name": "Blank",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "",
        "x": 410,
        "y": 420,
        "wires": [
            [
                "a21a0925e420a4b5"
            ]
        ]
    },
    {
        "id": "e07937c474bbfb6a",
        "type": "ui_switch",
        "z": "c9c5d006fca5358e",
        "name": "Gen Controls Enable",
        "label": "Gen Controls Enable",
        "tooltip": "",
        "group": "fe6fb66758803415",
        "order": 3,
        "width": "6",
        "height": "1",
        "passthru": true,
        "decouple": "false",
        "topic": "genstartenable",
        "topicType": "str",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 800,
        "y": 260,
        "wires": [
            [
                "9d1c25b0fb585134"
            ]
        ]
    },
    {
        "id": "050a8754589aae06",
        "type": "ui_button",
        "z": "c9c5d006fca5358e",
        "name": "Start Generator",
        "group": "fe6fb66758803415",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Start Gen",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-repeat",
        "payload": "1",
        "payloadType": "str",
        "topic": "generator",
        "topicType": "str",
        "x": 780,
        "y": 360,
        "wires": [
            [
                "9d1c25b0fb585134"
            ]
        ]
    },
    {
        "id": "4a12ed0e455a37d6",
        "type": "ui_button",
        "z": "c9c5d006fca5358e",
        "name": "Stop Generator",
        "group": "fe6fb66758803415",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Stop Gen",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "fa-stop",
        "payload": "0",
        "payloadType": "str",
        "topic": "generator",
        "topicType": "str",
        "x": 780,
        "y": 400,
        "wires": [
            [
                "9d1c25b0fb585134"
            ]
        ]
    },
    {
        "id": "0726cd5a50adf134",
        "type": "ui_template",
        "z": "c9c5d006fca5358e",
        "group": "fe6fb66758803415",
        "name": "Generator Note",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "<div>\n<p>\nAs a safety precaution for operating the generator,\nyou must turn on 'Gen Controls Enable', then press\n'Start Gen' or 'Stop Gen' within 5 seconds.\nGenerator may take up to 60 seconds to start.\n<br><br>Note: Set the generation configuration in Settings before operating.\n</p>\n<p>&nbsp;</p>\n</div>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 780,
        "y": 320,
        "wires": [
            [
                "9d1c25b0fb585134"
            ]
        ]
    },
    {
        "id": "702ffda4d420c3ee",
        "type": "ui_template",
        "z": "c9c5d006fca5358e",
        "group": "fe6fb66758803415",
        "name": "Gen Start Status",
        "order": 6,
        "width": "",
        "height": "",
        "format": "<div layout=\"row\" layout-align=\"center center\"><b>{{msg.payload}}</b></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 780,
        "y": 460,
        "wires": [
            [
                "9d1c25b0fb585134"
            ]
        ]
    },
    {
        "id": "a21a0925e420a4b5",
        "type": "rbe",
        "z": "c9c5d006fca5358e",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "x": 570,
        "y": 400,
        "wires": [
            [
                "702ffda4d420c3ee"
            ]
        ]
    },
    {
        "id": "2b8795f39b7cd217",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 190,
        "y": 420,
        "wires": [
            [
                "fa1cb54ad32a9744"
            ]
        ]
    },
    {
        "id": "f960a2fc9820593c",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "Check Gen Start Enabled Timer",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "checkgenenable",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "topic": "checkgenenable",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 280,
        "wires": [
            [
                "d93070408c73d08a"
            ]
        ]
    },
    {
        "id": "0c523f0877773aa8",
        "type": "mqtt in",
        "z": "c9c5d006fca5358e",
        "name": "GenStart Message",
        "topic": "GENSTART/MESSAGE",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 210,
        "y": 340,
        "wires": [
            [
                "652377125e947271"
            ]
        ]
    },
    {
        "id": "d88edb7e8734f627",
        "type": "comment",
        "z": "c9c5d006fca5358e",
        "name": "Generator Uni Logic v065",
        "info": "v065\nc 2023 Rob Picchione myervin.com\n\nRequires /coachproxy/rv-c/generator-uni.pl\n\nThis flow, coupled with generator_uni.pl provides a more universal solution compared to the \noriginal coachproxy version which was Tiffin specific. The uni version allows for all key \nparameters to be configured by the end user directly from the dashboard. The coachproxy version had \nmost of these values hardcoded.\n\ngenerator_uni.pl requires an RV-C CAN network and senses the GENERATOR_STATUS_1 DGN for status (if available). \nIt sends control commands via an instance of the DC_DIMMER_COMMAND_2 DGN which is typically used to control \nlights and other switched devices. Two instance are required, one for Start and one for Stop. Each RV \nbrand/model/floorplan is likely to use differnt instance values. It is also possible to add generator control to\nan RV-C equipped coach that does not currently have it. This is done with relays that activate the start/stop\nswitch, that are controlled by unused instances on the RV's SpyderFirefly panel. See myervin.com and search on\ngenerator for more info.\n\n20241208 UPDATE: Rather than use unused Spyder/Firefly Dimmer or Relay instances which may not be available on newer coaches,\nit is also possible, and perhaps preferable, to use a Shelly Plus Uni \n(https://us.shelly.com/products/shelly-plus-uni) module instead. The Shelly module\ncan be conficgured to support MQTT and fully integrate with eRVin. Shelly support will be added to a future release.\n\nThe below settings only need to be set once. See https://myervin.com/generator for additional help \ndetermining the correct value of these settings.\n\nStatus - Set based on the presence of RV-C generator status data on your network or not. \nOlder RV's may not have the GENERATOR_STATUS_1 DGN active on its RV=C network. This DGN will report\nif the generator is running or stopped and is used by generator_uni.pl to expedite control. For example,\nif the generator is stopped and the status is \"stopped\", generator_uni.pl will only enable the start switch\nuntil the status changes to \"running\". Wheras, without status, the start switch will be enabled for the entire\nduration of the Crank Time setting. This typically won't be a problem, as most AGS will de-energize the starter\nmotor automatically when the engine actually starts. You will be able to tel if you have the GENERATOR_STATUS_1 DGN\nactive by simply enabling it in this setting and trying it. If you don't have status support, generator_uni.pl will not start \nthe generator and the Dashboard will indicate \"Generator Start Failed\".\n\n\nStop ID - The decimal instance value of the generator Stop/Prime switch (range 1-200). You can tap the number and enter\nyour value directly from the keyboard instead of using the up/down arrows. The Stop ID and Start ID instance can be determined\nby checking myervin.com for known brand/model/floorplans, this will include most Tiffin and Entegra models. For other RV's \nthe instances can usually be determined from manufacturer documentation or labeling on the Spyder/Firefly panel. As a last\nresort the eRVin \"Mini Instance Detector\" may be able to be employed.\n\nStart ID - The decimal instance value of the generator Start/Preheat switch (range 1-200). You can tap the number and enter\nyour value directly from the keyboard instead of using the up/down arrows. The Stop ID and Start ID instance can be determined\nby checking myervin.com for known brand/model/floorplans, this will include most Tiffin and Entegra models. For other RV's \nthe instances can usually be determined from manufacturer documentation or labeling on the Spyder/Firefly panel. As a last\nresort the eRVin \"Mini Instance Detector\" may be able to be employed.\n\nPrime Time - How many seconds to prime the generator before starting (range 0-30). Note: Most diesel gensets should have the \nprime_time value set to zero. Priming a diesel engine in most cases is only required if the fuel filter has been serviced or \nthe generator has run out of fuel. \n        \nCrank Time - How many seconds to crank the generator generator starter (range 0-30). The Crank Time is actually the equivalent \nof holding down the Start button on the factory installed generator switch. Normally this switch will operate the preheat for\nseveral seconds, before cranking. When the generator starts, if status is available and it changes to running the Crank Time will\nabort regardless of the setting. If status is not available, the Crank Time will be equal to the set value. This is equivalent to\nyou physically holding the switch for that amount of time. As previously mentioned, most factory generator controls will \nautomatically stop cranking the starter motor once the engine starts, even if the switch is still active.",
        "x": 190,
        "y": 240,
        "wires": []
    },
    {
        "id": "2b321815e8e2fa73",
        "type": "ui_numeric",
        "z": "c9c5d006fca5358e",
        "name": "StopID",
        "label": "Stop ID",
        "tooltip": "",
        "group": "6879090dc8625e7e",
        "order": 4,
        "width": 0,
        "height": 0,
        "wrap": true,
        "passthru": false,
        "topic": "generator_stopid",
        "topicType": "str",
        "format": "{{msg.payload}}",
        "min": "1",
        "max": "200",
        "step": 1,
        "className": "",
        "x": 570,
        "y": 640,
        "wires": [
            [
                "75b1f6c92de0c48a"
            ]
        ]
    },
    {
        "id": "1c013bc0944c1633",
        "type": "ui_dropdown",
        "z": "c9c5d006fca5358e",
        "name": "Status",
        "label": "Status",
        "tooltip": "",
        "place": "Select Version",
        "group": "6879090dc8625e7e",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "RV-C Gen Status Not Active",
                "value": 0,
                "type": "num"
            },
            {
                "label": "RV-C Gen Status Active",
                "value": 1,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "generator_status",
        "topicType": "str",
        "className": "",
        "x": 570,
        "y": 600,
        "wires": [
            [
                "4fbbf04638c97d31"
            ]
        ]
    },
    {
        "id": "9073013a8eda3933",
        "type": "ui_numeric",
        "z": "c9c5d006fca5358e",
        "name": "Start_ID",
        "label": "Start ID",
        "tooltip": "",
        "group": "6879090dc8625e7e",
        "order": 5,
        "width": 0,
        "height": 0,
        "wrap": true,
        "passthru": false,
        "topic": "generator_startid",
        "topicType": "str",
        "format": "{{msg.payload}}",
        "min": "1",
        "max": "200",
        "step": 1,
        "className": "",
        "x": 580,
        "y": 680,
        "wires": [
            [
                "7ca59881e730f357"
            ]
        ]
    },
    {
        "id": "79d0382edbb18d26",
        "type": "ui_numeric",
        "z": "c9c5d006fca5358e",
        "name": "Prime_Time",
        "label": "Prime Time (seconds)",
        "tooltip": "",
        "group": "6879090dc8625e7e",
        "order": 6,
        "width": 0,
        "height": 0,
        "wrap": true,
        "passthru": false,
        "topic": "generator_prime_time",
        "topicType": "str",
        "format": "{{value}}",
        "min": "0",
        "max": "30",
        "step": "5",
        "className": "",
        "x": 590,
        "y": 720,
        "wires": [
            [
                "d049b73e7336399a"
            ]
        ]
    },
    {
        "id": "188a7cd72237c617",
        "type": "ui_numeric",
        "z": "c9c5d006fca5358e",
        "name": "Crank_Time",
        "label": "Crank Time (seconds)",
        "tooltip": "",
        "group": "6879090dc8625e7e",
        "order": 7,
        "width": 0,
        "height": 0,
        "wrap": true,
        "passthru": true,
        "topic": "generator_crank_time",
        "topicType": "str",
        "format": "{{value}}",
        "min": "0",
        "max": "30",
        "step": "5",
        "className": "",
        "x": 590,
        "y": 760,
        "wires": [
            [
                "051547fd83961fd1"
            ]
        ]
    },
    {
        "id": "4fbbf04638c97d31",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.generator.status",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "75b1f6c92de0c48a",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.generator.stopid",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "7ca59881e730f357",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.generator.startid",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "d049b73e7336399a",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.generator.prime_time",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "051547fd83961fd1",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.generator.crank_time",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "7fcf05cc4aa35a26",
        "type": "ui_template",
        "z": "c9c5d006fca5358e",
        "group": "6879090dc8625e7e",
        "name": "Generator Settings",
        "order": 1,
        "width": "",
        "height": "",
        "format": "<!DOCTYPE html>\n<html>\n<body>\n<div>\n    <p> <!--style=\"font-size:70%;\"-->\n        These settings only need to be set once. See <a href=\"https://myervin.com/generator\">myeRVin.com</a> for more help determining the value of these settings. <br><br>\n\n        <b>Control</b> - Spyder/Firefly is the only current option. Shelly Plus Uni will be a future option.<br><br>\n\n        <b>Status</b> - Set based on the presence of RV-C generator status data on your network or not.<br><br>\n\n        <b>Stop ID</b> - The decimal instance value of the generator Stop/Prime switch (range 1-200).<br><br>\n\n        <b>Start ID</b> - The decimal instance value of the generator Start/Preheat switch (range 1-200).<br><br>\n\n        <b>Prime Time</b> - How many seconds to prime the generator before starting (range 0-30). Note: Most diesel gensets should have the prime_time value set to zero. <br><br>\n        \n        <b>Crank Time</b> - How many seconds to crank the generator generator starter (range 0-30).<br>\n    </p>\n</div>\n</body>\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 610,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "d93070408c73d08a",
        "type": "function",
        "z": "c9c5d006fca5358e",
        "name": "genset_countdown",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nif(global.get('genstartenable')===1) {\n    if(global.get('genstartenabletimer')<1) {\n        global.set('genstartenabletimer', 5);\n        global.set('genstartenable', 0);\n        return [{\n            'topic': 'genstartenable',\n            'payload': 0,\n            'timer': 1,\n        },{countdown: 1, payload:\"Controls disabled\"}];\n    }\n    countdown=global.get('genstartenabletimer');\n    global.set('genstartenabletimer', global.get('genstartenabletimer') - 1);\n    return [null,{countdown: 1, payload:\"Controls enabled: \"+countdown+\" seconds\"}];\n} else {\n    global.set('genstartenabletimer', 5);\n    return [{\n        'topic': 'genstartenable',\n        'payload': 0,\n        'timer': 1,\n    },{countdown: 1, payload:\"Controls disabled\"}];\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 280,
        "wires": [
            [
                "e07937c474bbfb6a"
            ],
            [
                "652377125e947271"
            ]
        ]
    },
    {
        "id": "652377125e947271",
        "type": "function",
        "z": "c9c5d006fca5358e",
        "name": "genset_clear_buffer",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nglobal.set('genStatTime', global.get('genStatTime') || 0);\nif (msg.hasOwnProperty('countdown')) {\n    if (global.get('genStatTime') === 0 || (new Date().getTime() / 1000) - global.get('genStatTime') > 5)\n        return msg;\n    else\n        return null;\n} else {\n    global.set('genStatTime', new Date().getTime() / 1000);\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 340,
        "wires": [
            [
                "a21a0925e420a4b5"
            ]
        ]
    },
    {
        "id": "9d1c25b0fb585134",
        "type": "function",
        "z": "c9c5d006fca5358e",
        "name": "genset_safety",
        "func": "//\n// Copyright (C) 2019 Wandertech LLC\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nif (!msg.hasOwnProperty('timer')) {\n    if (msg.topic == 'genstartenable') {\n        if (msg.payload == \"1\") {\n            global.set('genstartenabletimer', 5);\n            global.set('genstartenable', 1);\n        } else {\n            global.set('genstartenabletimer', 5);\n            global.set('genstartenable', 0);\n        }\n    } else {\n        if (msg.topic == 'generator' && global.get('genstartenable') === 1) {\n            const status = global.get('settings').generator.status;\n            const stopid = global.get('settings').generator.stopid;\n            const startid = global.get('settings').generator.startid;\n            const prime_time = global.get('settings').generator.prime_time;\n            const crank_time = global.get('settings').generator.crank_time;\n            msg.payload = status + ' ' + stopid + ' ' + startid + ' ' + msg.payload + ' ' + prime_time + ' ' + crank_time;\n            return msg;\n        }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 320,
        "wires": [
            [
                "c0a7faf7d7a57a61"
            ]
        ]
    },
    {
        "id": "09079fdb503e1993",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.generator.status",
        "payloadType": "global",
        "x": 270,
        "y": 600,
        "wires": [
            [
                "1c013bc0944c1633"
            ]
        ]
    },
    {
        "id": "1a0ac9a338baa83b",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.generator.stopid",
        "payloadType": "global",
        "x": 270,
        "y": 640,
        "wires": [
            [
                "2b321815e8e2fa73"
            ]
        ]
    },
    {
        "id": "753aa531d59a89d7",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.generator.startid",
        "payloadType": "global",
        "x": 270,
        "y": 680,
        "wires": [
            [
                "9073013a8eda3933"
            ]
        ]
    },
    {
        "id": "fa3a31ac96a46cc1",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.generator.prime_time",
        "payloadType": "global",
        "x": 290,
        "y": 720,
        "wires": [
            [
                "79d0382edbb18d26"
            ]
        ]
    },
    {
        "id": "f97b625c8a15111d",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.generator.crank_time",
        "payloadType": "global",
        "x": 290,
        "y": 760,
        "wires": [
            [
                "188a7cd72237c617"
            ]
        ]
    },
    {
        "id": "ee1ba61a9ca7af73",
        "type": "comment",
        "z": "c9c5d006fca5358e",
        "name": "Generator Uni Settings v065",
        "info": "v065\nc 2023 Rob Picchione myervin.com\n\nText, dropdown and number dashboard nodes accept the input values\nand write them to global context with the Change nodes.\n\nAt initilization, the inject nodes copy the settings from  global\ncontext and populate the buttons with the correct values.",
        "x": 200,
        "y": 520,
        "wires": []
    },
    {
        "id": "9179d3e3ac59a0f7",
        "type": "ui_text",
        "z": "c9c5d006fca5358e",
        "group": "fe6fb66758803415",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Genset Status",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 700,
        "y": 900,
        "wires": []
    },
    {
        "id": "3b0618f40719e804",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "stopped",
                "fromt": "str",
                "to": "Stopped",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "running",
                "fromt": "str",
                "to": "Running",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "\"\"",
                "fromt": "str",
                "to": "No Data",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 900,
        "wires": [
            [
                "9179d3e3ac59a0f7"
            ]
        ]
    },
    {
        "id": "960231d43ddf1254",
        "type": "mqtt in",
        "z": "c9c5d006fca5358e",
        "name": "",
        "topic": "CP/GENERATOR",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 210,
        "y": 900,
        "wires": [
            [
                "3b0618f40719e804"
            ]
        ]
    },
    {
        "id": "3c77a5e588c1fea2",
        "type": "comment",
        "z": "c9c5d006fca5358e",
        "name": "Generator Status v065",
        "info": "v065\nc 2023 Rob Picchione myervin.com\n\nSimply displays the verbose generator status from DGN GENERATOR_STATUS_1\nmsg.payload[\"status definition\"]\nThe value will be either \"stopped\" or \"running\" if the infrastructure exists\non your RV-C system.\n\nIf GENERATOR_STATUS_1 does not exist the value will be blank or something\nother than \"stoppped\" or \"running\".\n\nThis status may or may not exist on your coach. Typically a Firefly RSI module\nwill generate the GENERATOR_STATUS_1 DGN.\n\nOn my 2017 Entegra Aspire, generator status is not a factory provided feature,\nhowever the Firefly RSI module has the programming for it and broadcasts \nGENERATOR_STATUS_1 to the RV-C. Tying the pin marked \nGEN on the RSI module to 12v (I used a 1K resitor) will trigger the DGN to\nreport \"running\" on the RV-C. This can be wired to, for example, an Onan\nEC-30 SW B+ wire. See photos here: https://photos.app.goo.gl/8jUzNjgZAHoVaPzv6",
        "x": 180,
        "y": 860,
        "wires": []
    },
    {
        "id": "a58d253d5627813a",
        "type": "mqtt in",
        "z": "c9c5d006fca5358e",
        "name": "",
        "topic": "RVC/GENERATOR_STATUS_1",
        "qos": "2",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 250,
        "y": 1060,
        "wires": [
            [
                "8651ca06e7388c78"
            ]
        ]
    },
    {
        "id": "b829616923a9b088",
        "type": "mqtt out",
        "z": "c9c5d006fca5358e",
        "name": "",
        "topic": "CP/GENERATOR",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 1000,
        "y": 1060,
        "wires": []
    },
    {
        "id": "e7da7f851c5ae1ae",
        "type": "comment",
        "z": "c9c5d006fca5358e",
        "name": "Republish generator status in simple form",
        "info": "original coachproxy",
        "x": 241.05950927734375,
        "y": 1006.3809814453125,
        "wires": []
    },
    {
        "id": "8651ca06e7388c78",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload['status definition']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "status.power.generator_state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 1060,
        "wires": [
            [
                "b829616923a9b088",
                "6efdc8fd67ad1f21"
            ]
        ]
    },
    {
        "id": "3fb8824289138983",
        "type": "mqtt out",
        "z": "c9c5d006fca5358e",
        "name": "",
        "topic": "CP/GENERATOR_STATUS",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 1030,
        "y": 1100,
        "wires": []
    },
    {
        "id": "6efdc8fd67ad1f21",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "Generator Status with Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload & \",\" & ($floor($millis() / 1000))",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1100,
        "wires": [
            [
                "3fb8824289138983"
            ]
        ]
    },
    {
        "id": "c0e89546b032b55d",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "settings.generator.control",
        "payloadType": "global",
        "x": 270,
        "y": 560,
        "wires": [
            [
                "2cbffeb82da021ba"
            ]
        ]
    },
    {
        "id": "e35ae513491f526b",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "settings.generator.control",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "2cbffeb82da021ba",
        "type": "ui_dropdown",
        "z": "c9c5d006fca5358e",
        "name": "Control",
        "label": "Control",
        "tooltip": "",
        "place": "Select Controller Type",
        "group": "6879090dc8625e7e",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Spyder/Firefly Instance",
                "value": "Firefly",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "generator_control",
        "topicType": "str",
        "className": "",
        "x": 580,
        "y": 560,
        "wires": [
            [
                "e35ae513491f526b"
            ]
        ]
    },
    {
        "id": "fd4e7ffdd999f684",
        "type": "inject",
        "z": "c9c5d006fca5358e",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Generator_Uni",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 140,
        "wires": [
            [
                "8ec1c9a3e138148e"
            ]
        ]
    },
    {
        "id": "f8bb8d7568734bd5",
        "type": "comment",
        "z": "c9c5d006fca5358e",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 150,
        "y": 100,
        "wires": []
    },
    {
        "id": "8ec1c9a3e138148e",
        "type": "change",
        "z": "c9c5d006fca5358e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "ea7eae138dabc63b",
        "type": "inject",
        "z": "e079953f6c87d604",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Mobility",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 140,
        "wires": [
            [
                "c1913491b5fa3b43"
            ]
        ]
    },
    {
        "id": "a723a8a47f5e5d68",
        "type": "comment",
        "z": "e079953f6c87d604",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 150,
        "y": 100,
        "wires": []
    },
    {
        "id": "c1913491b5fa3b43",
        "type": "change",
        "z": "e079953f6c87d604",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "d17c387db16eeabd",
        "type": "mqtt in",
        "z": "e079953f6c87d604",
        "name": "",
        "topic": "CP/IGNITION",
        "qos": "2",
        "broker": "c1170463.5c7f8",
        "inputs": 0,
        "x": 190,
        "y": 280,
        "wires": [
            [
                "a71b5bf94a5f5be6"
            ]
        ]
    },
    {
        "id": "a71b5bf94a5f5be6",
        "type": "rbe",
        "z": "e079953f6c87d604",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "x": 410,
        "y": 280,
        "wires": [
            [
                "86d8ee371a0783cc"
            ]
        ]
    },
    {
        "id": "86d8ee371a0783cc",
        "type": "ui_text",
        "z": "e079953f6c87d604",
        "group": "65daa4acefad8e48",
        "order": 2,
        "width": "3",
        "height": "1",
        "name": "Ignition",
        "label": "",
        "format": "Ignition: {{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 600,
        "y": 280,
        "wires": []
    },
    {
        "id": "26400bbb.894a74",
        "type": "sunriseinput",
        "z": "84f0327e.4d899",
        "name": "",
        "lat": "0",
        "lon": "0",
        "start": "sunrise",
        "end": "sunset",
        "x": 570,
        "y": 1220,
        "wires": [
            [
                "98dc4ffc.5ba9a"
            ],
            [
                "717f8a1a.529584",
                "e475a59d.caa8c8"
            ]
        ]
    },
    {
        "id": "5bddb5f3.7fdd0c",
        "type": "e-mail",
        "z": "84f0327e.4d899",
        "server": "smtp.my.server",
        "port": "465",
        "secure": true,
        "tls": false,
        "name": "your@email.address",
        "dname": "email",
        "x": 1010,
        "y": 1280,
        "wires": []
    },
    {
        "id": "717f8a1a.529584",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "The sun has risen!",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "The sun has set!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 1280,
        "wires": [
            [
                "5bddb5f3.7fdd0c"
            ]
        ]
    },
    {
        "id": "e475a59d.caa8c8",
        "type": "change",
        "z": "84f0327e.4d899",
        "d": true,
        "name": "Underslideout Lights",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "37 3",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "37 2",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 1160,
        "wires": [
            [
                "401e792b.e6cb28",
                "8c8302fc.0811b"
            ]
        ]
    },
    {
        "id": "81539a29.32aa88",
        "type": "ui_gauge",
        "z": "84f0327e.4d899",
        "name": "",
        "group": "4ba9cfc2.1a222",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Moon_Phase",
        "label": "Full",
        "format": "{{value * 100}}%",
        "min": 0,
        "max": "1",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 1030,
        "y": 1220,
        "wires": []
    },
    {
        "id": "98dc4ffc.5ba9a",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "Change to Moon",
        "rules": [
            {
                "t": "move",
                "p": "moon",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "topic",
                "pt": "msg",
                "from": "sun",
                "fromt": "str",
                "to": "moon",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 1220,
        "wires": [
            [
                "81539a29.32aa88"
            ]
        ]
    },
    {
        "id": "da466187.b92b",
        "type": "gpsd",
        "z": "84f0327e.4d899",
        "name": "",
        "hostname": "localhost",
        "port": "2947",
        "tpv": true,
        "sky": false,
        "info": false,
        "device": false,
        "gst": false,
        "att": false,
        "x": 170,
        "y": 220,
        "wires": [
            [
                "95e3a2fb.f8f4c",
                "668ef115.321fd",
                "3eaa4f8c.b0751",
                "61c02ef5.4c7d4",
                "953418c5.5e4b28",
                "a9f408e1.e5f158",
                "f4c9ccbe.3c18a",
                "bd3be246.2ee1f",
                "9d55a071.cd775",
                "238a32bb.fc048e",
                "383607f17dd85e07"
            ]
        ]
    },
    {
        "id": "3a0fc3c7.305cec",
        "type": "file",
        "z": "84f0327e.4d899",
        "name": "gpsd-json-file",
        "filename": "/coachproxy/gps/gpsd.json",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "x": 1050,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "4769a2fc.eda06c",
        "type": "csv",
        "z": "84f0327e.4d899",
        "name": "gpsd-csv",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "class,tag,device,mode,time,ept,lat,lon,alt,epx,epy,epv,track,speed,climb,eps,epc",
        "skip": 0,
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1040,
        "y": 260,
        "wires": [
            [
                "2321febd.6c2042"
            ]
        ]
    },
    {
        "id": "2321febd.6c2042",
        "type": "file",
        "z": "84f0327e.4d899",
        "name": "gpsd-csv-file",
        "filename": "/coachproxy/gps/gpsd.csv",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "x": 1210,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "2451ae81.0f3022",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "d": true,
        "group": "fc3455d4.45be98",
        "order": 2,
        "width": "6",
        "height": "3",
        "name": "Location",
        "label": "",
        "format": "Time: {{msg.payload.time}} <br> Lat:      {{msg.payload.lat}} <br> Lon: {{msg.payload.lon}} <br> Altitude: {{msg.payload.alt}}<br> Speed: {{msg.payload.speed}} <br>",
        "layout": "row-left",
        "className": "",
        "x": 840,
        "y": 360,
        "wires": []
    },
    {
        "id": "7db7a4f6.12374c",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "GPS - Read Me",
        "info": "Project: eRVin https://myervin.com\n\u00c2\u00a9 2022 Rob Picchione All right reserved.\nLicense (New BSD) https://myervin.com/new-bsd-license\n\nExample location flows using gps or manual zip code entry.\n\nRequires the following node-red contribs:\ngpsd: https://flows.nodered.org/node/node-red-contrib-gpsd\nworldmap: https://flows.nodered.org/node/node-red-contrib-web-worldmap\nsuncalcinput: https://flows.nodered.org/node/node-red-contrib-suncalcinput \n(or suncron: https://flows.nodered.org/node/node-red-contrib-suncron)\n\nThe manual zipcode entry (when no gps) requiers the following file:\n/coachproxy/home/pi/.node-red/location/zip2latlon.txt\nThe file can be installed from the eRVin system tab \"Install OS Files\".\n\nThe gpsd node in node-red needs gpsd to be installed in the OS, \nsee https://myervin.com/adding-gps-to-your-ervin-system \nfor how to do that. Base eRVin versions since v0.3x already have \ngpsd installed in the OS.\n\ngpsmon can be run from a terminal window on the RPi to check status \nof the gpsd installation and antenna.\n\nWith no gps antenna there will be no output, no gps data and no gps \ninfo presented to the dashboard.\n\nWith the antenna attached, but no fix, there will be output because \nthe \"mode\" is less than 2 so no gps data presented to the dashboard.",
        "x": 200,
        "y": 160,
        "wires": []
    },
    {
        "id": "a83ac3e4.11903",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "Sunrise/Sunset Examples",
        "info": "Project: eRVin https://myervin.com\n\u00c2\u00a9 2022 Rob Picchione All right reserved.\nLicense (New BSD) https://myervin.com/new-bsd-license\n\nExample flow has a number of actions triggerd by sunset or sunrise:\n\n1) turns on \"underslideout lights\" at sunset and off at sunrise. \nNode needs to be enabled and programmed to operate instance 37\n(which on my Entegra is the underslideout lights). 2=on 3=0ff\n\n2) provides a dashboard widget with a graphical indication of the moon phase\n\n3) sends an email at sunset and sunrise\n\nNote: uses the older and limited \"suncalcinput\" contrib:\nhttps://flows.nodered.org/node/node-red-contrib-suncalcinput/in/AnLxtptuH9mw\n\nPlan to change to the more advanced suncron node:\nhttps://flows.nodered.org/node/node-red-contrib-suncron",
        "x": 230,
        "y": 1120,
        "wires": []
    },
    {
        "id": "401e792b.e6cb28",
        "type": "link out",
        "z": "84f0327e.4d899",
        "name": "GPS",
        "links": [
            "c5b4b8df.138d88",
            "285a9715bf37ed15",
            "3bb54f5f7c258c88",
            "8eff0d3cec8e8955"
        ],
        "x": 995,
        "y": 1160,
        "wires": []
    },
    {
        "id": "95e3a2fb.f8f4c",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "GPS Status",
        "rules": [
            {
                "t": "change",
                "p": "payload.mode",
                "pt": "msg",
                "from": "3",
                "fromt": "num",
                "to": "<font color=\"green\">3D Fix",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.mode",
                "pt": "msg",
                "from": "2",
                "fromt": "num",
                "to": "<font color=\"orange\">2D Fix",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.mode",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "<font color=\"red\">No Fix",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.mode",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "<font color=\"black\">No Signal",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 560,
        "wires": [
            [
                "6ebe1f77.189ed"
            ]
        ]
    },
    {
        "id": "6ebe1f77.189ed",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "fc3455d4.45be98",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "GPS Signal:",
        "format": "{{msg.payload.mode}}",
        "layout": "row-spread",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "3eaa4f8c.b0751",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "fc3455d4.45be98",
        "order": 3,
        "width": "0",
        "height": "0",
        "name": "Time",
        "label": "Time:",
        "format": "{{msg.payload.time}}",
        "layout": "row-spread",
        "x": 610,
        "y": 480,
        "wires": []
    },
    {
        "id": "2c136ef8.e21892",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "fc3455d4.45be98",
        "order": 4,
        "width": "0",
        "height": "0",
        "name": "Latitude",
        "label": "Latitude:",
        "format": "{{msg.payload.lat}}",
        "layout": "row-spread",
        "x": 620,
        "y": 660,
        "wires": []
    },
    {
        "id": "b8929554.9ee848",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "fc3455d4.45be98",
        "order": 5,
        "width": "0",
        "height": "0",
        "name": "Longitude",
        "label": "Longitude:",
        "format": "{{msg.payload.lon}}",
        "layout": "row-spread",
        "x": 620,
        "y": 740,
        "wires": []
    },
    {
        "id": "cc5f38b1.f0b3a8",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "fc3455d4.45be98",
        "order": 6,
        "width": "0",
        "height": "0",
        "name": "Altitude",
        "label": "Altitude:",
        "format": "{{msg.payload.alt}}",
        "layout": "row-spread",
        "x": 620,
        "y": 780,
        "wires": []
    },
    {
        "id": "209de8a9.806048",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "fc3455d4.45be98",
        "order": 7,
        "width": "0",
        "height": "0",
        "name": "Speed",
        "label": "Speed:",
        "format": "{{payload}}",
        "layout": "row-spread",
        "x": 610,
        "y": 520,
        "wires": []
    },
    {
        "id": "668ef115.321fd",
        "type": "smooth",
        "z": "84f0327e.4d899",
        "name": "Smooth Lat",
        "property": "payload.lat",
        "action": "mean",
        "count": "10",
        "round": "9",
        "mult": "single",
        "reduce": true,
        "x": 190,
        "y": 660,
        "wires": [
            [
                "2c136ef8.e21892",
                "476fa4b7.b0490c"
            ]
        ]
    },
    {
        "id": "a9f408e1.e5f158",
        "type": "mqtt out",
        "z": "84f0327e.4d899",
        "name": "",
        "topic": "CP/GPSDATA",
        "qos": "",
        "retain": "",
        "broker": "c1170463.5c7f8",
        "x": 400,
        "y": 180,
        "wires": []
    },
    {
        "id": "e2540de8.587fd",
        "type": "worldmap",
        "z": "84f0327e.4d899",
        "name": "",
        "lat": "",
        "lon": "",
        "zoom": "",
        "layer": "OSMC",
        "cluster": "",
        "maxage": "",
        "usermenu": "show",
        "layers": "show",
        "panit": "false",
        "panlock": "false",
        "zoomlock": "false",
        "hiderightclick": "false",
        "coords": "none",
        "showgrid": "false",
        "path": "/worldmap",
        "overlist": "DR,CO,RA,DN,HM",
        "maplist": "OSMG,OSMC,EsriC,EsriS,EsriT,EsriO,EsriDG,NatGeo,UKOS,OpTop",
        "mapname": "",
        "mapurl": "",
        "mapopt": "",
        "mapwms": false,
        "x": 1140,
        "y": 960,
        "wires": []
    },
    {
        "id": "618c8254.f7b8dc",
        "type": "worldmap in",
        "z": "84f0327e.4d899",
        "name": "",
        "path": "/worldmap",
        "events": "all",
        "x": 1140,
        "y": 900,
        "wires": [
            [
                "a4c2bb96.24c3d8",
                "ea6b2a10.916738"
            ]
        ]
    },
    {
        "id": "2efb075b.189718",
        "type": "worldmap-tracks",
        "z": "84f0327e.4d899",
        "name": "",
        "depth": 20,
        "layer": "combined",
        "x": 850,
        "y": 1020,
        "wires": [
            [
                "e2540de8.587fd",
                "259f35a3.b1545a"
            ]
        ]
    },
    {
        "id": "476fa4b7.b0490c",
        "type": "function",
        "z": "84f0327e.4d899",
        "name": "Format JSON",
        "func": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n// \n// Using the output of the 'node-red-contrib-gpsd' node.\n//\n// Checks to see if there is a fix (mode >=2) and if so\n// sets 'lat' and 'lon' values in global context. \n// mode = 2 is a 2D fix, mode = 3 is a 3D fix\n// \n// Aditionally formats and outputs lat, lon, name, speed and icon\n// values formatted for the worldmap node.\n\nlet mode = msg.payload.mode;\n\nif (mode >= 2 ) {\n    global.set('lat', msg.payload.lat); \n    global.set('lon', msg.payload.lon);\n    global.set('locsource', 'GPS');\n}\n\n// global.set('lat',msg.payload.lat);\n// global.set('lon',msg.payload.lon);\n\nreturn {\n    payload: {\n        location: global.get('locsource'),\n        lat: msg.payload.lat,\n        lon: msg.payload.lon,\n        name: \"eRVin\",\n        speed: msg.payload.speed,\n        icon: 'fa-bus'\n    }\n};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 900,
        "wires": [
            [
                "2efb075b.189718",
                "e2540de8.587fd",
                "259f35a3.b1545a"
            ]
        ]
    },
    {
        "id": "61c02ef5.4c7d4",
        "type": "smooth",
        "z": "84f0327e.4d899",
        "name": "Smooth Lon",
        "property": "payload.lon",
        "action": "mean",
        "count": "10",
        "round": "9",
        "mult": "single",
        "reduce": true,
        "x": 190,
        "y": 740,
        "wires": [
            [
                "b8929554.9ee848"
            ]
        ]
    },
    {
        "id": "953418c5.5e4b28",
        "type": "smooth",
        "z": "84f0327e.4d899",
        "name": "Smooth Alt",
        "property": "payload.alt",
        "action": "mean",
        "count": "15",
        "round": "2",
        "mult": "single",
        "reduce": true,
        "x": 190,
        "y": 780,
        "wires": [
            [
                "cc5f38b1.f0b3a8"
            ]
        ]
    },
    {
        "id": "259f35a3.b1545a",
        "type": "ui_worldmap",
        "z": "84f0327e.4d899",
        "group": "b7dc85ae.2ad0a8",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "lat": "",
        "lon": "",
        "zoom": "",
        "layer": "OSM",
        "cluster": "",
        "maxage": "",
        "usermenu": "show",
        "layers": "show",
        "panit": "true",
        "panlock": "false",
        "zoomlock": "false",
        "hiderightclick": "true",
        "coords": "none",
        "showgrid": "false",
        "path": "/worldmap",
        "x": 1140,
        "y": 1020,
        "wires": []
    },
    {
        "id": "f4c9ccbe.3c18a",
        "type": "rbe",
        "z": "84f0327e.4d899",
        "name": "Deadband Speed",
        "func": "deadband",
        "gap": "1",
        "start": "",
        "inout": "in",
        "property": "payload.speed",
        "x": 210,
        "y": 520,
        "wires": [
            [
                "c6c2b096.d89e5"
            ]
        ]
    },
    {
        "id": "c6c2b096.d89e5",
        "type": "function",
        "z": "84f0327e.4d899",
        "name": "Noise",
        "func": "let speed = msg.payload.speed;\n\nif (speed <=2) {\n    speed = 0;\n}\n\nreturn {payload: speed };\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 520,
        "wires": [
            [
                "209de8a9.806048"
            ]
        ]
    },
    {
        "id": "bd3be246.2ee1f",
        "type": "function",
        "z": "84f0327e.4d899",
        "d": true,
        "name": "Moving?",
        "func": "// checks to see if speed is high enough to indicate a moving vehicle\n// if so passes gps data on, if not supresses gps data\n\nlet speed = msg.payload.speed;\n\nif (speed >= 3) {\n     \n     var msg1 = {\n        'payload' : msg.payload,\n    };\n\n  return [ msg1 ];\n} ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 220,
        "wires": [
            [
                "3a0fc3c7.305cec",
                "4769a2fc.eda06c"
            ]
        ]
    },
    {
        "id": "bbd128c0.0f84d8",
        "type": "ui_template",
        "z": "84f0327e.4d899",
        "group": "9ee7e038.56def",
        "name": "",
        "order": 1,
        "width": "6",
        "height": "2",
        "format": "<div>\n<p>\n    If not using a GPS receiver enter a 5 digit Zip Code below which will provide approximate lat/lon to ensure accurate sunrise/sunset info.\n</p>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 1180,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "9d40e137.b7104",
        "type": "file in",
        "z": "84f0327e.4d899",
        "name": "zip2latlon.txt",
        "filename": "/coachproxy/home/pi/.node-red/location/zip2latlon.txt",
        "filenameType": "str",
        "format": "lines",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 1610,
        "y": 520,
        "wires": [
            [
                "6850bc9e.1a7c34"
            ]
        ]
    },
    {
        "id": "6850bc9e.1a7c34",
        "type": "csv",
        "z": "84f0327e.4d899",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": false,
        "x": 1770,
        "y": 520,
        "wires": [
            [
                "52555894.4ea9c8"
            ]
        ]
    },
    {
        "id": "cca4f073.9d09a",
        "type": "ui_form",
        "z": "84f0327e.4d899",
        "name": "Enter Zip",
        "label": "",
        "group": "9ee7e038.56def",
        "order": 2,
        "width": "0",
        "height": "0",
        "options": [
            {
                "label": "Zip Code",
                "value": "enteredzip",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "enteredzip": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "",
        "x": 1180,
        "y": 480,
        "wires": [
            [
                "20cf9cbf.605ea4"
            ]
        ]
    },
    {
        "id": "9109986c.6a03f8",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "Format man lat/lon",
        "rules": [
            {
                "t": "set",
                "p": "payload.lat",
                "pt": "msg",
                "to": "$number(payload.lat)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.lon",
                "pt": "msg",
                "to": "$number(payload.lon)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "eRVin",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "fa-bus",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "lat",
                "pt": "global",
                "to": "payload.lat",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "lon",
                "pt": "global",
                "to": "payload.lon",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.location",
                "pt": "msg",
                "to": "locsource",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "manloc",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 660,
        "wires": [
            [
                "e2540de8.587fd",
                "259f35a3.b1545a",
                "2c136ef8.e21892",
                "b8929554.9ee848"
            ]
        ]
    },
    {
        "id": "239a5efd.4a95c2",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enteredzip",
                "pt": "global",
                "to": "payload.enteredzip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.enteredzip",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "enteredzipvalid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "locsource",
                "pt": "global",
                "to": "zipcode",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1740,
        "y": 460,
        "wires": [
            [
                "9d40e137.b7104",
                "c58b2c5b.eea6c"
            ]
        ]
    },
    {
        "id": "c96bf7c.fdaa908",
        "type": "function",
        "z": "84f0327e.4d899",
        "name": "PrePop",
        "func": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n// \n// prepopulates previously entered zipcode\n\n\n// initialize with location source based on zipcode, if gps is connected\n// this will be reset to 'gps' by the gps flow when it comes online.\nglobal.set('locsource','zipcode')\n\n// define existing zipcode saveed in global context.\nvar zip = global.get('enteredzip');\n\n// on msg1 output the format required by the form node to \n// prepopulate the entry field.\n// output format for form node: {\"enteredzip\":\"32043\"}\n\nvar msg1 = {payload : {'enteredzip': zip}}\n\n// on msg2 output the enteredzip value as a numeric.\nvar msg2 = {payload : zip}\n\nreturn [ msg1, msg2 ];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 520,
        "wires": [
            [
                "cca4f073.9d09a"
            ],
            []
        ]
    },
    {
        "id": "235f5819.83fcd8",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "lat",
                "pt": "msg",
                "to": "lat",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "lon",
                "pt": "msg",
                "to": "lon",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1220,
        "wires": [
            [
                "26400bbb.894a74"
            ]
        ]
    },
    {
        "id": "a1c6f71c.7c4828",
        "type": "inject",
        "z": "84f0327e.4d899",
        "name": "",
        "props": [
            {
                "p": "time",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payloadType": "str",
        "x": 190,
        "y": 1220,
        "wires": [
            [
                "235f5819.83fcd8"
            ]
        ]
    },
    {
        "id": "3c8106.4aa23efa",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "Write GPS data to a file",
        "info": "Project: eRVin https://myervin.com\n\u00c2\u00a9 2022 Rob Picchione All right reserved.\nLicense (New BSD) https://myervin.com/new-bsd-license\n\nEnable then \"Moving?\" function node. \nTo minimize file size, this node simply blocks any data from being written unless \nthe vehcle is moving faster than 3 mph.\n\n\"gpsd-json-file\" writes raw json data to a file at the path /coachproxy/gps/gpsd.json\ntypical output:\n{\"class\":\"TPV\",\"device\":\"/dev/ttyACM0\",\"status\":2,\"mode\":3,\"time\":\"2023-03-04T18:06:42.000Z\",\"ept\":0.005,\"lat\":30.446416025,\"lon\":-99.799902653,\"alt\":518.929,\"epx\":2.269,\"epy\":2.266,\"epv\":9.143,\"track\":72.6552,\"speed\":0.033,\"climb\":0.082,\"eps\":0.56,\"epc\":18.29}\nWhen prettified, looks like this:\n{\n\t\"class\": \"TPV\",\n\t\"device\": \"/dev/ttyACM0\",\n\t\"status\": 2,\n\t\"mode\": 3,\n\t\"time\": \"2023-03-04T18:06:42.000Z\",\n\t\"ept\": 0.005,\n\t\"lat\": 30.446416025,\n\t\"lon\": -99.799902653,\n\t\"alt\": 518.929,\n\t\"epx\": 2.269,\n\t\"epy\": 2.266,\n\t\"epv\": 9.143,\n\t\"track\": 72.6552,\n\t\"speed\": 0.033,\n\t\"climb\": 0.082,\n\t\"eps\": 0.56,\n\t\"epc\": 18.29\n}\n\n\"gpsd_csv\" converts json to csv format and then \"gps-csv-file\" writes \nit to a file in csv format at the path /coachproxy/gps/gpsd.csv\nTypical output:\nTPV,,/dev/ttyACM0,3,2023-03-04T18:12:03.000Z,0.005,30.44643295,-99.799858045,523.729,2.281,2.28,9.43,328.7891,0.006,0.051,0.16,18.86\n",
        "x": 880,
        "y": 160,
        "wires": []
    },
    {
        "id": "326e6727.f61518",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "Enter Zip Code if no GPS",
        "info": "Project: eRVin https://myervin.com\n\u00c2\u00a9 2022 Rob Picchione All right reserved.\nLicense (New BSD) https://myervin.com/new-bsd-license\n\nAn experimental flow that needs refinement.\n\nIf there is no GPS or there is no valid GPS signal the zip code can \nbe entereed manually to approximate location. This will allow the \nsunset and other location based routines to be accurate.\n\nAt startup (for eRVin flows only) if there is a value for the zip code saved in global \ncontext (enteredzip) it is used to populate the zip code field \nin the form entry.\n\nThe zip code is compared to a csv file containing zip, lat and lon for the entire USA. \nIf there is a hit, the zip code is entered in the global context and the gate is \nclosed. If there is no hit the gate never closes and the end of file is reached with \nnon-existant zip of 99999 which triggers an error pop up.",
        "x": 890,
        "y": 420,
        "wires": []
    },
    {
        "id": "92b1f48e.9f48c8",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "Worldmap",
        "info": "requires worldmap contrib be installed:\nhttps://flows.nodered.org/node/node-red-contrib-web-worldmap\n\nThe blue worldmap node displays the map in the node-red dashboard.\n\nThe red worldmap node displays the map in the local device \n(windows, MacOS, etc). To jump to the default Map, you can use \nhttp://<ip_address>:1880/worldmap/ or ctrl-shift-m. ",
        "x": 1140,
        "y": 840,
        "wires": []
    },
    {
        "id": "ed7f1f5f.1c157",
        "type": "inject",
        "z": "84f0327e.4d899",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 870,
        "y": 460,
        "wires": [
            [
                "c96bf7c.fdaa908"
            ]
        ]
    },
    {
        "id": "15d2cf79.bf2951",
        "type": "inject",
        "z": "84f0327e.4d899",
        "name": "Simulate Sunset",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 560,
        "y": 1120,
        "wires": [
            [
                "e475a59d.caa8c8"
            ]
        ]
    },
    {
        "id": "e49bff45.ad2b2",
        "type": "inject",
        "z": "84f0327e.4d899",
        "name": "Simulate Sunrise",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 560,
        "y": 1160,
        "wires": [
            [
                "e475a59d.caa8c8"
            ]
        ]
    },
    {
        "id": "8c8302fc.0811b",
        "type": "debug",
        "z": "84f0327e.4d899",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1120,
        "wires": []
    },
    {
        "id": "40592451.43825c",
        "type": "string",
        "z": "84f0327e.4d899",
        "name": "",
        "methods": [
            {
                "name": "padLeft",
                "params": [
                    {
                        "type": "num",
                        "value": "5"
                    },
                    {
                        "type": "str",
                        "value": "0"
                    }
                ]
            }
        ],
        "prop": "payload.enteredzip",
        "propout": "payload.enteredzip",
        "object": "msg",
        "objectout": "msg",
        "x": 1570,
        "y": 460,
        "wires": [
            [
                "239a5efd.4a95c2"
            ]
        ]
    },
    {
        "id": "eba7b64f.104578",
        "type": "switch",
        "z": "84f0327e.4d899",
        "name": "Limit Range",
        "property": "$number(payload.enteredzip)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "btwn",
                "v": "00601",
                "vt": "num",
                "v2": "99929",
                "v2t": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1370,
        "y": 520,
        "wires": [
            [
                "40592451.43825c"
            ],
            [
                "ba041831.2d1658"
            ]
        ]
    },
    {
        "id": "f0229cb7.c8943",
        "type": "ui_toast",
        "z": "84f0327e.4d899",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Invalid ZipCode",
        "name": "Invalid ZipCode",
        "x": 2100,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "52555894.4ea9c8",
        "type": "function",
        "z": "84f0327e.4d899",
        "name": "",
        "func": "// copyright 2021 Rob Picchione myervin.com\n// This function checks for a valid zipcode. As the \n// /coachproxy/home/pi/.node-red/location/zip2latlon.txt is scanned line by\n// line lookoig for a match to enteredzip. When a match is found, the zip plus\n// lat lon info is output on msg1 and the pop up message is cancelled by the\n// null output on msg3. If no match is found the enteredzip plus an error\n// message is output on msg2 and again the pop up is cancelled via msg3.\n\n\nvar msg3 = {'payload':\"\"};\n\nif (msg.payload.zip == global.get('enteredzip')) {\n    global.set('enteredzipvalid', true);\n    var msg1 = {'payload':msg.payload};\n    return [msg1,[],msg3];\n}\n\n\nif (msg.parts.count == 33144 && global.get('enteredzipvalid') == false) {\n     var msg2 = { 'payload' : global.get('enteredzip') + ' Does Not Exist'};\n    return [[],msg2, msg3];\n}\n\nreturn null\n",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1920,
        "y": 520,
        "wires": [
            [
                "9109986c.6a03f8"
            ],
            [
                "f0229cb7.c8943"
            ],
            [
                "c58b2c5b.eea6c"
            ]
        ]
    },
    {
        "id": "ba041831.2d1658",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Bad Format",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 420,
        "wires": [
            [
                "f0229cb7.c8943"
            ]
        ]
    },
    {
        "id": "c58b2c5b.eea6c",
        "type": "ui_toast",
        "z": "84f0327e.4d899",
        "position": "top right",
        "displayTime": "20",
        "highlight": "",
        "sendall": false,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Searching for Lat/Lon",
        "name": "Searching",
        "x": 2120,
        "y": 460,
        "wires": []
    },
    {
        "id": "20cf9cbf.605ea4",
        "type": "string",
        "z": "84f0327e.4d899",
        "name": "",
        "methods": [
            {
                "name": "left",
                "params": [
                    {
                        "type": "num",
                        "value": "5"
                    }
                ]
            }
        ],
        "prop": "payload.enteredzip",
        "propout": "payload.enteredzip",
        "object": "msg",
        "objectout": "msg",
        "x": 1190,
        "y": 540,
        "wires": [
            [
                "eba7b64f.104578"
            ]
        ]
    },
    {
        "id": "b0a2ddd.92d4f2",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "Refresh Map and Location Icon",
        "info": "Refresehes the map and icon when the Location tab is accessed. \nOnly active when a GPS is not connected and a valid zip code \nhas been provided.",
        "x": 1450,
        "y": 840,
        "wires": []
    },
    {
        "id": "aeeab90a.af5058",
        "type": "inject",
        "z": "84f0327e.4d899",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 330,
        "y": 400,
        "wires": [
            [
                "9d55a071.cd775"
            ]
        ]
    },
    {
        "id": "9d55a071.cd775",
        "type": "trigger",
        "z": "84f0327e.4d899",
        "name": "Clear GPS Data",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "str",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "payload.time",
        "outputs": 1,
        "x": 340,
        "y": 460,
        "wires": [
            [
                "3eaa4f8c.b0751",
                "209de8a9.806048",
                "6ebe1f77.189ed",
                "cc5f38b1.f0b3a8"
            ]
        ],
        "info": "Clears the GPS data displayed in the dashboard if the GPS is not active."
    },
    {
        "id": "f373ef81.a66a1",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.zip",
                "pt": "msg",
                "to": "enteredzip",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload.location",
                "pt": "msg",
                "to": "locsource",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "eRVin",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.lat",
                "pt": "msg",
                "to": "lat",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload.lon",
                "pt": "msg",
                "to": "lon",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload.icon",
                "pt": "msg",
                "to": "fa-bus",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "manloc",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 920,
        "wires": [
            [
                "c96bf7c.fdaa908",
                "e2540de8.587fd",
                "259f35a3.b1545a",
                "7d2a86a7.0d1c88"
            ]
        ]
    },
    {
        "id": "a4c2bb96.24c3d8",
        "type": "switch",
        "z": "84f0327e.4d899",
        "name": "",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "connected",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "layer",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1370,
        "y": 900,
        "wires": [
            [
                "f373ef81.a66a1"
            ],
            [
                "f373ef81.a66a1"
            ],
            []
        ]
    },
    {
        "id": "ea6b2a10.916738",
        "type": "debug",
        "z": "84f0327e.4d899",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1310,
        "y": 1020,
        "wires": []
    },
    {
        "id": "7d2a86a7.0d1c88",
        "type": "debug",
        "z": "84f0327e.4d899",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1590,
        "y": 1020,
        "wires": []
    },
    {
        "id": "238a32bb.fc048e",
        "type": "smooth",
        "z": "84f0327e.4d899",
        "name": "Smooth Track",
        "property": "payload.track",
        "action": "mean",
        "count": "5",
        "round": "1",
        "mult": "single",
        "reduce": true,
        "x": 200,
        "y": 820,
        "wires": [
            [
                "a9c537c7.d96018",
                "c07dc05c.f4c1f",
                "148574dd.95d4ab",
                "7c273514.5ad06c",
                "204166c2.37421a",
                "db01536b.99015",
                "be605291.1fda2",
                "94bfad75.b2923",
                "16f55d76.97f383"
            ]
        ]
    },
    {
        "id": "bc4ce6fa.d31f78",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "fc3455d4.45be98",
        "order": 6,
        "width": "0",
        "height": "0",
        "name": "Track/Heading",
        "label": "Heading:",
        "format": "{{msg.payload.track}}",
        "layout": "row-spread",
        "x": 640,
        "y": 820,
        "wires": []
    },
    {
        "id": "a9c537c7.d96018",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "337.6",
        "maxin": "360",
        "minout": "0",
        "maxout": "0",
        "action": "scale",
        "round": true,
        "property": "payload,track",
        "name": "N0",
        "x": 370,
        "y": 820,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "c07dc05c.f4c1f",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "0",
        "maxin": "180",
        "minout": "0",
        "maxout": "0",
        "action": "scale",
        "round": true,
        "property": "payload.track",
        "name": "N360",
        "x": 370,
        "y": 840,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "148574dd.95d4ab",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "22.6",
        "maxin": "67.5",
        "minout": "45",
        "maxout": "45",
        "action": "scale",
        "round": false,
        "property": "payload.track",
        "name": "NE45",
        "x": 370,
        "y": 860,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "7c273514.5ad06c",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "67.6",
        "maxin": "112.5",
        "minout": "90",
        "maxout": "90",
        "action": "scale",
        "round": true,
        "property": "payload.track",
        "name": "E90",
        "x": 370,
        "y": 880,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "204166c2.37421a",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "112.6",
        "maxin": "157.5",
        "minout": "135",
        "maxout": "135",
        "action": "scale",
        "round": true,
        "property": "payload.track",
        "name": "SE135",
        "x": 370,
        "y": 900,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "db01536b.99015",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "157.6",
        "maxin": "202.5",
        "minout": "180",
        "maxout": "180",
        "action": "scale",
        "round": true,
        "property": "payload.track",
        "name": "S180",
        "x": 370,
        "y": 920,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "be605291.1fda2",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "202.6",
        "maxin": "247.5",
        "minout": "225",
        "maxout": "225",
        "action": "scale",
        "round": true,
        "property": "payload.track",
        "name": "SW225",
        "x": 380,
        "y": 940,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "94bfad75.b2923",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "247.6",
        "maxin": "292.5",
        "minout": "270",
        "maxout": "270",
        "action": "scale",
        "round": true,
        "property": "payload.track",
        "name": "W270",
        "x": 370,
        "y": 960,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "16f55d76.97f383",
        "type": "range",
        "z": "84f0327e.4d899",
        "minin": "292.6",
        "maxin": "337.5",
        "minout": "315",
        "maxout": "315",
        "action": "scale",
        "round": true,
        "property": "payload.track",
        "name": "NW315",
        "x": 380,
        "y": 980,
        "wires": [
            [
                "80672e7a.74eae"
            ]
        ]
    },
    {
        "id": "80672e7a.74eae",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "Deg to Cardinal",
        "rules": [
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "N",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "45",
                "fromt": "num",
                "to": "NE",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "90",
                "fromt": "num",
                "to": "E",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "135",
                "fromt": "num",
                "to": "SE",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "180",
                "fromt": "num",
                "to": "S",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "225",
                "fromt": "num",
                "to": "SW",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "270",
                "fromt": "num",
                "to": "W",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.track",
                "pt": "msg",
                "from": "315",
                "fromt": "num",
                "to": "NW",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "track",
                "pt": "global",
                "to": "payload.track",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 980,
        "wires": [
            [
                "bc4ce6fa.d31f78"
            ]
        ]
    },
    {
        "id": "5d433d9eea0a3cba",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "An alternate example of displaying GPS info",
        "info": "Enable the node to make it active.\n\nThe pertinent code is in the Value Format field:\nTime: {{msg.payload.time}} <br> Lat:      {{msg.payload.lat}} <br> Lon: {{msg.payload.lon}} <br> Altitude: {{msg.payload.alt}}<br> Speed: {{msg.payload.speed}} <br>",
        "x": 950,
        "y": 320,
        "wires": []
    },
    {
        "id": "383607f17dd85e07",
        "type": "debug",
        "z": "84f0327e.4d899",
        "name": "debug 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 240,
        "wires": []
    },
    {
        "id": "4a15139962b16008",
        "type": "ui_text",
        "z": "84f0327e.4d899",
        "group": "3074b4f3eec4795f",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "Location",
        "label": "",
        "format": "Tab Name: {{msg.payload.tabname}} <br> Source: {{msg.payload.source}} <br> Tab Version: {{msg.payload.tabver}}",
        "layout": "row-left",
        "className": "",
        "x": 420,
        "y": 80,
        "wires": []
    },
    {
        "id": "52fbe4b73ee6cbfc",
        "type": "inject",
        "z": "84f0327e.4d899",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Location",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.63",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 80,
        "wires": [
            [
                "4a15139962b16008",
                "92470a550367249b"
            ]
        ]
    },
    {
        "id": "7b04e75a7d153472",
        "type": "comment",
        "z": "84f0327e.4d899",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for updates to the tab.",
        "x": 190,
        "y": 40,
        "wires": []
    },
    {
        "id": "92470a550367249b",
        "type": "change",
        "z": "84f0327e.4d899",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "a85b5c669d5659f4",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 230,
        "y": 860,
        "wires": []
    },
    {
        "id": "3dd116aa71e0c16d",
        "type": "socketcan-out",
        "z": "ceeb844e7eb3d728",
        "name": "socketcan-out",
        "config": "b2855d5b.1215c8",
        "x": 190,
        "y": 780,
        "wires": [
            [
                "a85b5c669d5659f4",
                "1cd10451731ee0bd",
                "4957158610e5cbdc",
                "d3e4b7fdfb40a362",
                "c17306a46c409a73",
                "bb6f195fb98f78f9"
            ]
        ]
    },
    {
        "id": "450a5b2017e84050",
        "type": "socketcan-in",
        "z": "ceeb844e7eb3d728",
        "name": "socketcan-in",
        "config": "b2855d5b.1215c8",
        "x": 430,
        "y": 260,
        "wires": []
    },
    {
        "id": "7fc4a751c4794ece",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send object - std",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"ext\":false,\"canid\":123,\"dlc\":5,\"data\":[1,2,3,4,5]}",
        "payloadType": "json",
        "x": 220,
        "y": 260,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "a4477a10f1397455",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send string - std",
        "props": [
            {
                "p": "payload",
                "v": "123#00112233",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "123#00112233",
        "payloadType": "str",
        "x": 220,
        "y": 340,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "2c4b1ff086371966",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send string - ext",
        "props": [
            {
                "p": "payload",
                "v": "1F334455#1122334455667788",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1F334455#1122334455667788",
        "payloadType": "str",
        "x": 220,
        "y": 380,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "06d90dd4698db3ac",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send object - ext",
        "props": [
            {
                "p": "payload",
                "v": "{\"ext\":true,\"canid\":32278,\"dlc\":5,\"data\":[1,2,3,4,5]}",
                "vt": "json"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"ext\":true,\"canid\":32278,\"dlc\":5,\"data\":[1,2,3,4,5]}",
        "payloadType": "json",
        "x": 220,
        "y": 300,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "b5318a63ec1cbc96",
        "type": "comment",
        "z": "ceeb844e7eb3d728",
        "name": "Send CAN frames in using different payloads on CAN0",
        "info": "\u00c2\u00a92022 Rob Picchione myervin.com\n\ncanid explanation\nThe DGN is prefixed and suffixed by additional bits to create the actual canid, then the entire number is convereted to hex or decimal.\n\nexample DGN: 1FEDB DC_DIMMER_COMMAND_2\n\nactual canid:\n\n19FEDB99  hex\n436132761 decimal\n110 0 1 1111 1110 1101 1011 1001 1001 binary\n\nPRIORITY + RESERVED   +   DGN-HIGH   +   DGN-LOW   +   SOURCE ADDR\n  3bits      1bit          9bits          8bits           8bits\n  110         0         1 1111 1110     1101 1011       1001 1001\n                        1   F   E         D   B           9   9\n\n\n9---------------------------------------\n                                       |\n9---------------------------------     |\n                                 |     |\nB---------------------------     |     |\n                           |     |     |\nD---------------------     |     |     |\n                     |     |     |     |\nE---------------     |     |     |     |\n               |     |     |     |     |\nF---------     |     |     |     |     |\n         |     |     |     |     |     |\n9----    |     |     |     |     |     |\n    |    |     |     |     |     |     |\n1   |    |     |     |     |     |     |\n|   |    |     |     |     |     |     |\n|   |    |     |     |     |     |     |\n_ ____  ____  ____  ____  ____  ____  ____\n1 1001  1111  1110  1101  1011  1001  1001\n\n",
        "x": 320,
        "y": 220,
        "wires": []
    },
    {
        "id": "c2c4951241750383",
        "type": "comment",
        "z": "ceeb844e7eb3d728",
        "name": "Receive CAN data from interface CAN0",
        "info": "\u00c2\u00a92022 Rob Picchione myervin.com\n\nThe lower 5 examples show various ways to send DC_DIMMER_COMMAND_2 to instance 13 on and off\n\ncanid explanation\nThe DGN is prefixed and suffixed by additional bits to create the actual canid, then the entire number is convereted to hex or decimal.\n\nexample DGN: 1FEDB DC_DIMMER_COMMAND_2\n\nactual canid:\n\n19FEDB99  hex\n436132761 decimal\n110 0 1 1111 1110 1101 1011 1001 1001 binary\n\nPRIORITY + RESERVED   +   DGN-HIGH   +   DGN-LOW   +   SOURCE ADDR\n  3bits      1bit          9bits          8bits           8bits\n  110         0         1 1111 1110     1101 1011       1001 1001\n                        1   F   E         D   B           9   9\n\n\n9---------------------------------------\n                                       |\n9---------------------------------     |\n                                 |     |\nB---------------------------     |     |\n                           |     |     |\nD---------------------     |     |     |\n                     |     |     |     |\nE---------------     |     |     |     |\n               |     |     |     |     |\nF---------     |     |     |     |     |\n         |     |     |     |     |     |\n9----    |     |     |     |     |     |\n    |    |     |     |     |     |     |\n1   |    |     |     |     |     |     |\n|   |    |     |     |     |     |     |\n|   |    |     |     |     |     |     |\n_ ____  ____  ____  ____  ____  ____  ____\n1 1001  1111  1110  1101  1011  1001  1001\n\n",
        "x": 270,
        "y": 740,
        "wires": []
    },
    {
        "id": "9f61f420c07ee349",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send obj 13 on - ext",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"ext\":true,\"canid\":436132761,\"dlc\":8,\"data\":[13,255,200,2,255,0,255,255]}",
        "payloadType": "json",
        "x": 230,
        "y": 420,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "ed3a2a0585872195",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send obj 13 off - ext",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"ext\":true,\"canid\":436132761,\"dlc\":8,\"data\":[13,255,200,3,255,0,255,255]}",
        "payloadType": "json",
        "x": 230,
        "y": 460,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "f939db92abce7ed9",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send obj hex 13 on - ext",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"ext\":true,\"canid\":436132761,\"dlc\":8,\"data\":[\"0xd\",\"0xff\",\"0xc8\",\"0x2\",\"0xff\",\"0x0\",\"0xff\",\"0xff\"]}",
        "payloadType": "json",
        "x": 250,
        "y": 500,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "a83c0aa40edf425f",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send string 13 on - ext",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "19FEDB99#0DFFC802FF00FFFF",
        "payloadType": "str",
        "x": 240,
        "y": 540,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "61c542e427acf2fa",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Send string 13 off - ext",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "19FEDB99#0DFFC803FF00FFFF",
        "payloadType": "str",
        "x": 240,
        "y": 580,
        "wires": [
            [
                "450a5b2017e84050"
            ]
        ]
    },
    {
        "id": "0ef9603143c65823",
        "type": "comment",
        "z": "ceeb844e7eb3d728",
        "name": "Read Me SocketCan-In",
        "info": "Project: eRVin https://myervin.com\n\u00c2\u00a9 2022 Rob Picchione All right reserved.\nLicense(New BSD) https://myervin.com/new-bsd-license\n\nThe lower 5 examples show various ways to send DC_DIMMER_COMMAND_2 On or Off to \ninstance 13.\n\nCANid explanation:\nThe PGN is prefixed and suffixed by additional bits to create the actual CANid, \nthen the entire number is convereted to hex or decimal.\n\nexample DGN: 1FEDB DC_DIMMER_COMMAND_2\n\nactual canid:\n\n19FEDB99  hex\n436132761 decimal\n110 0 1 1111 1110 1101 1011 1001 1001 binary\n\nPRIORITY + RESERVED   +   DGN-HIGH   +   DGN-LOW   +   SOURCE ADDR\n  3bits      1bit          9bits          8bits           8bits\n  110         0         1 1111 1110     1101 1011       1001 1001\n                        1   F   E         D   B           9   9\n\n\n9---------------------------------------\n                                       |\n9---------------------------------     |\n                                 |     |\nB---------------------------     |     |\n                           |     |     |\nD---------------------     |     |     |\n                     |     |     |     |\nE---------------     |     |     |     |\n               |     |     |     |     |\nF---------     |     |     |     |     |\n         |     |     |     |     |     |\n9----    |     |     |     |     |     |\n    |    |     |     |     |     |     |\n1   |    |     |     |     |     |     |\n|   |    |     |     |     |     |     |\n|   |    |     |     |     |     |     |\n_ ____  ____  ____  ____  ____  ____  ____\n1 1001  1111  1110  1101  1011  1001  1001\n\n",
        "x": 480,
        "y": 420,
        "wires": []
    },
    {
        "id": "9e23a4fef864b868",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0A",
        "payloadType": "str",
        "x": 530,
        "y": 1240,
        "wires": [
            [
                "5d2cd5e5d0889b7b"
            ]
        ]
    },
    {
        "id": "5d2cd5e5d0889b7b",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Hex2Dec",
        "func": "var hexstring = msg.payload;\ndecimal = parseInt(hexstring, 16);\nmsg.payload = decimal;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 1240,
        "wires": [
            [
                "a92ae347a6904d98"
            ]
        ]
    },
    {
        "id": "a92ae347a6904d98",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1240,
        "wires": []
    },
    {
        "id": "8d54a7ca2fac176b",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "72",
        "payloadType": "str",
        "x": 530,
        "y": 1200,
        "wires": [
            [
                "e82244879d34d388"
            ]
        ]
    },
    {
        "id": "e82244879d34d388",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Dec2Hex. Uppercase",
        "func": "var decimal = msg.payload;\ndecimal = parseInt(decimal);\nvar hexString = decimal.toString(16).padStart(2,'0').toUpperCase();\nmsg.payload = hexString;\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1200,
        "wires": [
            [
                "21caa5af8f9a440b"
            ]
        ]
    },
    {
        "id": "21caa5af8f9a440b",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1200,
        "wires": []
    },
    {
        "id": "1cd10451731ee0bd",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Filter by CanID w/Any Source Addr",
        "func": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n//\n//Credit to PiMo131 for the dec2hex conversion flow https://flows.nodered.org/flow/8fe266c1d038369fb60a6c03995f50a3\n//\n//This function filters by the entered CANid not including the Source Address so will\n//pass the desired PGN for ANY device sending it.\n//\n//Use the CSS conversion tool to convert a CANid to PGN & PGN to CANid\n//https://www.csselectronics.com/pages/j1939-pgn-conversion-tool\n//\n//****Enter below the desired canid less Source Addr (rightmost two digits) in hex as a string:\nvar showcanid = \"18E8FF\"; //such as \"19FFFD\" which is PGN 1FFFD (DC_SOURCE_STATUS_1)\n//\nvar decimal = msg.payload.canid;\ndecimal = parseInt(decimal);\nvar hexString = decimal.toString(16).padStart(2,'0').toUpperCase();\nvar canid = hexString.slice(0, 6); //remove source addr from canid\nif (canid == showcanid) {\n    msg.payload.canidhex = hexString;\n    return msg\n} else {}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 820,
        "wires": [
            [
                "751a938291dd8383"
            ]
        ]
    },
    {
        "id": "751a938291dd8383",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 820,
        "wires": []
    },
    {
        "id": "4957158610e5cbdc",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Filter by CanID w/Specific Source Addr",
        "func": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n//\n//Credit to PiMo131 for the dec2hex conversion flow https://flows.nodered.org/flow/8fe266c1d038369fb60a6c03995f50a3\n//\n//This function filters by the entered CANid including a specific Source Address so will\n//pass the desired PGN only for the SPECIFIC device (source addr) sending it.\n//\n//Use the CSS conversion tool to convert a CANid to PGN & PGN to CANid\n//https://www.csselectronics.com/pages/j1939-pgn-conversion-tool\n//\n//****Enter below the desired canid including Source Addr (total 8 hex digits) in hex as a string:\nvar showcanid = \"19FFFD42\"; //example \"19FFFD42\" is PGN 1FFFD (DC_SOURCE_STATUS_1) at Source Address 42 (Magnum ME-RVC)\n//\nvar decimal = msg.payload.canid;\ndecimal = parseInt(decimal);\nvar hexString = decimal.toString(16).padStart(2,'0').toUpperCase();\nif (hexString == showcanid) {\n    msg.payload.canidhex = hexString;\n    return msg\n} else {}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 860,
        "wires": [
            [
                "3b1da0cdec7b981a"
            ]
        ]
    },
    {
        "id": "d3e4b7fdfb40a362",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Get Source Addr for all CanID's",
        "func": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n//\n//Credit to PiMo131 for the dec2hex conversion flow https://flows.nodered.org/flow/8fe266c1d038369fb60a6c03995f50a3\n//\n//This function takes all canid's (in decimal numeric) from the socketcan-out node, converts it to a hex string, then extracts the\n//source address (rightmost two digits of the hex canid) and adds it back to the original \n//message payload as msg.payload.srcaddrhex. The full canid in hex is also added as msg.payload.canidhex\n//\n//Use the CSS conversion tool to convert a CANid to PGN & PGN to CANid\n//https://www.csselectronics.com/pages/j1939-pgn-conversion-tool\n//\nvar decimal = msg.payload.canid;\ndecimal = parseInt(decimal);\nvar hexString = decimal.toString(16).padStart(2,'0').toUpperCase();\nvar srcaddr = hexString.slice(-2);\nmsg.payload.canidhex = hexString\nmsg.payload.srcaddrhex = srcaddr;\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 900,
        "wires": [
            [
                "e6fadbb86d704fbe"
            ]
        ]
    },
    {
        "id": "c17306a46c409a73",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Show All CanID's for specific Source Addr",
        "func": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n//\n//Credit to PiMo131 for the dec2hex conversion flow https://flows.nodered.org/flow/8fe266c1d038369fb60a6c03995f50a3\n//\n//This function filters by the entered Source Address so will\n//pass the desired canid's only for a specific device (source addr).\n//Examples:\n//-The eRVin/coachproxy RPi device is normally Source Address hex 99.\n//-The Magnum ME-RVC Inverter/Charger to RV-C gateway device uses Source Address hex 42.\n//-The Garnet SeeLevel RV-C version uses Source Address hex 48.\n//\n// Some manufacturers (like Garnet) will tell you the Source Address in thier documentation,\n// others will require you guess it by context using the PGN. For example if the PGNs have to do with \n// Inverter/Charger functions, the device is likely to be a device like an ME-RVC or Inverter/Charger.\n//\n// Once you know the PGN for a particular Source Address you can look up its function in the RV-C\n// protocol document http://www.rv-c.com/forum/8. Search on the PGN such as 1FFCA.\n//\n//Use the CSS conversion tool to convert a CANid to PGN & PGN to CANid\n//https://www.csselectronics.com/pages/j1939-pgn-conversion-tool\n//\n//****Enter below the desired Source Addr (rightmost two digits) in hex as a string:\nvar showsad = \"42\"; //for example \"99\"\nvar decimal = msg.payload.canid;\ndecimal = parseInt(decimal);\nvar hexString = decimal.toString(16).padStart(2,'0').toUpperCase();\nvar sad = hexString.slice(-2);\nif (sad == showsad) {\n    msg.payload.canidhex = hexString;\n    return msg\n} else {}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 940,
        "wires": [
            [
                "eede004ce8f0265c"
            ]
        ]
    },
    {
        "id": "3b1da0cdec7b981a",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 860,
        "wires": []
    },
    {
        "id": "e6fadbb86d704fbe",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 900,
        "wires": []
    },
    {
        "id": "eede004ce8f0265c",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 940,
        "wires": []
    },
    {
        "id": "8d061e279d074a4a",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "function 1",
        "func": "\n\n\n\nconst convert = {\n    bin2dec: s => parseInt(s, 2).toString(10),\n    bin2hex: s => parseInt(s, 2).toString(16),\n    dec2bin: s => parseInt(s, 10).toString(2),\n    dec2hex: s => parseInt(s, 10).toString(16),\n    hex2bin: s => parseInt(s, 16).toString(2),\n    hex2dec: s => parseInt(s, 16).toString(10)\n};\n\n//convert.bin2dec('111'); // '7'\n//convert.dec2hex('42');  // '2a'\n//convert.hex2bin('f8');  // '11111000'\n//convert.dec2bin('22');  // '10110'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "f08b9c2af843b57c",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Expand CanID2hex2bin2pgn",
        "func": "// \u00c2\u00a9 20221210 \u00c2\u00a9 Rob Picchione myERVIN.com\n//\n//This function is intended to be wired to the output of a socketcan-out node.\n//It takes the decimal canid in message.payload.canid and expands it to\n//include the following conversions:\n//- canid in hex\n//- canid in binary\n//- canid converted to the PGN in decimal\n//- canid converted to the PGN in hex\n//- canid converted to the PGN in binary\n//\n//Use can also use the CSS conversion tool to convert a CANid to PGN & PGN to CANid\n//https://www.csselectronics.com/pages/j1939-pgn-conversion-tool\n//\n//****Enter below the desired canid less Source Addr (rightmost two digits) in uppercase hex as a string:\nvar showcanid = \"19FFFC\"; //such as \"19FFFD\"\n//\nconst convert = {\n    bin2dec: s => parseInt(s, 2).toString(10),\n    bin2hex: s => parseInt(s, 2).toString(16).toUpperCase(),\n    dec2bin: s => parseInt(s, 10).toString(2),\n    dec2hex: s => parseInt(s, 10).toString(16).toUpperCase(),\n    hex2bin: s => parseInt(s, 16).toString(2),\n    hex2dec: s => parseInt(s, 16).toString(10)\n};\n//\nvar caniddec = msg.payload.canid;\n//decimal = parseInt(decimal);\n//var hexString = decimal.toString(16).padStart(2,'0').toUpperCase();\n//var canid = hexString.slice(0, 6); //remove source addr from canid\n\nvar canidbin = convert.dec2bin(caniddec);\nvar canidhex = convert.dec2hex(caniddec);\nvar canidhexnsa = canidhex.slice(0, 6); //remove source addr from canid\nvar srcaddr = canidhex.slice(-2);\nvar pgnbin = canidbin.slice(4,21);\nvar pgnhex = convert.bin2hex(pgnbin);\nvar pgndec = convert.bin2dec(pgnbin);\n\nmsg.payload.canidbin = canidbin;\nmsg.payload.canidhex = canidhex;\nmsg.payload.srcaddr = srcaddr;\nmsg.payload.pgnbin = pgnbin;\nmsg.payload.pgnhex = pgnhex;\nmsg.payload.pgndec = pgndec\n\nif (showcanid == canidhexnsa) {\n    //msg.payload.canidbin = canidbin;\n    //msg.payload.canidhex = canidhex;\n    //msg.payload.srcaddr = srcaddr;\n    //msg.payload.pgnbin = pgnbin;\n    //msg.payload.pgnhex = pgnhex;\n    //msg.payload.pgndec = pgndec\n    return msg\n} else {}\n\n\n\n\n\n\n\n//convert.bin2dec('111'); // '7'\n//convert.dec2hex('42');  // '2a'\n//convert.hex2bin('f8');  // '11111000'\n//convert.dec2bin('22');  // '10110'",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "37dfbca6420057ca",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 1080,
        "wires": []
    },
    {
        "id": "bb6f195fb98f78f9",
        "type": "function",
        "z": "ceeb844e7eb3d728",
        "name": "Expand CanID2hex2bin2pgn",
        "func": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n//\n// This function does multiple conversions and is intended\n// to be wired to the output of a socketcan-out node.\n// It takes the decimal canid in message.payload.canid and expands it to\n// include the following conversions. This makes it easier to search \n// or filter for specific occurances on the canbus:\n// - canid in hex\n// - canid in binary\n// - canid in hex less source address\n// - extract source address from canid\n// - source addess in decimal\n// - extract PGN from canid in binary\n// - extract PGN from canid in hex\n// - extract PGN from canid in decimal\n//\n// One method of filtering for a specific value is to add a Switch node to the output\n// of this node, entering the deired path (such as msg.payload.pgnhex ) and the value \n// you are looking for (such as 1FFDC). See the adjacent Switch node for an example.\n// More advanced filtering may require using a function node.\n//\n// Note all the new messages are strings.\n//\n// You can also use the CSS conversion tool to convert a CANid to PGN & PGN to CANid\n// https://www.csselectronics.com/pages/j1939-pgn-conversion-tool\n//\n// conversion constants:\nconst convert = {\n    bin2dec: s => parseInt(s, 2).toString(10),\n    bin2hex: s => parseInt(s, 2).toString(16).toUpperCase(),\n    dec2bin: s => parseInt(s, 10).toString(2),\n    dec2hex: s => parseInt(s, 10).toString(16).toUpperCase(),\n    hex2bin: s => parseInt(s, 16).toString(2),\n    hex2dec: s => parseInt(s, 16).toString(10)\n};\n//\nvar caniddecnum = msg.payload.canid;// rename the socketcan numerical decimal canid to avoid confusion\nvar canidbin = convert.dec2bin(caniddecnum);// convert the socketcan decimal canid to binary\nvar canidhex = convert.dec2hex(caniddecnum);// convert the socketcan decimal canid to hex\nvar caniddecstr = convert.hex2dec(canidhex);// create a string version of the decimal canid\nvar canidhexnsa = canidhex.slice(0, 6);// remove source addr from hex canid\nvar srcaddrhex = canidhex.slice(-2);// extract the source address (2 rightmost hex digits)\nvar srcaddrdec = convert.hex2dec(srcaddrhex);// convert the hex source address to decimal\nvar pgnbin = canidbin.slice(4,21);// extract the PGN by ignoring the 4 leftmost bits and 8 rightmost bits\nvar pgnhex = convert.bin2hex(pgnbin).padStart(5, '0');// convert the binary PGN to hex, pad with leading zero if needed\nvar pgndec = convert.bin2dec(pgnbin);// convert the binary PGN to decimal\n//\n// create new payload messages:\nmsg.payload.caniddec = caniddecstr;// decimal canid as a string\nmsg.payload.canidbin = canidbin;// canid converted to binary\nmsg.payload.canidhex = canidhex;// canid converted to hex\nmsg.payload.canidnosrcaddr = canidhexnsa;// canid without the source address in hex\nmsg.payload.srcaddrhex = srcaddrhex;// source address only in hex\nmsg.payload.scraddrdec = srcaddrdec;// source address only in decimal\nmsg.payload.pgnbin = pgnbin;// canid coverted to PGN in binary\nmsg.payload.pgnhex = pgnhex;// canid converted to PGN in hex\nmsg.payload.pgndec = pgndec;// canid converted to PGN in decimal\n\nreturn msg\n\n// Sample msg.payload output in node-red debug:\n//\n//{ \"timestamp\": 1671573399565\n//\"ext\": true\n//\"canid\": 419351195\n//\"dlc\": 8\n//\"rtr\": false\n//\"data\": [5, 132, 255, 255, 255, 255, 255, 255]\n//\"caniddec\": \"419351195\"\n//\"canidbin\": \"11000111111101100101010011011\"\n//\"canidhex\": \"18FECA9B\"\n//\"canidnosrcaddr\": \"18FECA\"\n//\"srcaddr\": \"9B\"\n//\"pgnbin\": \"01111111011001010\"\n//\"pgnhex\": \"0FECA\"\n//\"pgndec\": \"65226\" }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 1040,
        "wires": [
            [
                "37dfbca6420057ca",
                "debce5800898883f"
            ]
        ]
    },
    {
        "id": "debce5800898883f",
        "type": "switch",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "property": "payload.pgnhex",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1FFFD",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 850,
        "y": 1040,
        "wires": [
            [
                "24e6c381d4e6380f"
            ]
        ]
    },
    {
        "id": "24e6c381d4e6380f",
        "type": "debug",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1050,
        "y": 1040,
        "wires": []
    },
    {
        "id": "b8452b3475deaaa1",
        "type": "comment",
        "z": "ceeb844e7eb3d728",
        "name": "Examples of how to filter for various devices and/or PGN's",
        "info": "See documentation within each function node",
        "x": 670,
        "y": 780,
        "wires": []
    },
    {
        "id": "5705f0523d253f00",
        "type": "comment",
        "z": "ceeb844e7eb3d728",
        "name": "Expand CANid Master Utility",
        "info": "// Project: eRVin https://myervin.com\n// \u00c2\u00a9 2022 Rob Picchione All right reserved.\n// License(New BSD) https://myervin.com/new-bsd-license\n//\n// This function does multiple conversions and is intended\n// to be wired to the output of a socketcan-out node.\n// It takes the decimal canid in message.payload.canid and expands it to\n// include the following conversions. This makes it easier to search \n// or filter for specific occurances on the canbus:\n// - canid in hex\n// - canid in binary\n// - canid in hex less source address\n// - extract source address from canid\n// - source addess in decimal\n// - extract PGN from canid in binary\n// - extract PGN from canid in hex\n// - extract PGN from canid in decimal\n//\n// One method of filtering for a specific value is to add a Switch node to the output\n// of this node, entering the deired path (such as msg.payload.pgnhex ) and the value \n// you are looking for (such as 1FFDC). See the adjacent Switch node for an example.\n// More advanced filtering may require using a function node.\n//\n// Note all the new messages are strings.\n//\n// You can also use the CSS conversion tool to convert a CANid to PGN & PGN to CANid\n// https://www.csselectronics.com/pages/j1939-pgn-conversion-tool",
        "x": 580,
        "y": 1000,
        "wires": []
    },
    {
        "id": "950830987ad2e6fd",
        "type": "comment",
        "z": "ceeb844e7eb3d728",
        "name": "Conversion Examples",
        "info": "Basic javascript examples of how to convert from hex to decimal, etc.",
        "x": 560,
        "y": 1160,
        "wires": []
    },
    {
        "id": "fab6e0037f1a8392",
        "type": "inject",
        "z": "ceeb844e7eb3d728",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "CAN_Tools",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.66",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "f4eed0a912cde108",
                "2643d15bfb07f035"
            ]
        ]
    },
    {
        "id": "2c77dda25ebc5cca",
        "type": "comment",
        "z": "ceeb844e7eb3d728",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for updates to the tab.",
        "x": 190,
        "y": 80,
        "wires": []
    },
    {
        "id": "f4eed0a912cde108",
        "type": "change",
        "z": "ceeb844e7eb3d728",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "2643d15bfb07f035",
        "type": "ui_text",
        "z": "ceeb844e7eb3d728",
        "group": "484be7bae8eb548a",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "CAN Tools",
        "format": "Tab Name: {{msg.payload.tabname}} <br> Source: {{msg.payload.source}} <br> Tab Version: {{msg.payload.tabver}}",
        "layout": "row-spread",
        "className": "",
        "x": 430,
        "y": 120,
        "wires": []
    },
    {
        "id": "ad73c16982d1e5ca",
        "type": "comment",
        "z": "a74abebb1981affa",
        "name": "Delete this tab before creating public distribution",
        "info": "",
        "x": 240,
        "y": 260,
        "wires": []
    },
    {
        "id": "12c051af89bfec74",
        "type": "comment",
        "z": "a74abebb1981affa",
        "name": "Save a Tab in POST format",
        "info": "// Copyright 2023 Rob Picchione\n//\n// Sends Admin HTTP API command to GET the json for the designated node-red TAB.\n// The tab ID is required. Note the json returned is in the proper format to use\n// the Admin HTTP API XPOST to write a tab to Node-Red from the command line.\n// The path variable contains the detination path, the filename = the tab name with no extension.\n// If the tab file already exists it is overwritten without warning.\n// After the files are saved they can be sftp'd to the ervin server.\n// The primary purpose of this flow is for development to make saving tabs easier.\n// and is not needed for end user purposes. The end user will use the Install Tabs flow\n// to update or install the saved tab flows on the ervin server.",
        "x": 170,
        "y": 340,
        "wires": []
    },
    {
        "id": "7b988159c660e8c0",
        "type": "exec",
        "z": "a74abebb1981affa",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 610,
        "y": 540,
        "wires": [
            [
                "7472e9590ba75ca9"
            ],
            [],
            [
                "70f95b5ce4545d37"
            ]
        ]
    },
    {
        "id": "d3f512ce758411ce",
        "type": "inject",
        "z": "a74abebb1981affa",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "flows",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "flows",
        "payload": "",
        "payloadType": "str",
        "x": 170,
        "y": 400,
        "wires": [
            [
                "0b1d9ef769064ff7"
            ]
        ]
    },
    {
        "id": "0b1d9ef769064ff7",
        "type": "http request",
        "z": "a74abebb1981affa",
        "name": "Get All Flows",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/{{{topic}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "basic",
        "senderr": false,
        "headers": [],
        "x": 410,
        "y": 440,
        "wires": [
            [
                "a4e36728a4099528"
            ]
        ]
    },
    {
        "id": "cf47d3e4746f2be0",
        "type": "debug",
        "z": "a74abebb1981affa",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 680,
        "wires": []
    },
    {
        "id": "0492a13d18f5b681",
        "type": "ui_list",
        "z": "a74abebb1981affa",
        "group": "5ede010b7768b05f",
        "name": "Copy Tab",
        "order": 3,
        "width": "6",
        "height": "4",
        "lineType": "one",
        "actionType": "check",
        "allowHTML": false,
        "outputs": 1,
        "topic": "",
        "x": 400,
        "y": 500,
        "wires": [
            [
                "701ae90968c725e9"
            ]
        ]
    },
    {
        "id": "3e2e45df0642c678",
        "type": "inject",
        "z": "a74abebb1981affa",
        "name": "payload",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload.description",
                "v": "description",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"title\",\"description\"]",
        "payloadType": "json",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "0492a13d18f5b681"
            ]
        ]
    },
    {
        "id": "f229c7fc5482b941",
        "type": "inject",
        "z": "a74abebb1981affa",
        "name": "Clear Results",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 520,
        "wires": [
            [
                "0492a13d18f5b681"
            ]
        ]
    },
    {
        "id": "72bc63148bb5ef8f",
        "type": "function",
        "z": "a74abebb1981affa",
        "name": "Array2Obj",
        "func": "// first attempt to convert the GET data for tabs to send\n// payload.title for the value of label and payload.description \n// for the value of id is the function below.\n//\n// the final and much cleaner solution is using a change node  Set msg.payload with JSONata expression\n// payload[type='tab'].{\"title\": label, \"description\": id, \"disabled\": disabled}\n//                     \"---> the rest changes the obj names (ie label to title) and new payload\n// \"-----------------\" this part sorts out the type=tab values\n\n\nvar key\nvar count\nfor (var i = 0; i < msg.payload.length; i++) {\n    var newMsg = {};\n    newMsg.payload = {\n        title: msg.payload[i].label,\n        description: msg.payload[i].id,\n        key: i,\n        count: msg.payload.length\n    }\n    node.send(newMsg);\n}\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 120,
        "y": 680,
        "wires": [
            [
                "35e41f78745d7032"
            ]
        ]
    },
    {
        "id": "a4e36728a4099528",
        "type": "change",
        "z": "a74abebb1981affa",
        "name": "Filter TABS & Reformat",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[type='tab'].{\"title\": label, \"description\": id, \"disabled\": disabled}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 440,
        "wires": [
            [
                "0492a13d18f5b681"
            ]
        ]
    },
    {
        "id": "35e41f78745d7032",
        "type": "join",
        "z": "a74abebb1981affa",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "payload.key",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "5",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 270,
        "y": 680,
        "wires": [
            [
                "cf47d3e4746f2be0"
            ]
        ]
    },
    {
        "id": "701ae90968c725e9",
        "type": "function",
        "z": "a74abebb1981affa",
        "name": "",
        "func": "// Copyright 2023 Rob Picchione\n//\n// Sends Admin HTTP API command to GET the json for the designated node-red TAB.\n// The tab ID is required. Note the json returned is in the proper format to use\n// the Admin HTTP API XPOST to write a tab to Node-Red from the command line.\n// The path variable contains the detination path, the filename = the tab name with json extension.\n// If the tab file already exists it is overwritten without warning.\n// After the files are saved they can be sftp'd to the ervin server.\n// The primary purpose of this flow is for development to make saving tabs easier.\n// and is not needed for end user purposes. The end user will use the Install Tabs flow\n// to update or install the saved tab flows on the ervin server.\n\nif (msg.payload.isChecked === false ) {\n    return null\n}\n\n// Example: curl -X GET -H \"Content-Type: application/json\" http://localhost:1880/flow/\"7d72eb23bca7e4d4\"\n\nvar path = \"/coachproxy/home/pi/.node-red/tabs/\" //tab file gets saved here for later upload to http://tabs.myervin.com\nvar tab = path + msg.payload.title + \".json\"\nvar tabfile = 'curl -X GET -H \"Content-Type: application/json\" http://localhost:1880/flow/' + '\"' + msg.payload.description +'\"'\n\nvar msg2 = { 'enabled': false };\n\nvar msg1 = { \n    'payload': tabfile,\n    'filename': tab\n};\n\nreturn [ msg1, msg2 ];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 560,
        "wires": [
            [
                "7b988159c660e8c0"
            ],
            []
        ]
    },
    {
        "id": "7472e9590ba75ca9",
        "type": "file",
        "z": "a74abebb1981affa",
        "name": "/coachproxy/home/pi/.node-red/tabs/",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 870,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "84b9d697cbdcc4ae",
        "type": "ui_template",
        "z": "a74abebb1981affa",
        "group": "5ede010b7768b05f",
        "name": "Save Tab File Locally",
        "order": 1,
        "width": "0",
        "height": "0",
        "format": "\n<div layout=\"column\" layout-align=\"space-between\">\n<p>\n- This feature is intended for developer use to facilitate making a TAB flow file in the proper POST format for subsequent remote installation by end users.\n<br>- The files will be saved at the \"path\" variable specified in the function node - usually /coachproxy/home/pi/.node-red/tabs/\n<br>- The name of the file will be the name of the tab.\n</p>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 400,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "ca9eb287a9d7c0fe",
        "type": "ui_button",
        "z": "a74abebb1981affa",
        "name": "",
        "group": "5ede010b7768b05f",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "List Tabs",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "flows",
        "topicType": "str",
        "x": 160,
        "y": 440,
        "wires": [
            [
                "0b1d9ef769064ff7"
            ]
        ]
    },
    {
        "id": "70f95b5ce4545d37",
        "type": "switch",
        "z": "a74abebb1981affa",
        "name": "error?",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 690,
        "y": 620,
        "wires": [
            [
                "24a11693ee0281d4",
                "3f94f0d2f60990b2"
            ],
            [
                "bcfb59acdc2f2167"
            ]
        ]
    },
    {
        "id": "bcfb59acdc2f2167",
        "type": "change",
        "z": "a74abebb1981affa",
        "name": "Error",
        "rules": [
            {
                "t": "move",
                "p": "payload.message",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Error: ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 640,
        "wires": [
            [
                "7d54e9d8c951e45d"
            ]
        ]
    },
    {
        "id": "7d54e9d8c951e45d",
        "type": "ui_toast",
        "z": "a74abebb1981affa",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Error",
        "x": 1030,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "3f94f0d2f60990b2",
        "type": "change",
        "z": "a74abebb1981affa",
        "name": "Clear List of Tabs",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 560,
        "wires": [
            [
                "0492a13d18f5b681"
            ]
        ]
    },
    {
        "id": "24a11693ee0281d4",
        "type": "change",
        "z": "a74abebb1981affa",
        "name": "Successful",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "\"File copied to: \" & filename[]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 600,
        "wires": [
            [
                "acb947e3c075d53a"
            ]
        ]
    },
    {
        "id": "acb947e3c075d53a",
        "type": "ui_toast",
        "z": "a74abebb1981affa",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Successful",
        "x": 1050,
        "y": 600,
        "wires": []
    },
    {
        "id": "e808c43174cc1878",
        "type": "comment",
        "z": "a74abebb1981affa",
        "name": "Alt method of reformatting array to object",
        "info": "",
        "x": 220,
        "y": 640,
        "wires": []
    },
    {
        "id": "2a16bdd8b1fe2d81",
        "type": "inject",
        "z": "a74abebb1981affa",
        "name": "Set Tab Info",
        "props": [
            {
                "p": "payload.tabname",
                "v": "Dev_Tools",
                "vt": "str"
            },
            {
                "p": "payload.source",
                "v": "eRVin",
                "vt": "str"
            },
            {
                "p": "payload.tabver",
                "v": "0.65",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 170,
        "y": 140,
        "wires": [
            [
                "fc6dfd2ca6a3ef22"
            ]
        ]
    },
    {
        "id": "c8bde8867327b63e",
        "type": "comment",
        "z": "a74abebb1981affa",
        "name": "Set Tab Info",
        "info": "Report the Tab name, source and version to the dashboard\nRecord the name and version to flow context.\nDo not modify these values, they will be used for remote updates to the tab.",
        "x": 130,
        "y": 100,
        "wires": []
    },
    {
        "id": "fc6dfd2ca6a3ef22",
        "type": "change",
        "z": "a74abebb1981affa",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "flow",
                "to": "payload.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabname",
                "pt": "flow",
                "to": "payload.tabname",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "tabver",
                "pt": "flow",
                "to": "payload.tabver",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "a1c8cfb99d1c4e34",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "2_Livingroom_Ceiling",
        "label": "Livingroom Ceiling",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "2_state_Livingroom Ceiling",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 560,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "610195df72bd490a",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "2_Livingroom_Ceiling_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "2_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 600,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "f38d68b56104410c",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 560,
        "wires": [
            [
                "a1c8cfb99d1c4e34"
            ],
            [
                "610195df72bd490a"
            ],
            [
                "b862bae89fb8c806"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "82f08710fbfc4753",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/2",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 560,
        "wires": [
            [
                "f38d68b56104410c"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "45c77259d6c342a6",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "3_Dinette_Light",
        "label": "Dinette Light",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "3_state_Dinette Light",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 640,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "1b8860a291ce4106",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "3_Dinette_Light_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "3_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 680,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "dfb6c7bc6b4c4d86",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 640,
        "wires": [
            [
                "45c77259d6c342a6"
            ],
            [
                "1b8860a291ce4106"
            ],
            [
                "2b35339dc99e7d93"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "45d82a6f52d9419e",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/3",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 640,
        "wires": [
            [
                "dfb6c7bc6b4c4d86"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "260c365d522541ed",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "4_DS_Sofa",
        "label": "DS Sofa",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "4_state_DS Sofa",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 720,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "73b7cbf40e924ec6",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "4_DS_Sofa_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "4_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 760,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "9bacc8e7bebd4308",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 720,
        "wires": [
            [
                "260c365d522541ed"
            ],
            [
                "73b7cbf40e924ec6"
            ],
            [
                "5eee61b718dd427d"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "9e4b8e023914448d",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/4",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 720,
        "wires": [
            [
                "9bacc8e7bebd4308"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "d79617944dbd46f0",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "5_Sofa_Sconce",
        "label": "Sofa Sconce",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "5_state_Sofa Sconce",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 800,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "8e84d9a76664418f",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "5_Sofa_Sconce_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 8,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "5_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 840,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "bbf5c2332e474c94",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 800,
        "wires": [
            [
                "d79617944dbd46f0"
            ],
            [
                "8e84d9a76664418f"
            ],
            [
                "287fe9d1eb24727e"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "2f39619ce4f94c73",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/5",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 800,
        "wires": [
            [
                "bbf5c2332e474c94"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "8cf7449336334fb8",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "6_PS_Sofa",
        "label": "PS Sofa",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 9,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "6_state_PS Sofa",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 880,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "24f0433302f3422a",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "6_PS_Sofa_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "6_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 920,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "9697296998734dc9",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 880,
        "wires": [
            [
                "8cf7449336334fb8"
            ],
            [
                "24f0433302f3422a"
            ],
            [
                "025c7658a2ea6a16"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "f34a394111f648be",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/6",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 880,
        "wires": [
            [
                "9697296998734dc9"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "579dd2bc2fdc4d91",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "7_Kitchen_overhead",
        "label": "Kitchen Overhead",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 11,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "7_state_Kitchen Overhead",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 960,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "886e50e19b064d82",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "7_Kitchen_overhead_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "7_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1000,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "b9d60bd1d86c43ea",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 960,
        "wires": [
            [
                "579dd2bc2fdc4d91"
            ],
            [
                "886e50e19b064d82"
            ],
            [
                "772c5081360240e5"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "0232c2b65b0b449b",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/7",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 960,
        "wires": [
            [
                "b9d60bd1d86c43ea"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "56a923b1336c4081",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "22_Entry_OH",
        "label": "Entry OH",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 13,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "22_state_Entry OH",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1040,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "76373fcabc9b4d44",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "22_Entry_OH_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 14,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "22_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1080,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "da076818fc714412",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1040,
        "wires": [
            [
                "56a923b1336c4081"
            ],
            [
                "76373fcabc9b4d44"
            ],
            [
                "7546f67e6d9e72d4"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "2887b68a079842a7",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/22",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1040,
        "wires": [
            [
                "da076818fc714412"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "c37db5f22a404abf",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "23_Entertainment_Accent",
        "label": "Entertainment Accent",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 15,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "23_state_Entertainment Accent",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1120,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "2a4fe38d284c4daa",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "23_Entertainment_Accent_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 16,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "23_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1160,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "5ebb6af31d784862",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1120,
        "wires": [
            [
                "c37db5f22a404abf"
            ],
            [
                "2a4fe38d284c4daa"
            ],
            [
                "4bd10622b69d6598"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "e9b4e42e3d454ba8",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/23",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1120,
        "wires": [
            [
                "5ebb6af31d784862"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "c47fd38a6ea14225",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "27_Base_Accent",
        "label": "Base Accent",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 17,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "27_state_Base Accent",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1200,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "460d4a141e1842f3",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "27_Base_Accent_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 18,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "27_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1240,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "98262f5647bc4d63",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1200,
        "wires": [
            [
                "c47fd38a6ea14225"
            ],
            [
                "460d4a141e1842f3"
            ],
            [
                "069654db8704c0cc"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "53a0c558fb514e47",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/27",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1200,
        "wires": [
            [
                "98262f5647bc4d63"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "9d3c5f6513d84f41",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "28_Sink_Light",
        "label": "Sink Light",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 19,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "28_state_Sink Light",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1280,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "64d695be5fb14db0",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "28_Sink_Light_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 20,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "28_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1320,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "f53951f05cc44056",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1280,
        "wires": [
            [
                "9d3c5f6513d84f41"
            ],
            [
                "64d695be5fb14db0"
            ],
            [
                "6eaa87d6a9a99381"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "2c1e63c3e7254d6c",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/28",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1280,
        "wires": [
            [
                "f53951f05cc44056"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "51d56c18636c4735",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "36_hall_lights",
        "label": "Hall Lights",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 21,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "36_state_Hall Lights",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1360,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "6a60aeed685943b7",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "36_hall_lights_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 22,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "36_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1400,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "9fa87c6c9edf48ff",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1360,
        "wires": [
            [
                "51d56c18636c4735"
            ],
            [
                "6a60aeed685943b7"
            ],
            [
                "0e2f10029df2779d"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "6a98939f58244a79",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/36",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1360,
        "wires": [
            [
                "9fa87c6c9edf48ff"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "4535c7b3794943d0",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "37_Courtesy_Lights",
        "label": "Courtesy Lights",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 23,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "37_state_Courtesy Lights",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1440,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "d8b30d12d6c2473c",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "37_Courtesy_Lights_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 24,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "37_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1480,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "c3147b6ba9144ed6",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1440,
        "wires": [
            [
                "4535c7b3794943d0"
            ],
            [
                "d8b30d12d6c2473c"
            ],
            [
                "9d84ac07603af76e"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "55227a0753184b62",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/37",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1440,
        "wires": [
            [
                "c3147b6ba9144ed6"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "972bb04af8454b59",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "255_Light_Master_OFF",
        "label": "Light Master OFF",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 25,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "255_state_Light Master OFF",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1520,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "802e31adfa454eb7",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "255_Light_Master_OFF_brightness",
        "label": "",
        "tooltip": "",
        "group": "ac76b24ed15e9598",
        "order": 26,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "255_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1560,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "b3a4b431285642c1",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1520,
        "wires": [
            [
                "972bb04af8454b59"
            ],
            [
                "802e31adfa454eb7"
            ],
            []
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "6375cbe472544082",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/255",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1520,
        "wires": [
            [
                "b3a4b431285642c1"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "5985767f7bc94bae",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "10_BedRM_Lights",
        "label": "Bedrm Lights",
        "tooltip": "",
        "group": "6e02c68320322e1a",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "10_state_Bedrm Lights",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1600,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "ff764f787fb148bf",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "10_BedRM_Lights_brightness",
        "label": "",
        "tooltip": "",
        "group": "6e02c68320322e1a",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "10_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1640,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "7000ccab4a074605",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1600,
        "wires": [
            [
                "5985767f7bc94bae"
            ],
            [
                "ff764f787fb148bf"
            ],
            [
                "55d217ea1356528a"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "599ca08ca1704de4",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/10",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1600,
        "wires": [
            [
                "7000ccab4a074605"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "64da81f69ff0482b",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "12_Bedroom_Vanity",
        "label": "Bedroom Vanity",
        "tooltip": "",
        "group": "6e02c68320322e1a",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "12_state_Bedroom Vanity",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1680,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "934d1e373a884bd8",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "12_Bedroom_Vanity_brightness",
        "label": "",
        "tooltip": "",
        "group": "6e02c68320322e1a",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "12_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1720,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "0a964b25727d4aca",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1680,
        "wires": [
            [
                "64da81f69ff0482b"
            ],
            [
                "934d1e373a884bd8"
            ],
            [
                "e44c83d8969cdc27"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "3dba895f91d84b07",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/12",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1680,
        "wires": [
            [
                "0a964b25727d4aca"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "5efa73b154a6430a",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "31_bathroom_light",
        "label": "Bathroom Light",
        "tooltip": "",
        "group": "f60d0ea52e0b82e7",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "31_state_Bathroom Light",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1760,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "2226e13e14bc4070",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "31_bathroom_light_brightness",
        "label": "",
        "tooltip": "",
        "group": "f60d0ea52e0b82e7",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "31_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1800,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "c2d2cadcc3f44077",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1760,
        "wires": [
            [
                "5efa73b154a6430a"
            ],
            [
                "2226e13e14bc4070"
            ],
            [
                "7a186291e1bb5f4b"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "46ede24aeb1a4d02",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/31",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1760,
        "wires": [
            [
                "c2d2cadcc3f44077"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "44f7418638e8477c",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "32_Base_Accent_Bathroom",
        "label": "Base Accent Bathroom",
        "tooltip": "",
        "group": "f60d0ea52e0b82e7",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "32_state_Base Accent Bathroom",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1840,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "41b09399704e4f92",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "32_Base_Accent_Bathroom_brightness",
        "label": "",
        "tooltip": "",
        "group": "f60d0ea52e0b82e7",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "32_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1880,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "8b32eafac1f54c2a",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1840,
        "wires": [
            [
                "44f7418638e8477c"
            ],
            [
                "41b09399704e4f92"
            ],
            [
                "bd4295c323ded89f"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "23f1f9a3c18b4dc7",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/32",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1840,
        "wires": [
            [
                "8b32eafac1f54c2a"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "5f32013554204357",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "33_Lavatory_Overhead",
        "label": "Lavatory Overhead",
        "tooltip": "",
        "group": "f60d0ea52e0b82e7",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "33_state_Lavatory Overhead",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 1920,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "f6459a7dbed34433",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "33_Lavatory_Overhead_brightness",
        "label": "",
        "tooltip": "",
        "group": "f60d0ea52e0b82e7",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "33_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 1960,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "6c7d321f2dfa431f",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 1920,
        "wires": [
            [
                "5f32013554204357"
            ],
            [
                "f6459a7dbed34433"
            ],
            []
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "4241c953cc8d4bf8",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/33",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 1920,
        "wires": [
            [
                "6c7d321f2dfa431f"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "d52beca0511f4f90",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "38_D/S_Security_Light",
        "label": "D/s Security Light",
        "tooltip": "",
        "group": "762905e11ef23c4c",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "38_state_D/s Security Light",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 2000,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "ef16d09d6d614dbc",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "38_D/S_Security_Light_brightness",
        "label": "",
        "tooltip": "",
        "group": "762905e11ef23c4c",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "38_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 2040,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "0b76a974471a4540",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 2000,
        "wires": [
            [
                "d52beca0511f4f90"
            ],
            [
                "ef16d09d6d614dbc"
            ],
            []
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "1c583da95c0d49ac",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/38",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 2000,
        "wires": [
            [
                "0b76a974471a4540"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "f0194ab971dd431f",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "39_P/S_Security_Light",
        "label": "P/s Security Light",
        "tooltip": "",
        "group": "762905e11ef23c4c",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "39_state_P/s Security Light",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 2080,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "093901c2ec844f96",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "39_P/S_Security_Light_brightness",
        "label": "",
        "tooltip": "",
        "group": "762905e11ef23c4c",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "39_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 2120,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "c5997aa7b75a4def",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 2080,
        "wires": [
            [
                "f0194ab971dd431f"
            ],
            [
                "093901c2ec844f96"
            ],
            [
                "fdc02f6f2d867635"
            ]
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "ac0821c72c35451e",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/39",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 2080,
        "wires": [
            [
                "c5997aa7b75a4def"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    },
    {
        "id": "45f48027d9e54ef3",
        "type": "ui_switch",
        "z": "144c673ecddfa485",
        "name": "40_Porch_Light",
        "label": "Porch Light",
        "tooltip": "",
        "group": "762905e11ef23c4c",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "40_state_Porch Light",
        "topicType": "str",
        "onvalue": "dim",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 1260,
        "y": 2160,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "b991c74a1a674a9e",
        "type": "ui_slider",
        "z": "144c673ecddfa485",
        "name": "40_Porch_Light_brightness",
        "label": "",
        "tooltip": "",
        "group": "762905e11ef23c4c",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "outs": "end",
        "topic": "40_brightness",
        "topicType": "str",
        "min": "1",
        "max": "100",
        "step": "",
        "className": "",
        "x": 1220,
        "y": 2200,
        "wires": [
            [
                "8452c3ae27508ada"
            ]
        ]
    },
    {
        "id": "0dc370d437254e15",
        "type": "file function",
        "z": "144c673ecddfa485",
        "name": "decode_dc_dimmer_light_ervin.js",
        "filename": ".node-red/js/decode_dc_dimmer_light_ervin.js",
        "reloadfile": false,
        "outputs": 3,
        "x": 640,
        "y": 2160,
        "wires": [
            [
                "45f48027d9e54ef3"
            ],
            [
                "b991c74a1a674a9e"
            ],
            []
        ],
        "outputLabels": [
            "on/off value",
            "brightness value",
            null
        ]
    },
    {
        "id": "ccf71b32081243b8",
        "type": "mqtt in",
        "z": "144c673ecddfa485",
        "name": "",
        "topic": "RVC/DC_DIMMER_STATUS_3/40",
        "qos": "0",
        "datatype": "json",
        "broker": "c1170463.5c7f8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 250,
        "y": 2160,
        "wires": [
            [
                "0dc370d437254e15"
            ]
        ],
        "info": "To parse the MQTT data to JSON, instead of a separate JSON node on the output, simply set the output of this MQTT node to \"a parsed JSON object\"."
    }
]